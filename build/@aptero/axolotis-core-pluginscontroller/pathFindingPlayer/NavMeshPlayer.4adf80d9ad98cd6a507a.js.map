{"version":3,"file":"@aptero/axolotis-core-pluginscontroller/pathFindingPlayer/NavMeshPlayer.4adf80d9ad98cd6a507a.js","mappings":"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","sources":["webpack://axolotis-core-plugins/./node_modules/three-pathfinding/dist/three-pathfinding.module.js","webpack://axolotis-core-plugins/./src/lib/modules/controller/pathFindingPlayer/NavMeshPathfinder.ts","webpack://axolotis-core-plugins/./src/lib/modules/controller/pathFindingPlayer/NavMeshPlayer.ts"],"sourcesContent":["import{BufferAttribute as t,BufferGeometry as e,Vector3 as r,Plane as s,Triangle as n,Color as o,Object3D as i,Mesh as h,SphereBufferGeometry as c,MeshBasicMaterial as a,BoxBufferGeometry as u,LineBasicMaterial as l,Line as d}from\"three\";class p{static roundNumber(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r}static sample(t){return t[Math.floor(Math.random()*t.length)]}static distanceToSquared(t,e){var r=t.x-e.x,s=t.y-e.y,n=t.z-e.z;return r*r+s*s+n*n}static isPointInPoly(t,e){for(var r=!1,s=-1,n=t.length,o=n-1;++s<n;o=s)(t[s].z<=e.z&&e.z<t[o].z||t[o].z<=e.z&&e.z<t[s].z)&&e.x<(t[o].x-t[s].x)*(e.z-t[s].z)/(t[o].z-t[s].z)+t[s].x&&(r=!r);return r}static isVectorInPolygon(t,e,r){var s=1e5,n=-1e5,o=[];return e.vertexIds.forEach(t=>{s=Math.min(r[t].y,s),n=Math.max(r[t].y,n),o.push(r[t])}),!!(t.y<n+.5&&t.y>s-.5&&this.isPointInPoly(o,t))}static triarea2(t,e,r){return(r.x-t.x)*(e.z-t.z)-(e.x-t.x)*(r.z-t.z)}static vequal(t,e){return this.distanceToSquared(t,e)<1e-5}static mergeVertices(r,s=1e-4){s=Math.max(s,Number.EPSILON);for(var n={},o=r.getIndex(),i=r.getAttribute(\"position\"),h=o?o.count:i.count,c=0,a=[],u=[],l=Math.log10(1/s),d=Math.pow(10,l),p=0;p<h;p++){var g=o?o.getX(p):p,f=\"\";f+=~~(i.getX(g)*d)+\",\",f+=~~(i.getY(g)*d)+\",\",(f+=~~(i.getZ(g)*d)+\",\")in n?a.push(n[f]):(u.push(i.getX(g)),u.push(i.getY(g)),u.push(i.getZ(g)),n[f]=c,a.push(c),c++)}const v=new t(new Float32Array(u),i.itemSize,i.normalized),b=new e;return b.setAttribute(\"position\",v),b.setIndex(a),b}}class g{constructor(t){this.content=[],this.scoreFunction=t}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){const t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t}remove(t){const e=this.content.indexOf(t),r=this.content.pop();e!==this.content.length-1&&(this.content[e]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}sinkDown(t){const e=this.content[t];for(;t>0;){const r=(t+1>>1)-1,s=this.content[r];if(!(this.scoreFunction(e)<this.scoreFunction(s)))break;this.content[r]=e,this.content[t]=s,t=r}}bubbleUp(t){const e=this.content.length,r=this.content[t],s=this.scoreFunction(r);for(;;){const n=t+1<<1,o=n-1;let i,h=null;if(o<e&&(i=this.scoreFunction(this.content[o]),i<s&&(h=o)),n<e&&this.scoreFunction(this.content[n])<(null===h?s:i)&&(h=n),null===h)break;this.content[t]=this.content[h],this.content[h]=r,t=h}}}class f{constructor(){this.portals=[]}push(t,e){void 0===e&&(e=t),this.portals.push({left:t,right:e})}stringPull(){const t=this.portals,e=[];let r,s,n,o=0,i=0,h=0;r=t[0].left,s=t[0].left,n=t[0].right,e.push(r);for(let c=1;c<t.length;c++){const a=t[c].left,u=t[c].right;if(p.triarea2(r,n,u)<=0){if(!(p.vequal(r,n)||p.triarea2(r,s,u)>0)){e.push(s),r=s,o=i,s=r,n=r,i=o,h=o,c=o;continue}n=u,h=c}if(p.triarea2(r,s,a)>=0){if(!(p.vequal(r,s)||p.triarea2(r,n,a)<0)){e.push(n),r=n,o=h,s=r,n=r,i=o,h=o,c=o;continue}s=a,i=c}}return 0!==e.length&&p.vequal(e[e.length-1],t[t.length-1].left)||e.push(t[t.length-1].left),this.path=e,e}}class v{constructor(){this.zones={}}static createZone(t,e=1e-4){return class{static buildZone(t,e){const s=this._buildNavigationMesh(t,e),n={};s.vertices.forEach(t=>{t.x=p.roundNumber(t.x,2),t.y=p.roundNumber(t.y,2),t.z=p.roundNumber(t.z,2)}),n.vertices=s.vertices;const o=this._buildPolygonGroups(s);return n.groups=new Array(o.length),o.forEach((t,e)=>{const s=new Map;t.forEach((t,e)=>{s.set(t,e)});const o=new Array(t.length);t.forEach((t,e)=>{const i=[];t.neighbours.forEach(t=>i.push(s.get(t)));const h=[];t.neighbours.forEach(e=>h.push(this._getSharedVerticesInOrder(t,e)));const c=new r(0,0,0);c.add(n.vertices[t.vertexIds[0]]),c.add(n.vertices[t.vertexIds[1]]),c.add(n.vertices[t.vertexIds[2]]),c.divideScalar(3),c.x=p.roundNumber(c.x,2),c.y=p.roundNumber(c.y,2),c.z=p.roundNumber(c.z,2),o[e]={id:e,neighbours:i,vertexIds:t.vertexIds,centroid:c,portals:h}}),n.groups[e]=o}),n}static _buildNavigationMesh(t,e){return t=p.mergeVertices(t,e),this._buildPolygonsFromGeometry(t)}static _spreadGroupId(t){let e=new Set([t]);for(;e.size>0;){const r=e;e=new Set,r.forEach(r=>{r.group=t.group,r.neighbours.forEach(t=>{void 0===t.group&&e.add(t)})})}}static _buildPolygonGroups(t){const e=[];return t.polygons.forEach(t=>{void 0!==t.group?e[t.group].push(t):(t.group=e.length,this._spreadGroupId(t),e.push([t]))}),e}static _buildPolygonNeighbours(t,e){const r=new Set,s=e[t.vertexIds[1]],n=e[t.vertexIds[2]];return e[t.vertexIds[0]].forEach(e=>{e!==t&&(s.includes(e)||n.includes(e))&&r.add(e)}),s.forEach(e=>{e!==t&&n.includes(e)&&r.add(e)}),r}static _buildPolygonsFromGeometry(t){const e=[],s=[],n=t.attributes.position,o=t.index,i=[];for(let t=0;t<n.count;t++)s.push((new r).fromBufferAttribute(n,t)),i[t]=[];for(let r=0;r<t.index.count;r+=3){const t=o.getX(r),s=o.getX(r+1),n=o.getX(r+2),h={vertexIds:[t,s,n],neighbours:null};e.push(h),i[t].push(h),i[s].push(h),i[n].push(h)}return e.forEach(t=>{t.neighbours=this._buildPolygonNeighbours(t,i)}),{polygons:e,vertices:s}}static _getSharedVerticesInOrder(t,e){const r=t.vertexIds,s=r[0],n=r[1],o=r[2],i=e.vertexIds,h=i.includes(s),c=i.includes(n),a=i.includes(o);return h&&c&&a?Array.from(r):h&&c?[s,n]:c&&a?[n,o]:h&&a?[o,s]:(console.warn(\"Error processing navigation mesh neighbors; neighbors with <2 shared vertices found.\"),[])}}.buildZone(t,e)}setZoneData(t,e){this.zones[t]=e}getRandomNode(t,e,s,n){if(!this.zones[t])return new r;s=s||null,n=n||0;const o=[];return this.zones[t].groups[e].forEach(t=>{s&&n?p.distanceToSquared(s,t.centroid)<n*n&&o.push(t.centroid):o.push(t.centroid)}),p.sample(o)||new r}getClosestNode(t,e,r,s=!1){const n=this.zones[e].vertices;let o=null,i=Infinity;return this.zones[e].groups[r].forEach(e=>{const r=p.distanceToSquared(e.centroid,t);r<i&&(!s||p.isVectorInPolygon(t,e,n))&&(o=e,i=r)}),o}findPath(t,e,s,n){const o=this.zones[s].groups[n],i=this.zones[s].vertices,h=this.getClosestNode(t,s,n,!0),c=this.getClosestNode(e,s,n,!0);if(!h||!c)return null;const a=class{static init(t){for(let e=0;e<t.length;e++){const r=t[e];r.f=0,r.g=0,r.h=0,r.cost=1,r.visited=!1,r.closed=!1,r.parent=null}}static cleanUp(t){for(let e=0;e<t.length;e++){const r=t[e];delete r.f,delete r.g,delete r.h,delete r.cost,delete r.visited,delete r.closed,delete r.parent}}static heap(){return new g(function(t){return t.f})}static search(t,e,r){this.init(t);const s=this.heap();for(s.push(e);s.size()>0;){const e=s.pop();if(e===r){let t=e;const r=[];for(;t.parent;)r.push(t),t=t.parent;return this.cleanUp(r),r.reverse()}e.closed=!0;const n=this.neighbours(t,e);for(let t=0,o=n.length;t<o;t++){const o=n[t];if(o.closed)continue;const i=e.g+o.cost,h=o.visited;if(!h||i<o.g){if(o.visited=!0,o.parent=e,!o.centroid||!r.centroid)throw new Error(\"Unexpected state\");o.h=o.h||this.heuristic(o.centroid,r.centroid),o.g=i,o.f=o.g+o.h,h?s.rescoreElement(o):s.push(o)}}}return[]}static heuristic(t,e){return p.distanceToSquared(t,e)}static neighbours(t,e){const r=[];for(let s=0;s<e.neighbours.length;s++)r.push(t[e.neighbours[s]]);return r}}.search(o,h,c),u=function(t,e){for(var r=0;r<t.neighbours.length;r++)if(t.neighbours[r]===e.id)return t.portals[r]},l=new f;l.push(t);for(let t=0;t<a.length;t++){const e=a[t],r=a[t+1];if(r){const t=u(e,r);l.push(i[t[0]],i[t[1]])}}l.push(e),l.stringPull();const d=l.path.map(t=>new r(t.x,t.y,t.z));return d.shift(),d}}v.prototype.getGroup=function(){const t=new s;return function(e,r,s=!1){if(!this.zones[e])return null;let n=null,o=Math.pow(50,2);const i=this.zones[e];for(let e=0;e<i.groups.length;e++){const h=i.groups[e];for(const c of h){if(s&&(t.setFromCoplanarPoints(i.vertices[c.vertexIds[0]],i.vertices[c.vertexIds[1]],i.vertices[c.vertexIds[2]]),Math.abs(t.distanceToPoint(r))<.01)&&p.isPointInPoly([i.vertices[c.vertexIds[0]],i.vertices[c.vertexIds[1]],i.vertices[c.vertexIds[2]]],r))return e;const h=p.distanceToSquared(c.centroid,r);h<o&&(n=e,o=h)}}return n}}(),v.prototype.clampStep=function(){const t=new r,e=new s,o=new n,i=new r;let h,c,a=new r;return function(r,s,n,u,l,d){const p=this.zones[u].vertices,g=this.zones[u].groups[l],f=[n],v={};v[n.id]=0,h=void 0,a.set(0,0,0),c=Infinity,e.setFromCoplanarPoints(p[n.vertexIds[0]],p[n.vertexIds[1]],p[n.vertexIds[2]]),e.projectPoint(s,t),i.copy(t);for(let e=f.pop();e;e=f.pop()){o.set(p[e.vertexIds[0]],p[e.vertexIds[1]],p[e.vertexIds[2]]),o.closestPointToPoint(i,t),t.distanceToSquared(i)<c&&(h=e,a.copy(t),c=t.distanceToSquared(i));const r=v[e.id];if(!(r>2))for(let t=0;t<e.neighbours.length;t++){const s=g[e.neighbours[t]];s.id in v||(f.push(s),v[s.id]=r+1)}}return d.copy(a),h}}();const b={PLAYER:new o(15631215).convertSRGBToLinear().getHex(),TARGET:new o(14469912).convertSRGBToLinear().getHex(),PATH:new o(41903).convertSRGBToLinear().getHex(),WAYPOINT:new o(41903).convertSRGBToLinear().getHex(),CLAMPED_STEP:new o(14472114).convertSRGBToLinear().getHex(),CLOSEST_NODE:new o(4417387).convertSRGBToLinear().getHex()};class w extends i{constructor(){super(),this._playerMarker=new h(new c(.25,32,32),new a({color:b.PLAYER})),this._targetMarker=new h(new u(.3,.3,.3),new a({color:b.TARGET})),this._nodeMarker=new h(new u(.1,.8,.1),new a({color:b.CLOSEST_NODE})),this._stepMarker=new h(new u(.1,1,.1),new a({color:b.CLAMPED_STEP})),this._pathMarker=new i,this._pathLineMaterial=new l({color:b.PATH,linewidth:2}),this._pathPointMaterial=new a({color:b.WAYPOINT}),this._pathPointGeometry=new c(.08),this._markers=[this._playerMarker,this._targetMarker,this._nodeMarker,this._stepMarker,this._pathMarker],this._markers.forEach(t=>{t.visible=!1,this.add(t)})}setPath(r){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);r=[this._playerMarker.position].concat(r);const s=new e;s.setAttribute(\"position\",new t(new Float32Array(3*r.length),3));for(let t=0;t<r.length;t++)s.attributes.position.setXYZ(t,r[t].x,r[t].y+.2,r[t].z);this._pathMarker.add(new d(s,this._pathLineMaterial));for(let t=0;t<r.length-1;t++){const e=new h(this._pathPointGeometry,this._pathPointMaterial);e.position.copy(r[t]),e.position.y+=.2,this._pathMarker.add(e)}return this._pathMarker.visible=!0,this}setPlayerPosition(t){return this._playerMarker.position.copy(t),this._playerMarker.visible=!0,this}setTargetPosition(t){return this._targetMarker.position.copy(t),this._targetMarker.visible=!0,this}setNodePosition(t){return this._nodeMarker.position.copy(t),this._nodeMarker.visible=!0,this}setStepPosition(t){return this._stepMarker.position.copy(t),this._stepMarker.visible=!0,this}reset(){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);return this._markers.forEach(t=>{t.visible=!1}),this}}export{v as Pathfinding,w as PathfindingHelper};\n//# sourceMappingURL=three-pathfinding.module.js.map\n","import { Pathfinding } from \"three-pathfinding\";\nimport { Vector3 } from \"three\";\nimport * as THREE from \"three\";\n\nexport class NavMeshPathfinder {\n  private pathfinder: Pathfinding;\n  private mesh: any;\n  private zone: string = \"character\";\n  private navGroup: any = null;\n  private navNode: any = null;\n\n  isEnabled(): boolean {\n    return this.pathfinder && this.zone in this.pathfinder.zones;\n  }\n\n  loadMesh(mesh, zone: string = this.zone) {\n    this.pathfinder = new Pathfinding();\n    this.mesh = null;\n    this.zone = zone;\n    if (this.mesh) {\n      console.error(\"tried to load multiple nav meshes\");\n      this.removeNavMeshData();\n    }\n    const geometry = mesh.geometry;\n    geometry.applyMatrix4(mesh.matrixWorld);\n    this.pathfinder.setZoneData(zone, Pathfinding.createZone(geometry));\n    this.mesh = mesh;\n  }\n\n  getClosestNode(pos) {\n    const pathfinder = this.pathfinder;\n    if (!pathfinder.zones[this.zone].groups[this.navGroup]) {\n      return null;\n    }\n    return (\n      pathfinder.getClosestNode(pos, this.zone, this.navGroup, true) ||\n      pathfinder.getClosestNode(pos, this.zone, this.navGroup)\n    );\n  }\n\n  findPOVPositionAboveNavMesh = (() => {\n    const startingFeetPosition = new THREE.Vector3();\n    const desiredFeetPosition = new THREE.Vector3();\n    // TODO: Here we assume the player is standing straight up, but in VR it is often the case\n    // that you want to lean over the edge of a balcony/table that does not have nav mesh below.\n    // We should find way to allow leaning over the edge of a balcony and maybe disallow putting\n    // your head through a wall.\n    return (\n      startPOVPosition: THREE.Vector3,\n      desiredPOVPosition: THREE.Vector3,\n      outPOVPosition: THREE.Vector3\n    ) => {\n      //const playerHeight = getCurrentPlayerHeight(true);\n      const playerHeight = 2;\n      startingFeetPosition.copy(startPOVPosition);\n      startingFeetPosition.y -= playerHeight;\n      desiredFeetPosition.copy(desiredPOVPosition);\n      desiredFeetPosition.y -= playerHeight;\n      this.findPositionOnNavMesh(\n        startingFeetPosition,\n        desiredFeetPosition,\n        outPOVPosition\n      );\n      outPOVPosition.y += playerHeight;\n      return outPOVPosition;\n    };\n  })();\n\n  findPositionOnNavMesh(\n    start: Vector3,\n    end: Vector3,\n    outPos: Vector3,\n    shouldRecomputeGroupAndNode: boolean = false\n  ) {\n    const pathfinder = this.pathfinder;\n    if (!(this.zone in pathfinder.zones)) return;\n    this.navGroup =\n      shouldRecomputeGroupAndNode || this.navGroup === null\n        ? pathfinder.getGroup(this.zone, end, true, true)\n        : this.navGroup;\n    this.navNode =\n      shouldRecomputeGroupAndNode ||\n      this.navNode === null ||\n      this.navNode === undefined\n        ? this.getClosestNode(end)\n        : this.navNode;\n    if (this.navNode === null || this.navNode === undefined) {\n      // this.navNode can be null if it has never been set or if getClosestNode fails,\n      // and it can be undefined if clampStep fails, so we have to check both. We do not\n      // simply check if it is falsey (!this.navNode), because 0 (zero) is a valid value,\n      // and 0 is falsey.\n      outPos.copy(end);\n    } else {\n      this.navNode = pathfinder.clampStep(\n        start,\n        end,\n        this.navNode,\n        this.zone,\n        this.navGroup,\n        outPos\n      );\n    }\n    return outPos;\n  }\n\n  /*findPositionOnNavMesh(\n    start: Vector3,\n    end: Vector3,\n    outPos: Vector3,\n    shouldRecomputeGroupAndNode: boolean = false\n  ) {\n    const pathfinder = this.pathfinder;\n    if (!(this.zone in pathfinder.zones)) return;\n    this.navGroup =\n      shouldRecomputeGroupAndNode || this.navGroup === null\n        ? pathfinder.getGroup(this.zone, end, true, true)\n        : this.navGroup;\n    this.navNode =\n      shouldRecomputeGroupAndNode ||\n      this.navNode === null ||\n      this.navNode === undefined\n        ? this.getClosestNode(end)\n        : this.navNode;\n    if (this.navNode === null || this.navNode === undefined) {\n      // this.navNode can be null if it has never been set or if getClosestNode fails,\n      // and it can be undefined if clampStep fails, so we have to check both. We do not\n      // simply check if it is falsey (!this.navNode), because 0 (zero) is a valid value,\n      // and 0 is falsey.\n      outPos.copy(end);\n    } else {\n      try {\n        this.navNode = pathfinder.clampStep(\n          start,\n          end,\n          this.navNode,\n          this.zone,\n          this.navGroup,\n          outPos\n        );\n      } catch (e) {\n        console.error(e);\n        outPos.copy(start);\n        this.navNode = null;\n        this.navGroup = null;\n      }\n    }\n    return outPos;\n  }*/\n\n  removeNavMeshData() {\n    if (this.mesh && this.mesh.geometry && this.mesh.geometry.dispose) {\n      this.mesh.geometry.dispose();\n    }\n    this.mesh = null;\n    this.pathfinder.zones = {};\n  }\n}\n","import * as THREE from \"three\";\nimport { Euler, Quaternion, Vector3 } from \"three\";\nimport { FrameLoop } from \"@aptero/axolotis-player/build/types/modules/FrameLoop\";\nimport Component from \"@aptero/axolotis-player/build/types/modules/core/ecs/Component\";\nimport { WebpackLazyModule } from \"@aptero/axolotis-player/build/types/modules/core/loader/WebpackLoader\";\nimport { ComponentFactory } from \"@aptero/axolotis-player/build/types/modules/core/ecs/ComponentFactory\";\nimport { WorldEntity } from \"@aptero/axolotis-player/build/types/modules/core/ecs/WorldEntity\";\n//import { ServiceEntity } from \"@aptero/axolotis-player/build/types/modules/core/service/ServiceEntity\";\nimport { ServiceEntity } from \"@aptero/axolotis-player\";\nimport { ThreeLib } from \"@root/lib/modules/three/ThreeLib\";\nimport { Input } from \"@root/lib/modules/controller/pathFindingPlayer/Input\";\nimport {\n  Player,\n  PlayerService,\n} from \"@root/lib/modules/controller/PlayerService\";\nimport { NavMeshPathfinder } from \"@root/lib/modules/controller/pathFindingPlayer/NavMeshPathfinder\";\n\nexport class Factory\n  implements WebpackLazyModule, ComponentFactory<NavMeshPlayer>\n{\n  async createComponent(\n    world: WorldEntity,\n    config: any\n  ): Promise<NavMeshPlayer> {\n    let services = world.getFirstComponentByType<ServiceEntity>(\n      ServiceEntity.name\n    );\n    let three = await services.getService<ThreeLib>(\n      \"@aptero/axolotis-core-plugins/modules/three/ThreeLib\"\n    );\n    let input = await services.getService<Input>(\n      \"@aptero/axolotis-core-plugins/modules/controller/pathFindingPlayer/Input\"\n    );\n    let playerService = await services.getService<PlayerService>(\n      \"@aptero/axolotis-core-plugins/modules/controller/PlayerService\"\n    );\n    let frameLoop = await services.getService<FrameLoop>(\n      \"@aptero/axolotis-player/modules/FrameLoop\"\n    );\n    //let position = new THREE.Vector3(2.14, 1.48, -1.36);\n    //let position = new THREE.Vector3(0,5,0);\n    let position = new THREE.Vector3(\n      (config.position && config.position.x) || 0,\n      (config.position && config.position.y) || 0,\n      (config.position && config.position.z) || 0\n    );\n    let rotation = new THREE.Quaternion().setFromAxisAngle(\n      new THREE.Vector3(0, 1, 0),\n      -Math.PI * 0.5\n    );\n    let playerControls = new NavMeshPlayer(\n      position,\n      rotation,\n      await three,\n      await input,\n      playerService\n    );\n    playerService.declarePlayer(playerControls);\n    playerControls.Initialize();\n    (await frameLoop).addLoop(NavMeshPlayer.name, (delta) => {\n      playerControls.Update(delta);\n    });\n    return playerControls;\n  }\n}\n\nconst NAV_ZONE = \"character\";\n\nexport default class NavMeshPlayer implements Component, Player {\n  private camera: any;\n  private timeZeroToMax: number;\n  private decceleration: number;\n  private speed: Vector3;\n  private maxSpeed: number;\n  private mouseSpeed: number;\n  private acceleration: number;\n  private isLocked: boolean;\n  private angles: Euler;\n  private pitch: Quaternion;\n  private jumpVelocity: number;\n  private yaw: Quaternion;\n  private tempVec: Vector3;\n  private moveDir: Vector3;\n  private yOffset: number; //playerHeight\n  private xAxis: Vector3;\n  private yAxis: Vector3;\n  private position: Vector3;\n  private positionOutTmp: Vector3 = new Vector3();\n  private positionOutTmp2: Vector3 = new Vector3();\n  private rotation: Quaternion;\n  private velocity: Vector3;\n  private navMesh: NavMeshPathfinder;\n\n  getType(): string {\n    return NavMeshPlayer.name;\n  }\n\n  askFlyMode() {}\n\n  declareNavMesh(\n    navMesh: THREE.Mesh<THREE.BufferGeometry, THREE.Material | THREE.Material[]>\n  ) {\n    this.navMesh.loadMesh(navMesh, NAV_ZONE);\n  }\n\n  teleportToLocation(x: number, y: number, z: number) {\n    this.position.copy(new THREE.Vector3(x, y, z));\n  }\n\n  getHeadPosition(targetCopy: THREE.Vector3): void {\n    targetCopy.copy(this.position);\n  }\n\n  constructor(\n    position,\n    rotation,\n    three: ThreeLib,\n    private input: Input,\n    private playerService: PlayerService\n  ) {\n    this.position = position;\n    this.rotation = rotation;\n    this.navMesh = new NavMeshPathfinder();\n\n    this.camera = three.camera;\n\n    this.timeZeroToMax = 0.08;\n\n    this.maxSpeed = 7.0;\n    this.speed = new THREE.Vector3();\n    this.acceleration = this.maxSpeed / this.timeZeroToMax;\n    this.decceleration = -7.0;\n\n    this.mouseSpeed = 0.002;\n    this.isLocked = false;\n\n    this.angles = new THREE.Euler();\n    this.pitch = new THREE.Quaternion();\n    this.yaw = new THREE.Quaternion();\n\n    this.jumpVelocity = 5;\n    this.yOffset = 2;\n    this.tempVec = new THREE.Vector3();\n    this.moveDir = new THREE.Vector3();\n    this.xAxis = new THREE.Vector3(1.0, 0.0, 0.0);\n    this.yAxis = new THREE.Vector3(0.0, 1.0, 0.0);\n    this.velocity = new THREE.Vector3();\n  }\n\n  Initialize() {\n    this.angles.setFromQuaternion(this.rotation);\n    this.UpdateRotation();\n\n    this.input.AddMouseMoveListner(this.OnMouseMove);\n\n    document.addEventListener(\"pointerlockchange\", this.OnPointerlockChange);\n\n    this.input.AddClickListner(() => {\n      if (!this.isLocked) {\n        document.body.requestPointerLock();\n      }\n    });\n  }\n\n  OnPointerlockChange = () => {\n    if (document.pointerLockElement) {\n      this.isLocked = true;\n      return;\n    }\n\n    this.isLocked = false;\n  };\n\n  OnMouseMove = (event) => {\n    if (!this.isLocked) {\n      return;\n    }\n\n    const { movementX, movementY } = event;\n\n    this.angles.y -= movementX * this.mouseSpeed;\n    this.angles.x -= movementY * this.mouseSpeed;\n\n    this.angles.x = Math.max(\n      -Math.PI / 2,\n      Math.min(Math.PI / 2, this.angles.x)\n    );\n\n    this.UpdateRotation();\n  };\n\n  UpdateRotation() {\n    this.pitch.setFromAxisAngle(this.xAxis, this.angles.x);\n    this.yaw.setFromAxisAngle(this.yAxis, this.angles.y);\n\n    this.rotation.multiplyQuaternions(this.yaw, this.pitch).normalize();\n\n    this.camera.quaternion.copy(this.rotation);\n  }\n\n  Accelarate = (direction, t) => {\n    const accel = this.tempVec\n      .copy(direction)\n      .multiplyScalar(this.acceleration * t);\n    this.speed.add(accel);\n    this.speed.clampLength(0.0, this.maxSpeed);\n  };\n\n  Deccelerate = (t) => {\n    const frameDeccel = this.tempVec\n      .copy(this.speed)\n      .multiplyScalar(this.decceleration * t);\n    this.speed.add(frameDeccel);\n  };\n\n  Update(t) {\n    t = t * 0.001;\n    const forwardFactor =\n      this.input.GetKeyDown(\"KeyS\") - this.input.GetKeyDown(\"KeyW\");\n    const rightFactor =\n      this.input.GetKeyDown(\"KeyD\") - this.input.GetKeyDown(\"KeyA\");\n    const direction = this.moveDir\n      .set(rightFactor, 0.0, forwardFactor)\n      .normalize();\n\n    this.Deccelerate(t);\n    this.Accelarate(direction, t);\n\n    const moveVector = this.tempVec.copy(this.speed);\n    moveVector.applyQuaternion(this.yaw);\n\n    this.velocity.setX(moveVector.x);\n    this.velocity.setZ(moveVector.z);\n    this.velocity.multiplyScalar(t);\n\n    this.positionOutTmp.x = this.position.x + this.velocity.x;\n    this.positionOutTmp.y = this.position.y + this.velocity.y;\n    this.positionOutTmp.z = this.position.z + this.velocity.z;\n\n    if (this.navMesh.isEnabled()) {\n      this.navMesh.findPOVPositionAboveNavMesh(\n        this.position,\n        this.positionOutTmp,\n        this.positionOutTmp2\n      );\n    } else {\n      this.positionOutTmp2.copy(this.positionOutTmp);\n    }\n\n    this.camera.position.set(\n      this.positionOutTmp2.x,\n      this.positionOutTmp2.y,\n      this.positionOutTmp2.z\n    );\n    this.position.copy(this.camera.position);\n  }\n}\n"],"names":["p","static","t","e","r","Math","pow","round","floor","random","length","x","s","y","n","z","o","vertexIds","forEach","min","max","push","this","isPointInPoly","distanceToSquared","Number","EPSILON","getIndex","i","getAttribute","h","count","c","a","u","l","log10","d","g","getX","f","getY","getZ","v","Float32Array","itemSize","normalized","b","setAttribute","setIndex","constructor","content","scoreFunction","sinkDown","pop","bubbleUp","remove","indexOf","size","rescoreElement","portals","left","right","stringPull","triarea2","vequal","path","zones","_buildNavigationMesh","vertices","roundNumber","_buildPolygonGroups","groups","Array","Map","set","neighbours","get","_getSharedVerticesInOrder","add","divideScalar","id","centroid","mergeVertices","_buildPolygonsFromGeometry","Set","group","polygons","_spreadGroupId","includes","attributes","position","index","fromBufferAttribute","_buildPolygonNeighbours","from","console","warn","buildZone","setZoneData","getRandomNode","sample","getClosestNode","Infinity","isVectorInPolygon","findPath","cost","visited","closed","parent","init","heap","cleanUp","reverse","Error","heuristic","search","map","shift","prototype","getGroup","setFromCoplanarPoints","abs","distanceToPoint","clampStep","projectPoint","copy","closestPointToPoint","convertSRGBToLinear","getHex","NavMeshPathfinder","startingFeetPosition","THREE","desiredFeetPosition","startPOVPosition","desiredPOVPosition","outPOVPosition","findPositionOnNavMesh","isEnabled","pathfinder","zone","loadMesh","mesh","Pathfinding","error","removeNavMeshData","geometry","applyMatrix4","matrixWorld","pos","navGroup","start","end","outPos","shouldRecomputeGroupAndNode","navNode","undefined","dispose","Factory","world","config","services","getFirstComponentByType","ServiceEntity","three","getService","input","playerService","frameLoop","rotation","setFromAxisAngle","PI","playerControls","NavMeshPlayer","declarePlayer","Initialize","addLoop","name","delta","Update","getType","askFlyMode","declareNavMesh","navMesh","teleportToLocation","getHeadPosition","targetCopy","Vector3","document","pointerLockElement","isLocked","event","movementX","movementY","angles","mouseSpeed","UpdateRotation","direction","accel","tempVec","multiplyScalar","acceleration","speed","clampLength","maxSpeed","frameDeccel","decceleration","camera","timeZeroToMax","pitch","yaw","jumpVelocity","yOffset","moveDir","xAxis","yAxis","velocity","setFromQuaternion","AddMouseMoveListner","OnMouseMove","addEventListener","OnPointerlockChange","AddClickListner","body","requestPointerLock","multiplyQuaternions","normalize","quaternion","forwardFactor","GetKeyDown","rightFactor","Deccelerate","Accelarate","moveVector","applyQuaternion","setX","setZ","positionOutTmp","findPOVPositionAboveNavMesh","positionOutTmp2"],"sourceRoot":""}