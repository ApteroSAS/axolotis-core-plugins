{"version":3,"file":"@aptero/axolotis-core-plugins/debug/PerformanceStats.c2ca73f0e18bdc9d3e1f.js","mappings":"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","sources":["webpack://axolotis-core-plugins/./src/lib/modules/debug/DebugBtn.ts","webpack://axolotis-core-plugins/./node_modules/three/examples/jsm/libs/stats.module.js","webpack://axolotis-core-plugins/./src/lib/modules/debug/PerformanceStats.ts","webpack://axolotis-core-plugins/./src/lib/modules/debug/rStats/rStats.extras.ts","webpack://axolotis-core-plugins/./src/lib/modules/debug/rStats/rStats.ts","webpack://axolotis-core-plugins/./src/lib/modules/three/ThreeAssetsLoader.ts","webpack://axolotis-core-plugins/./src/lib/modules/three/ThreeLib.ts"],"sourcesContent":["import Component from \"@aptero/axolotis-player/build/types/modules/core/ecs/Component\";\nimport { PerformanceStats } from \"@root/lib/modules/debug/PerformanceStats\";\nimport { WebpackLazyModule } from \"@root/lib/generated/webpack/WebpackLoader\";\nimport {LazyServices, WorldEntity} from \"@aptero/axolotis-player\";\nimport { FrameLoop } from \"@root/lib/modules/frame/FrameLoop\";\nimport {ComponentFactory} from \"@aptero/axolotis-player/build/types/modules/core/ecs/ComponentFactory\";\nimport {Services} from \"@aptero/axolotis-player\";\n\nexport class Factory implements WebpackLazyModule, ComponentFactory<DebugBtn> {\n\n  async createComponent(world: WorldEntity, params: any): Promise<DebugBtn> {\n    let services = world.getFirstComponentByType<Services>(\n        Services.name\n    );\n    let frameLoop = await services.getService<FrameLoop>(\n        \"@aptero/axolotis-core-plugins/frame/FrameLoop\"\n    );\n    return new DebugBtn(frameLoop, services);\n  }\n}\n\nexport class DebugBtn implements Component {\n  constructor(frameLoop: FrameLoop, Services: LazyServices) {\n    let html =\n      '<div id=\"debug-btn\" style=\"display: block;\\n' +\n      \"    font-family: monospace;\\n\" +\n      \"    cursor: pointer;\\n\" +\n      \"    position: absolute;\\n\" +\n      \"    bottom: 0;\\n\" +\n      \"    right: 2px;\\n\" +\n      \"    padding: 4px 8px;\\n\" +\n      \"    color: #fff;\\n\" +\n      \"    text-shadow: 1px 1px 1px rgba(0,0,0,.5);\\n\" +\n      \"    font-size: 10px;\\n\" +\n      \"    -moz-user-select: none;\\n\" +\n      \"    -webkit-user-select: none;\\n\" +\n      \"    -ms-user-select: none;\\n\" +\n      '    user-select: none\" >60 FPS</div>';\n    window.document.body.insertAdjacentHTML(\"beforeend\", html);\n    let elementById = window.document.getElementById(\"debug-btn\");\n    if (elementById) {\n      elementById.onclick = (evt) => {\n        evt.stopPropagation();\n        evt.preventDefault();\n      };\n      frameLoop.addLoop(DebugBtn.name, (delta) => {\n        (elementById as any).innerText =\n          Math.round((1.0 / delta) * 1000) + \" FPS\";\n      });\n    }\n  }\n\n  getType(): string {\n    return DebugBtn.name;\n  }\n}\n","var Stats = function () {\n\n\tvar mode = 0;\n\n\tvar container = document.createElement( 'div' );\n\tcontainer.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n\tcontainer.addEventListener( 'click', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tshowPanel( ++ mode % container.children.length );\n\n\t}, false );\n\n\t//\n\n\tfunction addPanel( panel ) {\n\n\t\tcontainer.appendChild( panel.dom );\n\t\treturn panel;\n\n\t}\n\n\tfunction showPanel( id ) {\n\n\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\n\n\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\n\n\t\t}\n\n\t\tmode = id;\n\n\t}\n\n\t//\n\n\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\n\n\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\n\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\n\n\tif ( self.performance && self.performance.memory ) {\n\n\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\n\n\t}\n\n\tshowPanel( 0 );\n\n\treturn {\n\n\t\tREVISION: 16,\n\n\t\tdom: container,\n\n\t\taddPanel: addPanel,\n\t\tshowPanel: showPanel,\n\n\t\tbegin: function () {\n\n\t\t\tbeginTime = ( performance || Date ).now();\n\n\t\t},\n\n\t\tend: function () {\n\n\t\t\tframes ++;\n\n\t\t\tvar time = ( performance || Date ).now();\n\n\t\t\tmsPanel.update( time - beginTime, 200 );\n\n\t\t\tif ( time >= prevTime + 1000 ) {\n\n\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\n\n\t\t\t\tprevTime = time;\n\t\t\t\tframes = 0;\n\n\t\t\t\tif ( memPanel ) {\n\n\t\t\t\t\tvar memory = performance.memory;\n\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn time;\n\n\t\t},\n\n\t\tupdate: function () {\n\n\t\t\tbeginTime = this.end();\n\n\t\t},\n\n\t\t// Backwards Compatibility\n\n\t\tdomElement: container,\n\t\tsetMode: showPanel\n\n\t};\n\n};\n\nStats.Panel = function ( name, fg, bg ) {\n\n\tvar min = Infinity, max = 0, round = Math.round;\n\tvar PR = round( window.devicePixelRatio || 1 );\n\n\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\n\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\n\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\n\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\n\n\tvar canvas = document.createElement( 'canvas' );\n\tcanvas.width = WIDTH;\n\tcanvas.height = HEIGHT;\n\tcanvas.style.cssText = 'width:80px;height:48px';\n\n\tvar context = canvas.getContext( '2d' );\n\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\n\tcontext.textBaseline = 'top';\n\n\tcontext.fillStyle = bg;\n\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\n\n\tcontext.fillStyle = fg;\n\tcontext.fillText( name, TEXT_X, TEXT_Y );\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\tcontext.fillStyle = bg;\n\tcontext.globalAlpha = 0.9;\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\treturn {\n\n\t\tdom: canvas,\n\n\t\tupdate: function ( value, maxValue ) {\n\n\t\t\tmin = Math.min( min, value );\n\t\t\tmax = Math.max( max, value );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 1;\n\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\n\t\t\tcontext.fillStyle = fg;\n\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\n\n\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 0.9;\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\n\n\t\t}\n\n\t};\n\n};\n\nexport default Stats;\n","import { Service } from \"@aptero/axolotis-player/build/types/modules/core/ecs/Service\";\n\nconst html =\n  \"<style>\\n\" +\n  \"    .alarm{\\n\" +\n  \"        color: #b70000;!important;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base h1{\\n\" +\n  \"        margin: 0;\\n\" +\n  \"        padding: 0;\\n\" +\n  \"        font-size: 1.4em;\\n\" +\n  \"        color: #fff;\\n\" +\n  \"        margin-bottom: 5px;\\n\" +\n  \"        cursor: pointer;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base div.rs-group{\\n\" +\n  \"        margin-bottom: 10px;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base div.rs-group.hidden{\\n\" +\n  \"        display: none;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base div.rs-fraction{\\n\" +\n  \"        position: relative;\\n\" +\n  \"        margin-bottom: 5px;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base div.rs-fraction p{\\n\" +\n  \"        width: 120px;\\n\" +\n  \"        text-align: right;\\n\" +\n  \"        margin: 0;\\n\" +\n  \"        padding: 0;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base div.rs-legend{\\n\" +\n  \"        position: absolute;\\n\" +\n  \"        line-height: 1em;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base div.rs-counter-base{\\n\" +\n  \"        position: relative;\\n\" +\n  \"        margin: 2px 0;\\n\" +\n  \"        height: 1em;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base span.rs-counter-id{\\n\" +\n  \"        color: white;\\n\" +\n  \"        position: absolute;\\n\" +\n  \"        left: 0;\\n\" +\n  \"        top: 0;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base div.rs-counter-value{\\n\" +\n  \"        color: white;\\n\" +\n  \"        position: absolute;\\n\" +\n  \"        left: 90px;\\n\" +\n  \"        width: 30px;\\n\" +\n  \"        height: 1em;\\n\" +\n  \"        top: 0;\\n\" +\n  \"        text-align: right;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base canvas.rs-canvas{\\n\" +\n  \"        position: absolute;\\n\" +\n  \"        right: 0;\\n\" +\n  \"    }\\n\" +\n  \"</style>\\n\" +\n  \"<style>\\n\" +\n  \"\\n\" +\n  \"    .rs-header {\\n\" +\n  \"        display: flex;\\n\" +\n  \"        justify-content: space-between;\\n\" +\n  \"        border-bottom: 1px rgba(255,255,255,0.1) solid;\\n\" +\n  \"        margin-bottom: 8px;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-collapse-btn {\\n\" +\n  \"        cursor: pointer;\\n\" +\n  \"        font-size: 12px;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-fps-counter {\\n\" +\n  \"        font-family: monospace;\\n\" +\n  \"        cursor: pointer;\\n\" +\n  \"        position: absolute;\\n\" +\n  \"        bottom: 96px;\\n\" +\n  \"        right: 2px;\\n\" +\n  \"        padding: 4px 8px;\\n\" +\n  \"        color: #ffffff;\\n\" +\n  \"        text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);\\n\" +\n  \"        font-size: 10px;\\n\" +\n  \"        -moz-user-select: none;\\n\" +\n  \"        -webkit-user-select: none;\\n\" +\n  \"        -ms-user-select: none;\\n\" +\n  \"        user-select: none;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base {\\n\" +\n  \"        right: 10px;\\n\" +\n  \"        left: auto;\\n\" +\n  \"        top: 10px;\\n\" +\n  \"        -moz-user-select: none;\\n\" +\n  \"        -webkit-user-select: none;\\n\" +\n  \"        -ms-user-select: none;\\n\" +\n  \"        user-select: none;\\n\" +\n  \"\\n\" +\n  \"        position: absolute;\\n\" +\n  \"        z-index: 10000;\\n\" +\n  \"        padding: 10px;\\n\" +\n  \"        background-color: #222;\\n\" +\n  \"        font-size: 10px;\\n\" +\n  \"        line-height: 1.2em;\\n\" +\n  \"        width: 350px;\\n\" +\n  \"        font-family: 'Roboto Condensed', tahoma, sans-serif;\\n\" +\n  \"        overflow: hidden;\\n\" +\n  \"    }\\n\" +\n  \"</style>\\n\";\n\nimport Component from \"@aptero/axolotis-player/build/types/modules/core/ecs/Component\";\nimport Stats from \"three/examples/jsm/libs/stats.module\";\nimport { FrameLoop } from \"@aptero/axolotis-player\";\nimport { ThreeLib } from \"@root/lib/modules/three/ThreeLib\";\nimport NavMeshPlayer from \"@root/lib/modules/controller/pathFindingPlayer/NavMeshPlayer\";\nimport { DebugBtn } from \"@root/lib/modules/debug/DebugBtn\";\nimport { WebpackLazyModule } from \"@root/lib/generated/webpack/WebpackLoader\";\nimport { LazyServices, Services } from \"@aptero/axolotis-player\";\nimport { WorldService } from \"@root/lib/modules/worlds/WorldService\";\n\nconst rStats = require(\"./rStats/rStats\");\nconst rStatsExtra = require(\"./rStats/rStats.extras\");\n\ndeclare const window: any;\n\nexport class Factory implements WebpackLazyModule, Service<PerformanceStats> {\n  async createService(services: LazyServices): Promise<PerformanceStats> {\n    let threeLib = await services.getService<ThreeLib>(\n      \"@aptero/axolotis-core-plugins/three/ThreeLib\"\n    );\n    let frameLoop = await services.getService<FrameLoop>(\n      \"@aptero/axolotis-core-plugins/frame/FrameLoop\"\n    );\n    let worldService = await services.getService<WorldService>(\n      \"@aptero/axolotis-core-plugins/worlds/WorldService\"\n    );\n    return new PerformanceStats(threeLib, frameLoop, worldService);\n  }\n}\n\nexport class PerformanceStats implements Component {\n  private rS: any;\n  constructor(\n    private threeLib: ThreeLib,\n    frameLoop: FrameLoop,\n    private worldService: WorldService\n  ) {\n    if (window.perfStatSingletonPresent) {\n      return; //Only one debug panel even if multiple world\n    }\n    window.perfStatSingletonPresent = true;\n    console.warn(\n      \"MB MBytes of allocated memory. (Run Chrome with --enable-precise-memory-info) to have precise perf info\"\n    );\n    const stats = Stats();\n    stats.showPanel(2);\n    document.body.appendChild(stats.dom);\n    this.updateRstats();\n    window.document.body.insertAdjacentHTML(\"beforeend\", html);\n    if (worldService.isActiveWorld()) {\n      const animate = (t) => {\n        //Avoir using frameloop for this so it does not appear on perf\n        requestAnimationFrame(animate);\n        stats.update();\n        this.rS().update();\n        this.rS(\"framerate\").end();\n        this.rS(\"framerate\").start();\n      };\n      requestAnimationFrame(animate);\n    }\n\n    worldService.addOnWorldAdded(() => {\n      this.updateWorldCallback();\n    }, true);\n  }\n\n  updateRstats() {\n    let elementsByClassName = document.body.getElementsByClassName(\"rs-base\");\n    if (elementsByClassName.length != 0) {\n      elementsByClassName[0].remove();\n    }\n    //https://spite.github.io/rstats/\n    const threeStats = new window.threeStats(this.threeLib.renderer);\n    //const glS = new window.glStats(); // init at any point\n    const plugins = [threeStats];\n    let config: any = {\n      css: [], // Our stylesheet is injected from AFrame.\n      values: {\n        framerate: { caption: \"Frame (ms)\", over: 19 }, //17 ms = 60fps\n      },\n      groups: [],\n      plugins: plugins,\n    };\n    for (let i = 0; i < this.worldService.getWorlds().length; i++) {\n      config.values[FrameLoop.name.toLowerCase() + \"-\" + i] = {\n        caption: FrameLoop.name + \" (ms)\",\n        over: 10,\n      };\n      config.values[ThreeLib.name.toLowerCase() + \"-\" + i] = {\n        caption: ThreeLib.name + \" (ms)\",\n      };\n      config.values[NavMeshPlayer.name.toLowerCase() + \"-\" + i] = {\n        caption: NavMeshPlayer.name + \" (ms)\",\n      };\n      config.values[DebugBtn.name.toLowerCase() + \"-\" + i] = {\n        caption: DebugBtn.name + \" (ms)\",\n      };\n      config.values[PerformanceStats.name.toLowerCase() + \"-\" + i] = {\n        caption: PerformanceStats.name + \" (ms)\",\n      };\n      //config.values[PortalsService.name.toLowerCase()+\"-\"+i] = { caption: PortalsService.name + \" (ms)\" };\n      config.groups.push({\n        caption: \"World - \" + i,\n        values: [\n          FrameLoop.name.toLowerCase() + \"-\" + i,\n          ThreeLib.name.toLowerCase() + \"-\" + i,\n          NavMeshPlayer.name.toLowerCase() + \"-\" + i,\n        ],\n        //PortalsService.name.toLowerCase()+\"-\"+i]\n      });\n    }\n    this.rS = new rStats(config);\n  }\n\n  updateWorldCallback() {\n    console.log(\"new world :\", this.worldService.getWorlds());\n    this.updateRstats();\n    this.worldService.getWorlds().forEach(async (world, index) => {\n      let services = world.getFirstComponentByType<Services>(Services.name);\n      let frameLoop = await services.getService<FrameLoop>(\n        \"@aptero/axolotis-core-plugins/frame/FrameLoop\"\n      );\n      frameLoop.setMonitoringCallback(\n        (name) => {\n          this.rS(name.toLowerCase() + \"-\" + index).start();\n        },\n        (name) => {\n          this.rS(name.toLowerCase() + \"-\" + index).end();\n        }\n      );\n    });\n  }\n\n  getType(): string {\n    return PerformanceStats.name;\n  }\n}\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\nwindow.glStats = function () {\n  var _rS = null;\n\n  var _totalDrawArraysCalls = 0,\n    _totalDrawElementsCalls = 0,\n    _totalUseProgramCalls = 0,\n    _totalFaces = 0,\n    _totalVertices = 0,\n    _totalPoints = 0,\n    _totalBindTexures = 0;\n\n  function _h(f, c) {\n    return function () {\n      c.apply(this, arguments);\n      f.apply(this, arguments);\n    };\n  }\n\n  WebGLRenderingContext.prototype.drawArrays = _h(\n    WebGLRenderingContext.prototype.drawArrays,\n    function () {\n      _totalDrawArraysCalls++;\n      if (arguments[0] == this.POINTS) _totalPoints += arguments[2];\n      else _totalVertices += arguments[2];\n    }\n  );\n\n  WebGLRenderingContext.prototype.drawElements = _h(\n    WebGLRenderingContext.prototype.drawElements,\n    function () {\n      _totalDrawElementsCalls++;\n      _totalFaces += arguments[1] / 3;\n      _totalVertices += arguments[1];\n    }\n  );\n\n  WebGLRenderingContext.prototype.useProgram = _h(\n    WebGLRenderingContext.prototype.useProgram,\n    function () {\n      _totalUseProgramCalls++;\n    }\n  );\n\n  WebGLRenderingContext.prototype.bindTexture = _h(\n    WebGLRenderingContext.prototype.bindTexture,\n    function () {\n      _totalBindTexures++;\n    }\n  );\n\n  var _values = {\n    allcalls: {\n      over: 3000,\n      caption: \"Calls (hook)\",\n    },\n    drawelements: {\n      caption: \"drawElements (hook)\",\n    },\n    drawarrays: {\n      caption: \"drawArrays (hook)\",\n    },\n  };\n\n  var _groups = [\n    {\n      caption: \"WebGL\",\n      values: [\n        \"allcalls\",\n        \"drawelements\",\n        \"drawarrays\",\n        \"useprogram\",\n        \"bindtexture\",\n        \"glfaces\",\n        \"glvertices\",\n        \"glpoints\",\n      ],\n    },\n  ];\n\n  var _fractions = [\n    {\n      base: \"allcalls\",\n      steps: [\"drawelements\", \"drawarrays\"],\n    },\n  ];\n\n  function _update() {\n    _rS(\"allcalls\").set(_totalDrawArraysCalls + _totalDrawElementsCalls);\n    _rS(\"drawElements\").set(_totalDrawElementsCalls);\n    _rS(\"drawArrays\").set(_totalDrawArraysCalls);\n    _rS(\"bindTexture\").set(_totalBindTexures);\n    _rS(\"useProgram\").set(_totalUseProgramCalls);\n    _rS(\"glfaces\").set(_totalFaces);\n    _rS(\"glvertices\").set(_totalVertices);\n    _rS(\"glpoints\").set(_totalPoints);\n  }\n\n  function _start() {\n    _totalDrawArraysCalls = 0;\n    _totalDrawElementsCalls = 0;\n    _totalUseProgramCalls = 0;\n    _totalFaces = 0;\n    _totalVertices = 0;\n    _totalPoints = 0;\n    _totalBindTexures = 0;\n  }\n\n  function _end() {}\n\n  function _attach(r) {\n    _rS = r;\n  }\n\n  return {\n    update: _update,\n    start: _start,\n    end: _end,\n    attach: _attach,\n    values: _values,\n    groups: _groups,\n    fractions: _fractions,\n  };\n};\n\nwindow.threeStats = function (renderer) {\n  var _rS = null;\n\n  var _values = {\n    \"renderer.info.memory.geometries\": {\n      caption: \"Geometries\",\n    },\n    \"renderer.info.memory.textures\": {\n      caption: \"Textures\",\n    },\n    \"renderer.info.programs\": {\n      caption: \"Programs\",\n    },\n    \"renderer.info.render.calls\": {\n      caption: \"Calls\",\n    },\n    \"renderer.info.render.triangles\": {\n      caption: \"Triangles\",\n      over: 300000,\n    },\n    \"renderer.info.render.points\": {\n      caption: \"Points\",\n    },\n  };\n\n  var _groups = [\n    {\n      caption: \"Three.js - Memory\",\n      values: [\n        \"renderer.info.memory.geometries\",\n        \"renderer.info.programs\",\n        \"renderer.info.memory.textures\",\n      ],\n    },\n    {\n      caption: \"Three.js - Render\",\n      values: [\n        \"renderer.info.render.calls\",\n        \"renderer.info.render.triangles\",\n        \"renderer.info.render.points\",\n      ],\n    },\n  ];\n\n  var _fractions = [];\n\n  function _update() {\n    _rS(\"renderer.info.memory.geometries\").set(renderer.info.memory.geometries);\n    _rS(\"renderer.info.programs\").set(renderer.info.programs.length);\n    _rS(\"renderer.info.memory.textures\").set(renderer.info.memory.textures);\n    _rS(\"renderer.info.render.calls\").set(renderer.info.render.calls);\n    _rS(\"renderer.info.render.triangles\").set(renderer.info.render.triangles);\n    _rS(\"renderer.info.render.points\").set(renderer.info.render.points);\n  }\n\n  function _start() {}\n\n  function _end() {}\n\n  function _attach(r) {\n    _rS = r;\n  }\n\n  return {\n    update: _update,\n    start: _start,\n    end: _end,\n    attach: _attach,\n    values: _values,\n    groups: _groups,\n    fractions: _fractions,\n  };\n};\n\n/*\n *   From https://github.com/paulirish/memory-stats.js\n */\n\nwindow.BrowserStats = function () {\n  var _rS = null;\n\n  var _usedJSHeapSize = 0,\n    _totalJSHeapSize = 0;\n\n  if (window.performance && !performance.memory) {\n    performance.memory = {\n      usedJSHeapSize: 0,\n      totalJSHeapSize: 0,\n    };\n  }\n\n  if (performance.memory.totalJSHeapSize === 0) {\n    console.warn(\n      \"totalJSHeapSize === 0... performance.memory is only available in Chrome .\"\n    );\n  }\n\n  var _values = {\n    memory: {\n      caption: \"Used Memory\",\n      average: true,\n      avgMs: 1000,\n      over: 22,\n    },\n    total: {\n      caption: \"Total Memory\",\n    },\n  };\n\n  var _groups = [\n    {\n      caption: \"Browser\",\n      values: [\"memory\", \"total\"],\n    },\n  ];\n\n  var _fractions = [\n    {\n      base: \"total\",\n      steps: [\"memory\"],\n    },\n  ];\n\n  var log1024 = Math.log(1024);\n\n  function _size(v) {\n    var precision = 100; //Math.pow(10, 2);\n    var i = Math.floor(Math.log(v) / log1024);\n    return Math.round((v * precision) / Math.pow(1024, i)) / precision; // + ' ' + sizes[i];\n  }\n\n  function _update() {\n    _usedJSHeapSize = _size(performance.memory.usedJSHeapSize);\n    _totalJSHeapSize = _size(performance.memory.totalJSHeapSize);\n\n    _rS(\"memory\").set(_usedJSHeapSize);\n    _rS(\"total\").set(_totalJSHeapSize);\n  }\n\n  function _start() {\n    _usedJSHeapSize = 0;\n  }\n\n  function _end() {}\n\n  function _attach(r) {\n    _rS = r;\n  }\n\n  return {\n    update: _update,\n    start: _start,\n    end: _end,\n    attach: _attach,\n    values: _values,\n    groups: _groups,\n    fractions: _fractions,\n  };\n};\n\nif (typeof module === \"object\") {\n  module.exports = {\n    glStats: window.glStats,\n    threeStats: window.threeStats,\n    BrowserStats: window.BrowserStats,\n  };\n}\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\n// performance.now() polyfill from https://gist.github.com/paulirish/5438650\n\"use strict\";\n\n(function () {\n  if (\"performance\" in window == false) {\n    window.performance = {};\n  }\n\n  var performance = window.performance;\n\n  if (\"now\" in performance == false) {\n    var nowOffset = Date.now();\n\n    if (performance.timing && performance.timing.navigationStart) {\n      nowOffset = performance.timing.navigationStart;\n    }\n\n    performance.now = function now() {\n      return Date.now() - nowOffset;\n    };\n  }\n\n  if (!performance.mark) {\n    performance.mark = function () {};\n  }\n\n  if (!performance.measure) {\n    performance.measure = function () {};\n  }\n})();\n\nwindow.rStats = function rStats(settings) {\n  function iterateKeys(array, callback) {\n    var keys = Object.keys(array);\n    for (var j = 0, l = keys.length; j < l; j++) {\n      callback(keys[j]);\n    }\n  }\n\n  function importCSS(url) {\n    var element = document.createElement(\"link\");\n    element.href = url;\n    element.rel = \"stylesheet\";\n    element.type = \"text/css\";\n    document.getElementsByTagName(\"head\")[0].appendChild(element);\n  }\n\n  var _settings = settings || {};\n  var _colours = _settings.colours || [\n    \"#850700\",\n    \"#c74900\",\n    \"#fcb300\",\n    \"#284280\",\n    \"#4c7c0c\",\n  ];\n\n  var _cssFont =\n    \"https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300\";\n  var _cssRStats = (_settings.CSSPath ? _settings.CSSPath : \"\") + \"rStats.css\";\n\n  var _css = _settings.css || [_cssFont, _cssRStats];\n  _css.forEach(function (uri) {\n    importCSS(uri);\n  });\n\n  if (!_settings.values) _settings.values = {};\n\n  var _base,\n    _div,\n    _elHeight = 10,\n    _elWidth = 200;\n  var _perfCounters = {};\n\n  function Graph(_dom, _id, _defArg) {\n    var _def = _defArg || {};\n    var _canvas = document.createElement(\"canvas\"),\n      _ctx = _canvas.getContext(\"2d\"),\n      _max = 0,\n      _current = 0;\n\n    var c = _def.color ? _def.color : \"#666666\";\n\n    var _dotCanvas = document.createElement(\"canvas\"),\n      _dotCtx = _dotCanvas.getContext(\"2d\");\n    _dotCanvas.width = 1;\n    _dotCanvas.height = 2 * _elHeight;\n    _dotCtx.fillStyle = \"#444444\";\n    _dotCtx.fillRect(0, 0, 1, 2 * _elHeight);\n    _dotCtx.fillStyle = c;\n    _dotCtx.fillRect(0, _elHeight, 1, _elHeight);\n    _dotCtx.fillStyle = \"#ffffff\";\n    _dotCtx.globalAlpha = 0.5;\n    _dotCtx.fillRect(0, _elHeight, 1, 1);\n    _dotCtx.globalAlpha = 1;\n\n    var _alarmCanvas = document.createElement(\"canvas\"),\n      _alarmCtx = _alarmCanvas.getContext(\"2d\");\n    _alarmCanvas.width = 1;\n    _alarmCanvas.height = 2 * _elHeight;\n    _alarmCtx.fillStyle = \"#444444\";\n    _alarmCtx.fillRect(0, 0, 1, 2 * _elHeight);\n    _alarmCtx.fillStyle = \"#b70000\";\n    _alarmCtx.fillRect(0, _elHeight, 1, _elHeight);\n    _alarmCtx.globalAlpha = 0.5;\n    _alarmCtx.fillStyle = \"#ffffff\";\n    _alarmCtx.fillRect(0, _elHeight, 1, 1);\n    _alarmCtx.globalAlpha = 1;\n\n    function _init() {\n      _canvas.width = _elWidth;\n      _canvas.height = _elHeight;\n      _canvas.style.width = _canvas.width + \"px\";\n      _canvas.style.height = _canvas.height + \"px\";\n      _canvas.className = \"rs-canvas\";\n      _dom.appendChild(_canvas);\n\n      _ctx.fillStyle = \"#444444\";\n      _ctx.fillRect(0, 0, _canvas.width, _canvas.height);\n    }\n\n    function _draw(v, alarm) {\n      _current += (v - _current) * 0.1;\n      _max *= 0.99;\n      if (_current > _max) _max = _current;\n      _ctx.drawImage(\n        _canvas,\n        1,\n        0,\n        _canvas.width - 1,\n        _canvas.height,\n        0,\n        0,\n        _canvas.width - 1,\n        _canvas.height\n      );\n      if (alarm) {\n        _ctx.drawImage(\n          _alarmCanvas,\n          _canvas.width - 1,\n          _canvas.height - (_current * _canvas.height) / _max - _elHeight\n        );\n      } else {\n        _ctx.drawImage(\n          _dotCanvas,\n          _canvas.width - 1,\n          _canvas.height - (_current * _canvas.height) / _max - _elHeight\n        );\n      }\n    }\n\n    _init();\n\n    return {\n      draw: _draw,\n    };\n  }\n\n  function StackGraph(_dom, _num) {\n    var _canvas = document.createElement(\"canvas\"),\n      _ctx = _canvas.getContext(\"2d\");\n\n    function _init() {\n      _canvas.width = _elWidth;\n      _canvas.height = _elHeight * _num;\n      _canvas.style.width = _canvas.width + \"px\";\n      _canvas.style.height = _canvas.height + \"px\";\n      _canvas.className = \"rs-canvas\";\n      _dom.appendChild(_canvas);\n\n      _ctx.fillStyle = \"#444444\";\n      _ctx.fillRect(0, 0, _canvas.width, _canvas.height);\n    }\n\n    function _draw(v) {\n      _ctx.drawImage(\n        _canvas,\n        1,\n        0,\n        _canvas.width - 1,\n        _canvas.height,\n        0,\n        0,\n        _canvas.width - 1,\n        _canvas.height\n      );\n      var th = 0;\n      iterateKeys(v, function (j) {\n        var h = v[j] * _canvas.height;\n        _ctx.fillStyle = _colours[j];\n        _ctx.fillRect(_canvas.width - 1, th, 1, h);\n        th += h;\n      });\n    }\n\n    _init();\n\n    return {\n      draw: _draw,\n    };\n  }\n\n  function PerfCounter(id, group) {\n    var _id = id,\n      _time,\n      _value = 0,\n      _total = 0,\n      _averageValue = 0,\n      _accumValue = 0,\n      _accumStart = performance.now(),\n      _accumSamples = 0,\n      _dom = document.createElement(\"div\"),\n      _spanId = document.createElement(\"span\"),\n      _spanValue = document.createElement(\"div\"),\n      _spanValueText = document.createTextNode(\"\"),\n      _def = _settings ? _settings.values[_id.toLowerCase()] : null,\n      _graph = new Graph(_dom, _id, _def),\n      _started = false;\n\n    _spanId.className = \"rs-counter-id\";\n    _spanId.textContent = _def && _def.caption ? _def.caption : _id;\n\n    _spanValue.className = \"rs-counter-value\";\n    _spanValue.appendChild(_spanValueText);\n\n    _dom.appendChild(_spanId);\n    _dom.appendChild(_spanValue);\n    if (group) group.div.appendChild(_dom);\n    else _div.appendChild(_dom);\n\n    _time = performance.now();\n\n    function _average(v) {\n      if (_def && _def.average) {\n        _accumValue += v;\n        _accumSamples++;\n        var t = performance.now();\n        if (t - _accumStart >= (_def.avgMs || 1000)) {\n          _averageValue = _accumValue / _accumSamples;\n          _accumValue = 0;\n          _accumStart = t;\n          _accumSamples = 0;\n        }\n      }\n    }\n\n    function _start() {\n      _time = performance.now();\n      if (_settings.userTimingAPI) performance.mark(_id + \"-start\");\n      _started = true;\n    }\n\n    function _end() {\n      _value = performance.now() - _time;\n      if (_settings.userTimingAPI) {\n        performance.mark(_id + \"-end\");\n        if (_started) {\n          performance.measure(_id, _id + \"-start\", _id + \"-end\");\n        }\n      }\n      _average(_value);\n    }\n\n    function _tick() {\n      _end();\n      _start();\n    }\n\n    function _draw() {\n      var v = _def && _def.average ? _averageValue : _value;\n      _spanValueText.nodeValue = Math.round(v * 100) / 100;\n      var a =\n        _def &&\n        ((_def.below && _value < _def.below) ||\n          (_def.over && _value > _def.over));\n      _graph.draw(_value, a);\n      _dom.className = a ? \"rs-counter-base alarm\" : \"rs-counter-base\";\n    }\n\n    function _frame() {\n      var t = performance.now();\n      var e = t - _time;\n      _total++;\n      if (e > 1000) {\n        if (_def && _def.interpolate === false) {\n          _value = _total;\n        } else {\n          _value = (_total * 1000) / e;\n        }\n        _total = 0;\n        _time = t;\n        _average(_value);\n      }\n    }\n\n    function _set(v) {\n      _value = v;\n      _average(_value);\n    }\n\n    return {\n      set: _set,\n      start: _start,\n      tick: _tick,\n      end: _end,\n      frame: _frame,\n      value: function () {\n        return _value;\n      },\n      draw: _draw,\n    };\n  }\n\n  function sample() {\n    var _value = 0;\n\n    function _set(v) {\n      _value = v;\n    }\n\n    return {\n      set: _set,\n      value: function () {\n        return _value;\n      },\n    };\n  }\n\n  function _perf(idArg) {\n    var id = idArg.toLowerCase();\n    if (id === undefined) id = \"default\";\n    if (_perfCounters[id]) return _perfCounters[id];\n\n    var group = null;\n    if (_settings && _settings.groups) {\n      iterateKeys(_settings.groups, function (j) {\n        var g = _settings.groups[parseInt(j, 10)];\n        if (!group && g.values.indexOf(id.toLowerCase()) !== -1) {\n          group = g;\n        }\n      });\n    }\n\n    var p = new PerfCounter(id, group);\n    _perfCounters[id] = p;\n    return p;\n  }\n\n  function _init() {\n    if (_settings.plugins) {\n      if (!_settings.values) _settings.values = {};\n      if (!_settings.groups) _settings.groups = [];\n      if (!_settings.fractions) _settings.fractions = [];\n      for (var j = 0; j < _settings.plugins.length; j++) {\n        _settings.plugins[j].attach(_perf);\n        iterateKeys(_settings.plugins[j].values, function (k) {\n          _settings.values[k] = _settings.plugins[j].values[k];\n        });\n        _settings.groups = _settings.groups.concat(_settings.plugins[j].groups);\n        _settings.fractions = _settings.fractions.concat(\n          _settings.plugins[j].fractions\n        );\n      }\n    } else {\n      _settings.plugins = {};\n    }\n\n    _base = document.createElement(\"div\");\n    _base.className = \"rs-base\";\n    _div = document.createElement(\"div\");\n    _div.className = \"rs-container\";\n    _div.style.height = \"auto\";\n    _base.appendChild(_div);\n    document.body.appendChild(_base);\n\n    if (!_settings) return;\n\n    if (_settings.groups) {\n      iterateKeys(_settings.groups, function (j) {\n        var g = _settings.groups[parseInt(j, 10)];\n        var div = document.createElement(\"div\");\n        div.className = \"rs-group\";\n        g.div = div;\n        var h1 = document.createElement(\"h1\");\n        h1.textContent = g.caption;\n        h1.addEventListener(\n          \"click\",\n          function (e) {\n            this.classList.toggle(\"hidden\");\n            e.preventDefault();\n          }.bind(div)\n        );\n        _div.appendChild(h1);\n        _div.appendChild(div);\n      });\n    }\n\n    if (_settings.fractions) {\n      iterateKeys(_settings.fractions, function (j) {\n        var f = _settings.fractions[parseInt(j, 10)];\n        var div = document.createElement(\"div\");\n        div.className = \"rs-fraction\";\n        var legend = document.createElement(\"div\");\n        legend.className = \"rs-legend\";\n\n        var h = 0;\n        iterateKeys(_settings.fractions[j].steps, function (k) {\n          var p = document.createElement(\"p\");\n          p.textContent = _settings.fractions[j].steps[k];\n          p.style.color = _colours[h];\n          legend.appendChild(p);\n          h++;\n        });\n        div.appendChild(legend);\n        div.style.height = h * _elHeight + \"px\";\n        f.div = div;\n        var graph = new StackGraph(div, h);\n        f.graph = graph;\n        _div.appendChild(div);\n      });\n    }\n  }\n\n  function _update() {\n    iterateKeys(_settings.plugins, function (j) {\n      _settings.plugins[j].update();\n    });\n\n    iterateKeys(_perfCounters, function (j) {\n      _perfCounters[j].draw();\n    });\n\n    if (_settings && _settings.fractions) {\n      iterateKeys(_settings.fractions, function (j) {\n        var f = _settings.fractions[parseInt(j, 10)];\n        var v = [];\n        var base = _perfCounters[f.base.toLowerCase()];\n        if (base) {\n          base = base.value();\n          iterateKeys(_settings.fractions[j].steps, function (k) {\n            var s = _settings.fractions[j].steps[parseInt(k, 10)].toLowerCase();\n            var val = _perfCounters[s];\n            if (val) {\n              v.push(val.value() / base);\n            }\n          });\n        }\n        f.graph.draw(v);\n      });\n    }\n\n    /*if( _height != _div.clientHeight ) {\n            _height = _div.clientHeight;\n            _base.style.height = _height + 2 * _elHeight + 'px';\n        console.log( _base.clientHeight );\n        }*/\n  }\n\n  _init();\n\n  return function (id) {\n    if (id) return _perf(id);\n    return {\n      element: _base,\n      update: _update,\n    };\n  };\n};\n\nif (typeof module === \"object\") {\n  module.exports = window.rStats;\n}\n","export class AssetsLoader {\n  loaderCache = {};\n  assets = {};\n\n  async getLoader(loaderName: string, loaderLoader: () => void) {\n    if (!this.loaderCache[loaderName]) {\n      this.loaderCache[loaderName] = await loaderLoader();\n    }\n    return this.loaderCache[loaderName];\n  }\n}\n\nexport const assetsLoader: AssetsLoader = new AssetsLoader();\n","import { assetsLoader } from \"@root/lib/modules/three/ThreeAssetsLoader\";\nimport Component from \"@aptero/axolotis-player/build/types/modules/core/ecs/Component\";\nimport { PerspectiveCamera, Scene, WebGLRenderer } from \"three\";\nimport { FrameLoop } from \"@root/lib/modules/frame/FrameLoop\";\n//import { WorldService } from \"@root/lib/modules/worlds/WorldService\";\nimport { WebpackLazyModule } from \"@root/lib/generated/webpack/WebpackLoader\";\nimport { Service } from \"@aptero/axolotis-player/build/types/modules/core/ecs/Service\";\nimport { LazyServices } from \"@aptero/axolotis-player/build/types\";\n\ndeclare let window: any;\n\nexport async function asyncLoadThree() {\n  //this async import has the only usage of renamin any import to three (using webpack chunk)\n  const THREE: any = await import(\n    /*  webpackPrefetch: 0,  webpackMode: 'lazy',  webpackChunkName: \"@aptero/axolotis-core-plugins/three\"  */\n    \"three\"\n  );\n  return THREE;\n}\n\nexport async function getGlobalRenderer() {\n  if (!window.axolotis?.renderer) {\n    const THREE = await asyncLoadThree();\n    let renderer = new THREE.WebGLRenderer({ antialias: true });\n    renderer.setSize(window.innerWidth, window.innerHeight);\n\n    renderer.toneMapping = THREE.ACESFilmicToneMapping;\n    renderer.toneMappingExposure = 1;\n    renderer.outputEncoding = THREE.sRGBEncoding;\n    renderer.setPixelRatio(window.devicePixelRatio);\n\n    document.body.appendChild(renderer.domElement);\n    if (!window.axolotis) {\n      window.axolotis = {};\n    }\n    window.axolotis.renderer = renderer;\n  }\n  return window.axolotis.renderer;\n}\n\nexport class ThreeLib implements Component {\n  renderer: WebGLRenderer;\n  scene: Scene;\n  camera: PerspectiveCamera;\n  preRenderPass: (() => void)[] = [];\n\n  constructor(\n    private frameLoop: FrameLoop,\n    //private worldService: WorldService,\n    private THREE\n  ) {}\n\n  async init() {\n    this.scene = new this.THREE.Scene();\n\n    this.renderer = await getGlobalRenderer();\n\n    this.camera = new this.THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.001,\n      100000\n    );\n    this.camera.position.z = 2;\n\n    const render = () => {\n      for (const prerender of this.preRenderPass) {\n        prerender();\n      }\n      // FINAL PASS\n      this.renderer.render(this.scene, this.camera);\n      // set things back to normal\n      this.renderer.autoClear = true;\n    };\n\n    const onWindowResize = () => {\n      this.camera.aspect = window.innerWidth / window.innerHeight;\n      this.camera.updateProjectionMatrix();\n      this.renderer.setSize(window.innerWidth, window.innerHeight);\n      render();\n    };\n\n    /*\n    this.worldService.addOnWorldChangeCallback(() => {\n      window.removeEventListener(\"resize\", onWindowResize);\n      this.frameLoop.removeLoop(ThreeLib.name);\n      if (this.worldService.isActiveWorld()) {\n        window.addEventListener(\"resize\", onWindowResize, false);\n        this.frameLoop.addLoop(ThreeLib.name, render);\n      }\n    }, true);\n    */\n    //setup three loop\n    window.addEventListener(\"resize\", onWindowResize, false);\n    this.frameLoop.addLoop(ThreeLib.name, render);\n  }\n\n  async loadAssets(path: string) {\n    if (assetsLoader.assets[path]) {\n      return assetsLoader.assets[path];\n    }\n    /*\n    TODO createa a early start download of assets so that the GLB start downloading early in the waterfall\n    Not as simple as it seems may be doable using service worker\n    fetch(path);//start download of assets\n    var oReq = new XMLHttpRequest();\n    oReq.addEventListener(\"load\", ()=>{});\n    oReq.open(\"GET\", path);\n    oReq.send();\n    */\n    if (path.endsWith(\".glb\")) {\n      const loader = await assetsLoader.getLoader(\"GLTFLoader\", async () => {\n        const module: any = await import(\n          /*  webpackPrefetch: 0,  webpackMode: 'lazy',  webpackChunkName: \"@aptero/axolotis-core-plugins/three/examples/jsm/loaders/GLTFLoader\"  */\n          \"three/examples/jsm/loaders/GLTFLoader\"\n        );\n        const gltfLoader = new module.GLTFLoader();\n        //const gltfLoader = new GLTFLoader(new this.THREE.LoadingManager());\n        return gltfLoader;\n      });\n      const result = await loader.loadAsync(path);\n      assetsLoader.assets[path] = result;\n    }\n    if (path.endsWith(\".jpg\")) {\n      const loader = await assetsLoader.getLoader(\"TextureLoader\", async () => {\n        const texLoader = new this.THREE.TextureLoader();\n        return texLoader;\n      });\n      const result = await loader.loadAsync(path);\n      assetsLoader.assets[path] = result;\n    }\n    return assetsLoader.assets[path];\n  }\n\n  getType(): string {\n    return ThreeLib.name;\n  }\n}\n\nexport class Factory implements WebpackLazyModule, Service<ThreeLib> {\n  constructor() {}\n\n  async createService(services: LazyServices): Promise<ThreeLib> {\n    let frameLoop = await services.getService<FrameLoop>(\n      \"@aptero/axolotis-core-plugins/frame/FrameLoop\"\n    );\n    /*let worldService = await services.getService<WorldService>(\n      \"@aptero/axolotis-core-plugins/worlds/WorldService\"\n    );*/\n    const threeLib = new ThreeLib(\n      frameLoop,\n      //worldService,\n      await asyncLoadThree()\n    );\n    await threeLib.init();\n    return threeLib;\n  }\n}\n"],"names":["Factory","world","params","services","getFirstComponentByType","Services","frameLoop","getService","DebugBtn","constructor","window","document","body","insertAdjacentHTML","elementById","getElementById","onclick","evt","stopPropagation","preventDefault","addLoop","name","delta","innerText","Math","round","getType","Stats","mode","container","createElement","addPanel","panel","appendChild","dom","showPanel","id","i","children","length","style","display","cssText","addEventListener","event","beginTime","performance","Date","now","prevTime","frames","fpsPanel","Panel","msPanel","self","memory","memPanel","REVISION","begin","end","time","update","usedJSHeapSize","jsHeapSizeLimit","this","domElement","setMode","fg","bg","min","Infinity","max","PR","devicePixelRatio","WIDTH","HEIGHT","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","canvas","width","height","context","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","value","maxValue","drawImage","rStats","require","threeLib","worldService","PerformanceStats","perfStatSingletonPresent","console","warn","stats","updateRstats","isActiveWorld","animate","t","requestAnimationFrame","rS","start","addOnWorldAdded","updateWorldCallback","elementsByClassName","getElementsByClassName","remove","config","css","values","framerate","caption","over","groups","plugins","threeStats","renderer","getWorlds","FrameLoop","ThreeLib","NavMeshPlayer","toLowerCase","push","log","forEach","async","index","setMonitoringCallback","glStats","_rS","_totalDrawArraysCalls","_totalDrawElementsCalls","_totalUseProgramCalls","_totalFaces","_totalVertices","_totalPoints","_totalBindTexures","_h","f","c","apply","arguments","WebGLRenderingContext","prototype","drawArrays","POINTS","drawElements","useProgram","bindTexture","set","attach","r","allcalls","drawelements","drawarrays","fractions","base","steps","info","geometries","programs","textures","render","calls","triangles","points","BrowserStats","_usedJSHeapSize","_totalJSHeapSize","totalJSHeapSize","log1024","_size","v","floor","pow","average","avgMs","total","module","exports","nowOffset","timing","navigationStart","mark","measure","settings","iterateKeys","array","callback","keys","Object","j","l","_settings","_colours","colours","_cssRStats","CSSPath","uri","url","element","href","rel","type","getElementsByTagName","_base","_div","_elHeight","_perfCounters","Graph","_dom","_id","_defArg","_def","_canvas","_ctx","_max","_current","color","_dotCanvas","_dotCtx","_alarmCanvas","_alarmCtx","className","draw","alarm","StackGraph","_num","th","h","PerfCounter","group","_time","_value","_total","_averageValue","_accumValue","_accumStart","_accumSamples","_spanId","_spanValue","_spanValueText","createTextNode","_graph","_started","_average","_start","userTimingAPI","_end","textContent","div","tick","frame","e","interpolate","nodeValue","a","below","_perf","idArg","undefined","g","parseInt","indexOf","p","_update","k","s","val","graph","concat","h1","classList","toggle","bind","legend","_init","assetsLoader","loaderName","loaderLoader","loaderCache","asyncLoadThree","getGlobalRenderer","axolotis","THREE","WebGLRenderer","antialias","setSize","innerWidth","innerHeight","toneMapping","ACESFilmicToneMapping","toneMappingExposure","outputEncoding","sRGBEncoding","setPixelRatio","scene","Scene","camera","PerspectiveCamera","position","z","prerender","preRenderPass","autoClear","aspect","updateProjectionMatrix","path","assets","endsWith","loader","getLoader","GLTFLoader","result","loadAsync","TextureLoader","init"],"sourceRoot":""}