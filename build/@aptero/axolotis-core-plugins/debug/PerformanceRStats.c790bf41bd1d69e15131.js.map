{"version":3,"file":"@aptero/axolotis-core-plugins/debug/PerformanceRStats.c790bf41bd1d69e15131.js","mappings":"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","sources":["webpack://axolotis-core-plugins/./src/lib/modules/debug/DebugBtn.ts","webpack://axolotis-core-plugins/./src/lib/modules/debug/PerformanceRStats.ts","webpack://axolotis-core-plugins/./src/lib/modules/debug/rStats/rStats.extras.ts","webpack://axolotis-core-plugins/./src/lib/modules/debug/rStats/rStats.ts","webpack://axolotis-core-plugins/./src/lib/modules/three/ThreeAssetsLoader.ts","webpack://axolotis-core-plugins/./src/lib/modules/three/ThreeLib.ts","webpack://axolotis-core-plugins/./node_modules/three/examples/jsm/libs/stats.module.js"],"sourcesContent":["import Component from \"@aptero/axolotis-player/build/types/modules/core/ecs/Component\";\nimport { PerformanceStats } from \"@root/lib/modules/debug/PerformanceStats\";\nimport { WebpackLazyModule } from \"@root/lib/generated/webpack/WebpackLoader\";\nimport { LazyServices, WorldEntity } from \"@aptero/axolotis-player\";\nimport { FrameLoop } from \"@root/lib/modules/frame/FrameLoop\";\nimport { ComponentFactory } from \"@aptero/axolotis-player/build/types/modules/core/ecs/ComponentFactory\";\nimport { Services } from \"@aptero/axolotis-player\";\n\nexport class Factory implements WebpackLazyModule, ComponentFactory<DebugBtn> {\n  async createComponent(world: WorldEntity, params: any): Promise<DebugBtn> {\n    let services = world.getFirstComponentByType<Services>(Services.name);\n    let frameLoop = await services.getService<FrameLoop>(\n      \"@aptero/axolotis-core-plugins/frame/FrameLoop\"\n    );\n    return new DebugBtn(frameLoop, services);\n  }\n}\n\nexport class DebugBtn implements Component {\n  constructor(frameLoop: FrameLoop, services: LazyServices) {\n    let html =\n      '<div id=\"debug-btn\" style=\"display: block;\\n' +\n      \"    font-family: monospace;\\n\" +\n      \"    cursor: pointer;\\n\" +\n      \"    position: absolute;\\n\" +\n      \"    bottom: 0;\\n\" +\n      \"    right: 2px;\\n\" +\n      \"    padding: 4px 8px;\\n\" +\n      \"    color: #fff;\\n\" +\n      \"    text-shadow: 1px 1px 1px rgba(0,0,0,.5);\\n\" +\n      \"    font-size: 10px;\\n\" +\n      \"    -moz-user-select: none;\\n\" +\n      \"    -webkit-user-select: none;\\n\" +\n      \"    -ms-user-select: none;\\n\" +\n      '    user-select: none\" >60 FPS</div>';\n    window.document.body.insertAdjacentHTML(\"beforeend\", html);\n    let elementById = window.document.getElementById(\"debug-btn\");\n    if (elementById) {\n      elementById.onclick = (evt) => {\n        evt.stopPropagation();\n        evt.preventDefault();\n        services.getService<PerformanceStats>(\n          \"@aptero/axolotis-core-plugins/debug/PerformanceStats\"\n        );\n      };\n      frameLoop.addLoop(DebugBtn.name, (delta) => {\n        (elementById as any).innerText =\n          Math.round((1.0 / delta) * 1000) + \" FPS\";\n      });\n      if (window.location.host.startsWith(\"localhost\")) {\n        services.getService<PerformanceStats>(\n          \"@aptero/axolotis-core-plugins/debug/PerformanceStats\"\n        );\n      }\n    }\n  }\n\n  getType(): string {\n    return DebugBtn.name;\n  }\n}\n","import { Service } from \"@aptero/axolotis-player/build/types/modules/core/ecs/Service\";\n\nconst html =\n  \"<style>\\n\" +\n  \"    .alarm{\\n\" +\n  \"        color: #b70000;!important;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base h1{\\n\" +\n  \"        margin: 0;\\n\" +\n  \"        padding: 0;\\n\" +\n  \"        font-size: 1.4em;\\n\" +\n  \"        color: #fff;\\n\" +\n  \"        margin-bottom: 5px;\\n\" +\n  \"        cursor: pointer;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base div.rs-group{\\n\" +\n  \"        margin-bottom: 10px;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base div.rs-group.hidden{\\n\" +\n  \"        display: none;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base div.rs-fraction{\\n\" +\n  \"        position: relative;\\n\" +\n  \"        margin-bottom: 5px;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base div.rs-fraction p{\\n\" +\n  \"        width: 120px;\\n\" +\n  \"        text-align: right;\\n\" +\n  \"        margin: 0;\\n\" +\n  \"        padding: 0;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base div.rs-legend{\\n\" +\n  \"        position: absolute;\\n\" +\n  \"        line-height: 1em;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base div.rs-counter-base{\\n\" +\n  \"        position: relative;\\n\" +\n  \"        margin: 2px 0;\\n\" +\n  \"        height: 1em;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base span.rs-counter-id{\\n\" +\n  \"        color: white;\\n\" +\n  \"        position: absolute;\\n\" +\n  \"        left: 0;\\n\" +\n  \"        top: 0;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base div.rs-counter-value{\\n\" +\n  \"        color: white;\\n\" +\n  \"        position: absolute;\\n\" +\n  \"        left: 90px;\\n\" +\n  \"        width: 30px;\\n\" +\n  \"        height: 1em;\\n\" +\n  \"        top: 0;\\n\" +\n  \"        text-align: right;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base canvas.rs-canvas{\\n\" +\n  \"        position: absolute;\\n\" +\n  \"        right: 0;\\n\" +\n  \"    }\\n\" +\n  \"</style>\\n\" +\n  \"<style>\\n\" +\n  \"\\n\" +\n  \"    .rs-header {\\n\" +\n  \"        display: flex;\\n\" +\n  \"        justify-content: space-between;\\n\" +\n  \"        border-bottom: 1px rgba(255,255,255,0.1) solid;\\n\" +\n  \"        margin-bottom: 8px;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-collapse-btn {\\n\" +\n  \"        cursor: pointer;\\n\" +\n  \"        font-size: 12px;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-fps-counter {\\n\" +\n  \"        font-family: monospace;\\n\" +\n  \"        cursor: pointer;\\n\" +\n  \"        position: absolute;\\n\" +\n  \"        bottom: 96px;\\n\" +\n  \"        right: 2px;\\n\" +\n  \"        padding: 4px 8px;\\n\" +\n  \"        color: #ffffff;\\n\" +\n  \"        text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);\\n\" +\n  \"        font-size: 10px;\\n\" +\n  \"        -moz-user-select: none;\\n\" +\n  \"        -webkit-user-select: none;\\n\" +\n  \"        -ms-user-select: none;\\n\" +\n  \"        user-select: none;\\n\" +\n  \"    }\\n\" +\n  \"\\n\" +\n  \"    .rs-base {\\n\" +\n  \"        right: 10px;\\n\" +\n  \"        left: auto;\\n\" +\n  \"        top: 10px;\\n\" +\n  \"        -moz-user-select: none;\\n\" +\n  \"        -webkit-user-select: none;\\n\" +\n  \"        -ms-user-select: none;\\n\" +\n  \"        user-select: none;\\n\" +\n  \"\\n\" +\n  \"        position: absolute;\\n\" +\n  \"        z-index: 10000;\\n\" +\n  \"        padding: 10px;\\n\" +\n  \"        background-color: #222;\\n\" +\n  \"        font-size: 10px;\\n\" +\n  \"        line-height: 1.2em;\\n\" +\n  \"        width: 350px;\\n\" +\n  \"        font-family: 'Roboto Condensed', tahoma, sans-serif;\\n\" +\n  \"        overflow: hidden;\\n\" +\n  \"    }\\n\" +\n  \"</style>\\n\";\n\nimport Component from \"@aptero/axolotis-player/build/types/modules/core/ecs/Component\";\nimport Stats from \"three/examples/jsm/libs/stats.module\";\nimport { FrameLoop } from \"@aptero/axolotis-player\";\nimport { ThreeLib } from \"@root/lib/modules/three/ThreeLib\";\nimport NavMeshPlayer from \"@root/lib/modules/controller/pathFindingPlayer/NavMeshPlayer\";\nimport { DebugBtn } from \"@root/lib/modules/debug/DebugBtn\";\nimport { WebpackLazyModule } from \"@root/lib/generated/webpack/WebpackLoader\";\nimport { LazyServices, Services } from \"@aptero/axolotis-player\";\nimport { WorldService } from \"@root/lib/modules/worlds/WorldService\";\n\nconst rStats = require(\"./rStats/rStats\");\nconst rStatsExtra = require(\"./rStats/rStats.extras\");\n\ndeclare const window: any;\n\nexport class Factory implements WebpackLazyModule, Service<PerformanceRStats> {\n  async createService(services: LazyServices): Promise<PerformanceRStats> {\n    let threeLib = await services.getService<ThreeLib>(\n      \"@aptero/axolotis-core-plugins/three/ThreeLib\"\n    );\n    let frameLoop = await services.getService<FrameLoop>(\n      \"@aptero/axolotis-core-plugins/frame/FrameLoop\"\n    );\n    let worldService = await services.getService<WorldService>(\n      \"@aptero/axolotis-core-plugins/worlds/WorldService\"\n    );\n    return new PerformanceRStats(threeLib, frameLoop, worldService);\n  }\n}\n\nexport class PerformanceRStats implements Component {\n  private rS: any;\n  constructor(\n    private threeLib: ThreeLib,\n    frameLoop: FrameLoop,\n    private worldService: WorldService\n  ) {\n    if (window.perfStatSingletonPresent) {\n      return; //Only one debug panel even if multiple world\n    }\n    window.perfStatSingletonPresent = true;\n    console.warn(\n      \"MB MBytes of allocated memory. (Run Chrome with --enable-precise-memory-info) to have precise perf info\"\n    );\n    const stats = Stats();\n    stats.showPanel(2);\n    document.body.appendChild(stats.dom);\n    this.updateRstats();\n    window.document.body.insertAdjacentHTML(\"beforeend\", html);\n    if (worldService.isActiveWorld()) {\n      const animate = (t) => {\n        //Avoir using frameloop for this so it does not appear on perf\n        requestAnimationFrame(animate);\n        stats.update();\n        this.rS().update();\n        this.rS(\"framerate\").end();\n        this.rS(\"framerate\").start();\n      };\n      requestAnimationFrame(animate);\n    }\n\n    worldService.addOnWorldAdded(() => {\n      this.updateWorldCallback();\n    }, true);\n  }\n\n  updateRstats() {\n    let elementsByClassName = document.body.getElementsByClassName(\"rs-base\");\n    if (elementsByClassName.length != 0) {\n      elementsByClassName[0].remove();\n    }\n    //https://spite.github.io/rstats/\n    const threeStats = new window.threeStats(this.threeLib.renderer);\n    //const glS = new window.glStats(); // init at any point\n    const plugins = [threeStats];\n    let config: any = {\n      css: [], // Our stylesheet is injected from AFrame.\n      values: {\n        framerate: { caption: \"Frame (ms)\", over: 19 }, //17 ms = 60fps\n      },\n      groups: [],\n      plugins: plugins,\n    };\n    for (let i = 0; i < this.worldService.getWorlds().length; i++) {\n      config.values[FrameLoop.name.toLowerCase() + \"-\" + i] = {\n        caption: FrameLoop.name + \" (ms)\",\n        over: 10,\n      };\n      config.values[ThreeLib.name.toLowerCase() + \"-\" + i] = {\n        caption: ThreeLib.name + \" (ms)\",\n      };\n      config.values[NavMeshPlayer.name.toLowerCase() + \"-\" + i] = {\n        caption: NavMeshPlayer.name + \" (ms)\",\n      };\n      config.values[DebugBtn.name.toLowerCase() + \"-\" + i] = {\n        caption: DebugBtn.name + \" (ms)\",\n      };\n      config.values[PerformanceRStats.name.toLowerCase() + \"-\" + i] = {\n        caption: PerformanceRStats.name + \" (ms)\",\n      };\n      //config.values[PortalsService.name.toLowerCase()+\"-\"+i] = { caption: PortalsService.name + \" (ms)\" };\n      config.groups.push({\n        caption: \"World - \" + i,\n        values: [\n          FrameLoop.name.toLowerCase() + \"-\" + i,\n          ThreeLib.name.toLowerCase() + \"-\" + i,\n          NavMeshPlayer.name.toLowerCase() + \"-\" + i,\n        ],\n        //PortalsService.name.toLowerCase()+\"-\"+i]\n      });\n    }\n    this.rS = new rStats(config);\n  }\n\n  updateWorldCallback() {\n    console.log(\"new world :\", this.worldService.getWorlds());\n    this.updateRstats();\n    this.worldService.getWorlds().forEach(async (world, index) => {\n      let services = world.getFirstComponentByType<Services>(Services.name);\n      let frameLoop = await services.getService<FrameLoop>(\n        \"@aptero/axolotis-core-plugins/frame/FrameLoop\"\n      );\n      frameLoop.setMonitoringCallback(\n        (name) => {\n          this.rS(name.toLowerCase() + \"-\" + index).start();\n        },\n        (name) => {\n          this.rS(name.toLowerCase() + \"-\" + index).end();\n        }\n      );\n    });\n  }\n\n  getType(): string {\n    return PerformanceRStats.name;\n  }\n}\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\nwindow.glStats = function () {\n  var _rS = null;\n\n  var _totalDrawArraysCalls = 0,\n    _totalDrawElementsCalls = 0,\n    _totalUseProgramCalls = 0,\n    _totalFaces = 0,\n    _totalVertices = 0,\n    _totalPoints = 0,\n    _totalBindTexures = 0;\n\n  function _h(f, c) {\n    return function () {\n      c.apply(this, arguments);\n      f.apply(this, arguments);\n    };\n  }\n\n  WebGLRenderingContext.prototype.drawArrays = _h(\n    WebGLRenderingContext.prototype.drawArrays,\n    function () {\n      _totalDrawArraysCalls++;\n      if (arguments[0] == this.POINTS) _totalPoints += arguments[2];\n      else _totalVertices += arguments[2];\n    }\n  );\n\n  WebGLRenderingContext.prototype.drawElements = _h(\n    WebGLRenderingContext.prototype.drawElements,\n    function () {\n      _totalDrawElementsCalls++;\n      _totalFaces += arguments[1] / 3;\n      _totalVertices += arguments[1];\n    }\n  );\n\n  WebGLRenderingContext.prototype.useProgram = _h(\n    WebGLRenderingContext.prototype.useProgram,\n    function () {\n      _totalUseProgramCalls++;\n    }\n  );\n\n  WebGLRenderingContext.prototype.bindTexture = _h(\n    WebGLRenderingContext.prototype.bindTexture,\n    function () {\n      _totalBindTexures++;\n    }\n  );\n\n  var _values = {\n    allcalls: {\n      over: 3000,\n      caption: \"Calls (hook)\",\n    },\n    drawelements: {\n      caption: \"drawElements (hook)\",\n    },\n    drawarrays: {\n      caption: \"drawArrays (hook)\",\n    },\n  };\n\n  var _groups = [\n    {\n      caption: \"WebGL\",\n      values: [\n        \"allcalls\",\n        \"drawelements\",\n        \"drawarrays\",\n        \"useprogram\",\n        \"bindtexture\",\n        \"glfaces\",\n        \"glvertices\",\n        \"glpoints\",\n      ],\n    },\n  ];\n\n  var _fractions = [\n    {\n      base: \"allcalls\",\n      steps: [\"drawelements\", \"drawarrays\"],\n    },\n  ];\n\n  function _update() {\n    _rS(\"allcalls\").set(_totalDrawArraysCalls + _totalDrawElementsCalls);\n    _rS(\"drawElements\").set(_totalDrawElementsCalls);\n    _rS(\"drawArrays\").set(_totalDrawArraysCalls);\n    _rS(\"bindTexture\").set(_totalBindTexures);\n    _rS(\"useProgram\").set(_totalUseProgramCalls);\n    _rS(\"glfaces\").set(_totalFaces);\n    _rS(\"glvertices\").set(_totalVertices);\n    _rS(\"glpoints\").set(_totalPoints);\n  }\n\n  function _start() {\n    _totalDrawArraysCalls = 0;\n    _totalDrawElementsCalls = 0;\n    _totalUseProgramCalls = 0;\n    _totalFaces = 0;\n    _totalVertices = 0;\n    _totalPoints = 0;\n    _totalBindTexures = 0;\n  }\n\n  function _end() {}\n\n  function _attach(r) {\n    _rS = r;\n  }\n\n  return {\n    update: _update,\n    start: _start,\n    end: _end,\n    attach: _attach,\n    values: _values,\n    groups: _groups,\n    fractions: _fractions,\n  };\n};\n\nwindow.threeStats = function (renderer) {\n  var _rS = null;\n\n  var _values = {\n    \"renderer.info.memory.geometries\": {\n      caption: \"Geometries\",\n    },\n    \"renderer.info.memory.textures\": {\n      caption: \"Textures\",\n    },\n    \"renderer.info.programs\": {\n      caption: \"Programs\",\n    },\n    \"renderer.info.render.calls\": {\n      caption: \"Calls\",\n    },\n    \"renderer.info.render.triangles\": {\n      caption: \"Triangles\",\n      over: 300000,\n    },\n    \"renderer.info.render.points\": {\n      caption: \"Points\",\n    },\n  };\n\n  var _groups = [\n    {\n      caption: \"Three.js - Memory\",\n      values: [\n        \"renderer.info.memory.geometries\",\n        \"renderer.info.programs\",\n        \"renderer.info.memory.textures\",\n      ],\n    },\n    {\n      caption: \"Three.js - Render\",\n      values: [\n        \"renderer.info.render.calls\",\n        \"renderer.info.render.triangles\",\n        \"renderer.info.render.points\",\n      ],\n    },\n  ];\n\n  var _fractions = [];\n\n  function _update() {\n    _rS(\"renderer.info.memory.geometries\").set(renderer.info.memory.geometries);\n    _rS(\"renderer.info.programs\").set(renderer.info.programs.length);\n    _rS(\"renderer.info.memory.textures\").set(renderer.info.memory.textures);\n    _rS(\"renderer.info.render.calls\").set(renderer.info.render.calls);\n    _rS(\"renderer.info.render.triangles\").set(renderer.info.render.triangles);\n    _rS(\"renderer.info.render.points\").set(renderer.info.render.points);\n  }\n\n  function _start() {}\n\n  function _end() {}\n\n  function _attach(r) {\n    _rS = r;\n  }\n\n  return {\n    update: _update,\n    start: _start,\n    end: _end,\n    attach: _attach,\n    values: _values,\n    groups: _groups,\n    fractions: _fractions,\n  };\n};\n\n/*\n *   From https://github.com/paulirish/memory-stats.js\n */\n\nwindow.BrowserStats = function () {\n  var _rS = null;\n\n  var _usedJSHeapSize = 0,\n    _totalJSHeapSize = 0;\n\n  if (window.performance && !performance.memory) {\n    performance.memory = {\n      usedJSHeapSize: 0,\n      totalJSHeapSize: 0,\n    };\n  }\n\n  if (performance.memory.totalJSHeapSize === 0) {\n    console.warn(\n      \"totalJSHeapSize === 0... performance.memory is only available in Chrome .\"\n    );\n  }\n\n  var _values = {\n    memory: {\n      caption: \"Used Memory\",\n      average: true,\n      avgMs: 1000,\n      over: 22,\n    },\n    total: {\n      caption: \"Total Memory\",\n    },\n  };\n\n  var _groups = [\n    {\n      caption: \"Browser\",\n      values: [\"memory\", \"total\"],\n    },\n  ];\n\n  var _fractions = [\n    {\n      base: \"total\",\n      steps: [\"memory\"],\n    },\n  ];\n\n  var log1024 = Math.log(1024);\n\n  function _size(v) {\n    var precision = 100; //Math.pow(10, 2);\n    var i = Math.floor(Math.log(v) / log1024);\n    return Math.round((v * precision) / Math.pow(1024, i)) / precision; // + ' ' + sizes[i];\n  }\n\n  function _update() {\n    _usedJSHeapSize = _size(performance.memory.usedJSHeapSize);\n    _totalJSHeapSize = _size(performance.memory.totalJSHeapSize);\n\n    _rS(\"memory\").set(_usedJSHeapSize);\n    _rS(\"total\").set(_totalJSHeapSize);\n  }\n\n  function _start() {\n    _usedJSHeapSize = 0;\n  }\n\n  function _end() {}\n\n  function _attach(r) {\n    _rS = r;\n  }\n\n  return {\n    update: _update,\n    start: _start,\n    end: _end,\n    attach: _attach,\n    values: _values,\n    groups: _groups,\n    fractions: _fractions,\n  };\n};\n\nif (typeof module === \"object\") {\n  module.exports = {\n    glStats: window.glStats,\n    threeStats: window.threeStats,\n    BrowserStats: window.BrowserStats,\n  };\n}\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\n// performance.now() polyfill from https://gist.github.com/paulirish/5438650\n\"use strict\";\n\n(function () {\n  if (\"performance\" in window == false) {\n    window.performance = {};\n  }\n\n  var performance = window.performance;\n\n  if (\"now\" in performance == false) {\n    var nowOffset = Date.now();\n\n    if (performance.timing && performance.timing.navigationStart) {\n      nowOffset = performance.timing.navigationStart;\n    }\n\n    performance.now = function now() {\n      return Date.now() - nowOffset;\n    };\n  }\n\n  if (!performance.mark) {\n    performance.mark = function () {};\n  }\n\n  if (!performance.measure) {\n    performance.measure = function () {};\n  }\n})();\n\nwindow.rStats = function rStats(settings) {\n  function iterateKeys(array, callback) {\n    var keys = Object.keys(array);\n    for (var j = 0, l = keys.length; j < l; j++) {\n      callback(keys[j]);\n    }\n  }\n\n  function importCSS(url) {\n    var element = document.createElement(\"link\");\n    element.href = url;\n    element.rel = \"stylesheet\";\n    element.type = \"text/css\";\n    document.getElementsByTagName(\"head\")[0].appendChild(element);\n  }\n\n  var _settings = settings || {};\n  var _colours = _settings.colours || [\n    \"#850700\",\n    \"#c74900\",\n    \"#fcb300\",\n    \"#284280\",\n    \"#4c7c0c\",\n  ];\n\n  var _cssFont =\n    \"https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300\";\n  var _cssRStats = (_settings.CSSPath ? _settings.CSSPath : \"\") + \"rStats.css\";\n\n  var _css = _settings.css || [_cssFont, _cssRStats];\n  _css.forEach(function (uri) {\n    importCSS(uri);\n  });\n\n  if (!_settings.values) _settings.values = {};\n\n  var _base,\n    _div,\n    _elHeight = 10,\n    _elWidth = 200;\n  var _perfCounters = {};\n\n  function Graph(_dom, _id, _defArg) {\n    var _def = _defArg || {};\n    var _canvas = document.createElement(\"canvas\"),\n      _ctx = _canvas.getContext(\"2d\"),\n      _max = 0,\n      _current = 0;\n\n    var c = _def.color ? _def.color : \"#666666\";\n\n    var _dotCanvas = document.createElement(\"canvas\"),\n      _dotCtx = _dotCanvas.getContext(\"2d\");\n    _dotCanvas.width = 1;\n    _dotCanvas.height = 2 * _elHeight;\n    _dotCtx.fillStyle = \"#444444\";\n    _dotCtx.fillRect(0, 0, 1, 2 * _elHeight);\n    _dotCtx.fillStyle = c;\n    _dotCtx.fillRect(0, _elHeight, 1, _elHeight);\n    _dotCtx.fillStyle = \"#ffffff\";\n    _dotCtx.globalAlpha = 0.5;\n    _dotCtx.fillRect(0, _elHeight, 1, 1);\n    _dotCtx.globalAlpha = 1;\n\n    var _alarmCanvas = document.createElement(\"canvas\"),\n      _alarmCtx = _alarmCanvas.getContext(\"2d\");\n    _alarmCanvas.width = 1;\n    _alarmCanvas.height = 2 * _elHeight;\n    _alarmCtx.fillStyle = \"#444444\";\n    _alarmCtx.fillRect(0, 0, 1, 2 * _elHeight);\n    _alarmCtx.fillStyle = \"#b70000\";\n    _alarmCtx.fillRect(0, _elHeight, 1, _elHeight);\n    _alarmCtx.globalAlpha = 0.5;\n    _alarmCtx.fillStyle = \"#ffffff\";\n    _alarmCtx.fillRect(0, _elHeight, 1, 1);\n    _alarmCtx.globalAlpha = 1;\n\n    function _init() {\n      _canvas.width = _elWidth;\n      _canvas.height = _elHeight;\n      _canvas.style.width = _canvas.width + \"px\";\n      _canvas.style.height = _canvas.height + \"px\";\n      _canvas.className = \"rs-canvas\";\n      _dom.appendChild(_canvas);\n\n      _ctx.fillStyle = \"#444444\";\n      _ctx.fillRect(0, 0, _canvas.width, _canvas.height);\n    }\n\n    function _draw(v, alarm) {\n      _current += (v - _current) * 0.1;\n      _max *= 0.99;\n      if (_current > _max) _max = _current;\n      _ctx.drawImage(\n        _canvas,\n        1,\n        0,\n        _canvas.width - 1,\n        _canvas.height,\n        0,\n        0,\n        _canvas.width - 1,\n        _canvas.height\n      );\n      if (alarm) {\n        _ctx.drawImage(\n          _alarmCanvas,\n          _canvas.width - 1,\n          _canvas.height - (_current * _canvas.height) / _max - _elHeight\n        );\n      } else {\n        _ctx.drawImage(\n          _dotCanvas,\n          _canvas.width - 1,\n          _canvas.height - (_current * _canvas.height) / _max - _elHeight\n        );\n      }\n    }\n\n    _init();\n\n    return {\n      draw: _draw,\n    };\n  }\n\n  function StackGraph(_dom, _num) {\n    var _canvas = document.createElement(\"canvas\"),\n      _ctx = _canvas.getContext(\"2d\");\n\n    function _init() {\n      _canvas.width = _elWidth;\n      _canvas.height = _elHeight * _num;\n      _canvas.style.width = _canvas.width + \"px\";\n      _canvas.style.height = _canvas.height + \"px\";\n      _canvas.className = \"rs-canvas\";\n      _dom.appendChild(_canvas);\n\n      _ctx.fillStyle = \"#444444\";\n      _ctx.fillRect(0, 0, _canvas.width, _canvas.height);\n    }\n\n    function _draw(v) {\n      _ctx.drawImage(\n        _canvas,\n        1,\n        0,\n        _canvas.width - 1,\n        _canvas.height,\n        0,\n        0,\n        _canvas.width - 1,\n        _canvas.height\n      );\n      var th = 0;\n      iterateKeys(v, function (j) {\n        var h = v[j] * _canvas.height;\n        _ctx.fillStyle = _colours[j];\n        _ctx.fillRect(_canvas.width - 1, th, 1, h);\n        th += h;\n      });\n    }\n\n    _init();\n\n    return {\n      draw: _draw,\n    };\n  }\n\n  function PerfCounter(id, group) {\n    var _id = id,\n      _time,\n      _value = 0,\n      _total = 0,\n      _averageValue = 0,\n      _accumValue = 0,\n      _accumStart = performance.now(),\n      _accumSamples = 0,\n      _dom = document.createElement(\"div\"),\n      _spanId = document.createElement(\"span\"),\n      _spanValue = document.createElement(\"div\"),\n      _spanValueText = document.createTextNode(\"\"),\n      _def = _settings ? _settings.values[_id.toLowerCase()] : null,\n      _graph = new Graph(_dom, _id, _def),\n      _started = false;\n\n    _spanId.className = \"rs-counter-id\";\n    _spanId.textContent = _def && _def.caption ? _def.caption : _id;\n\n    _spanValue.className = \"rs-counter-value\";\n    _spanValue.appendChild(_spanValueText);\n\n    _dom.appendChild(_spanId);\n    _dom.appendChild(_spanValue);\n    if (group) group.div.appendChild(_dom);\n    else _div.appendChild(_dom);\n\n    _time = performance.now();\n\n    function _average(v) {\n      if (_def && _def.average) {\n        _accumValue += v;\n        _accumSamples++;\n        var t = performance.now();\n        if (t - _accumStart >= (_def.avgMs || 1000)) {\n          _averageValue = _accumValue / _accumSamples;\n          _accumValue = 0;\n          _accumStart = t;\n          _accumSamples = 0;\n        }\n      }\n    }\n\n    function _start() {\n      _time = performance.now();\n      if (_settings.userTimingAPI) performance.mark(_id + \"-start\");\n      _started = true;\n    }\n\n    function _end() {\n      _value = performance.now() - _time;\n      if (_settings.userTimingAPI) {\n        performance.mark(_id + \"-end\");\n        if (_started) {\n          performance.measure(_id, _id + \"-start\", _id + \"-end\");\n        }\n      }\n      _average(_value);\n    }\n\n    function _tick() {\n      _end();\n      _start();\n    }\n\n    function _draw() {\n      var v = _def && _def.average ? _averageValue : _value;\n      _spanValueText.nodeValue = Math.round(v * 100) / 100;\n      var a =\n        _def &&\n        ((_def.below && _value < _def.below) ||\n          (_def.over && _value > _def.over));\n      _graph.draw(_value, a);\n      _dom.className = a ? \"rs-counter-base alarm\" : \"rs-counter-base\";\n    }\n\n    function _frame() {\n      var t = performance.now();\n      var e = t - _time;\n      _total++;\n      if (e > 1000) {\n        if (_def && _def.interpolate === false) {\n          _value = _total;\n        } else {\n          _value = (_total * 1000) / e;\n        }\n        _total = 0;\n        _time = t;\n        _average(_value);\n      }\n    }\n\n    function _set(v) {\n      _value = v;\n      _average(_value);\n    }\n\n    return {\n      set: _set,\n      start: _start,\n      tick: _tick,\n      end: _end,\n      frame: _frame,\n      value: function () {\n        return _value;\n      },\n      draw: _draw,\n    };\n  }\n\n  function sample() {\n    var _value = 0;\n\n    function _set(v) {\n      _value = v;\n    }\n\n    return {\n      set: _set,\n      value: function () {\n        return _value;\n      },\n    };\n  }\n\n  function _perf(idArg) {\n    var id = idArg.toLowerCase();\n    if (id === undefined) id = \"default\";\n    if (_perfCounters[id]) return _perfCounters[id];\n\n    var group = null;\n    if (_settings && _settings.groups) {\n      iterateKeys(_settings.groups, function (j) {\n        var g = _settings.groups[parseInt(j, 10)];\n        if (!group && g.values.indexOf(id.toLowerCase()) !== -1) {\n          group = g;\n        }\n      });\n    }\n\n    var p = new PerfCounter(id, group);\n    _perfCounters[id] = p;\n    return p;\n  }\n\n  function _init() {\n    if (_settings.plugins) {\n      if (!_settings.values) _settings.values = {};\n      if (!_settings.groups) _settings.groups = [];\n      if (!_settings.fractions) _settings.fractions = [];\n      for (var j = 0; j < _settings.plugins.length; j++) {\n        _settings.plugins[j].attach(_perf);\n        iterateKeys(_settings.plugins[j].values, function (k) {\n          _settings.values[k] = _settings.plugins[j].values[k];\n        });\n        _settings.groups = _settings.groups.concat(_settings.plugins[j].groups);\n        _settings.fractions = _settings.fractions.concat(\n          _settings.plugins[j].fractions\n        );\n      }\n    } else {\n      _settings.plugins = {};\n    }\n\n    _base = document.createElement(\"div\");\n    _base.className = \"rs-base\";\n    _div = document.createElement(\"div\");\n    _div.className = \"rs-container\";\n    _div.style.height = \"auto\";\n    _base.appendChild(_div);\n    document.body.appendChild(_base);\n\n    if (!_settings) return;\n\n    if (_settings.groups) {\n      iterateKeys(_settings.groups, function (j) {\n        var g = _settings.groups[parseInt(j, 10)];\n        var div = document.createElement(\"div\");\n        div.className = \"rs-group\";\n        g.div = div;\n        var h1 = document.createElement(\"h1\");\n        h1.textContent = g.caption;\n        h1.addEventListener(\n          \"click\",\n          function (e) {\n            this.classList.toggle(\"hidden\");\n            e.preventDefault();\n          }.bind(div)\n        );\n        _div.appendChild(h1);\n        _div.appendChild(div);\n      });\n    }\n\n    if (_settings.fractions) {\n      iterateKeys(_settings.fractions, function (j) {\n        var f = _settings.fractions[parseInt(j, 10)];\n        var div = document.createElement(\"div\");\n        div.className = \"rs-fraction\";\n        var legend = document.createElement(\"div\");\n        legend.className = \"rs-legend\";\n\n        var h = 0;\n        iterateKeys(_settings.fractions[j].steps, function (k) {\n          var p = document.createElement(\"p\");\n          p.textContent = _settings.fractions[j].steps[k];\n          p.style.color = _colours[h];\n          legend.appendChild(p);\n          h++;\n        });\n        div.appendChild(legend);\n        div.style.height = h * _elHeight + \"px\";\n        f.div = div;\n        var graph = new StackGraph(div, h);\n        f.graph = graph;\n        _div.appendChild(div);\n      });\n    }\n  }\n\n  function _update() {\n    iterateKeys(_settings.plugins, function (j) {\n      _settings.plugins[j].update();\n    });\n\n    iterateKeys(_perfCounters, function (j) {\n      _perfCounters[j].draw();\n    });\n\n    if (_settings && _settings.fractions) {\n      iterateKeys(_settings.fractions, function (j) {\n        var f = _settings.fractions[parseInt(j, 10)];\n        var v = [];\n        var base = _perfCounters[f.base.toLowerCase()];\n        if (base) {\n          base = base.value();\n          iterateKeys(_settings.fractions[j].steps, function (k) {\n            var s = _settings.fractions[j].steps[parseInt(k, 10)].toLowerCase();\n            var val = _perfCounters[s];\n            if (val) {\n              v.push(val.value() / base);\n            }\n          });\n        }\n        f.graph.draw(v);\n      });\n    }\n\n    /*if( _height != _div.clientHeight ) {\n            _height = _div.clientHeight;\n            _base.style.height = _height + 2 * _elHeight + 'px';\n        console.log( _base.clientHeight );\n        }*/\n  }\n\n  _init();\n\n  return function (id) {\n    if (id) return _perf(id);\n    return {\n      element: _base,\n      update: _update,\n    };\n  };\n};\n\nif (typeof module === \"object\") {\n  module.exports = window.rStats;\n}\n","export class AssetsLoader {\n  loaderCache = {};\n  assets = {};\n\n  async getLoader(loaderName: string, loaderLoader: () => void) {\n    if (!this.loaderCache[loaderName]) {\n      this.loaderCache[loaderName] = await loaderLoader();\n    }\n    return this.loaderCache[loaderName];\n  }\n}\n\nexport const assetsLoader: AssetsLoader = new AssetsLoader();\n","import { assetsLoader } from \"@root/lib/modules/three/ThreeAssetsLoader\";\nimport Component from \"@aptero/axolotis-player/build/types/modules/core/ecs/Component\";\nimport { PerspectiveCamera, Scene, WebGLRenderer } from \"three\";\nimport { FrameLoop } from \"@root/lib/modules/frame/FrameLoop\";\n//import { WorldService } from \"@root/lib/modules/worlds/WorldService\";\nimport { WebpackLazyModule } from \"@root/lib/generated/webpack/WebpackLoader\";\nimport { Service } from \"@aptero/axolotis-player/build/types/modules/core/ecs/Service\";\nimport { LazyServices } from \"@aptero/axolotis-player/build/types\";\n\ndeclare let window: any;\n\nexport async function asyncLoadThree() {\n  //this async import has the only usage of renamin any import to three (using webpack chunk)\n  const THREE: any = await import(\n    /*  webpackPrefetch: 0,  webpackMode: 'lazy',  webpackChunkName: \"@aptero/axolotis-core-plugins/three\"  */\n    \"three\"\n  );\n  return THREE;\n}\n\nexport async function getGlobalRenderer() {\n  if (!window.axolotis?.renderer) {\n    const THREE = await asyncLoadThree();\n    let renderer = new THREE.WebGLRenderer({ antialias: true });\n    renderer.setSize(window.innerWidth, window.innerHeight);\n\n    renderer.toneMapping = THREE.ACESFilmicToneMapping;\n    renderer.toneMappingExposure = 1;\n    renderer.outputEncoding = THREE.sRGBEncoding;\n    renderer.setPixelRatio(window.devicePixelRatio);\n\n    document.body.appendChild(renderer.domElement);\n    if (!window.axolotis) {\n      window.axolotis = {};\n    }\n    window.axolotis.renderer = renderer;\n  }\n  return window.axolotis.renderer;\n}\n\nexport class ThreeLib implements Component {\n  renderer: WebGLRenderer;\n  scene: Scene;\n  camera: PerspectiveCamera;\n  preRenderPass: (() => void)[] = [];\n\n  constructor(\n    private frameLoop: FrameLoop,\n    //private worldService: WorldService,\n    private THREE\n  ) {}\n\n  async init() {\n    this.scene = new this.THREE.Scene();\n\n    this.renderer = await getGlobalRenderer();\n\n    this.camera = new this.THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.001,\n      100000\n    );\n    this.camera.position.z = 2;\n\n    const render = () => {\n      for (const prerender of this.preRenderPass) {\n        prerender();\n      }\n      // FINAL PASS\n      this.renderer.render(this.scene, this.camera);\n      // set things back to normal\n      this.renderer.autoClear = true;\n    };\n\n    const onWindowResize = () => {\n      this.camera.aspect = window.innerWidth / window.innerHeight;\n      this.camera.updateProjectionMatrix();\n      this.renderer.setSize(window.innerWidth, window.innerHeight);\n      render();\n    };\n\n    /*\n    this.worldService.addOnWorldChangeCallback(() => {\n      window.removeEventListener(\"resize\", onWindowResize);\n      this.frameLoop.removeLoop(ThreeLib.name);\n      if (this.worldService.isActiveWorld()) {\n        window.addEventListener(\"resize\", onWindowResize, false);\n        this.frameLoop.addLoop(ThreeLib.name, render);\n      }\n    }, true);\n    */\n    //setup three loop\n    window.addEventListener(\"resize\", onWindowResize, false);\n    this.frameLoop.addLoop(ThreeLib.name, render);\n  }\n\n  async loadAssets(path: string) {\n    if (assetsLoader.assets[path]) {\n      return assetsLoader.assets[path];\n    }\n    /*\n    TODO createa a early start download of assets so that the GLB start downloading early in the waterfall\n    Not as simple as it seems may be doable using service worker\n    fetch(path);//start download of assets\n    var oReq = new XMLHttpRequest();\n    oReq.addEventListener(\"load\", ()=>{});\n    oReq.open(\"GET\", path);\n    oReq.send();\n    */\n    if (path.endsWith(\".glb\")) {\n      const loader = await assetsLoader.getLoader(\"GLTFLoader\", async () => {\n        const module: any = await import(\n          /*  webpackPrefetch: 0,  webpackMode: 'lazy',  webpackChunkName: \"@aptero/axolotis-core-plugins/three/examples/jsm/loaders/GLTFLoader\"  */\n          \"three/examples/jsm/loaders/GLTFLoader\"\n        );\n        const gltfLoader = new module.GLTFLoader();\n        //const gltfLoader = new GLTFLoader(new this.THREE.LoadingManager());\n        return gltfLoader;\n      });\n      const result = await loader.loadAsync(path);\n      assetsLoader.assets[path] = result;\n    }\n    if (path.endsWith(\".jpg\")) {\n      const loader = await assetsLoader.getLoader(\"TextureLoader\", async () => {\n        const texLoader = new this.THREE.TextureLoader();\n        return texLoader;\n      });\n      const result = await loader.loadAsync(path);\n      assetsLoader.assets[path] = result;\n    }\n    return assetsLoader.assets[path];\n  }\n\n  getType(): string {\n    return ThreeLib.name;\n  }\n}\n\nexport class Factory implements WebpackLazyModule, Service<ThreeLib> {\n  constructor() {}\n\n  async createService(services: LazyServices): Promise<ThreeLib> {\n    let frameLoop = await services.getService<FrameLoop>(\n      \"@aptero/axolotis-core-plugins/frame/FrameLoop\"\n    );\n    /*let worldService = await services.getService<WorldService>(\n      \"@aptero/axolotis-core-plugins/worlds/WorldService\"\n    );*/\n    const threeLib = new ThreeLib(\n      frameLoop,\n      //worldService,\n      await asyncLoadThree()\n    );\n    await threeLib.init();\n    return threeLib;\n  }\n}\n","var Stats = function () {\n\n\tvar mode = 0;\n\n\tvar container = document.createElement( 'div' );\n\tcontainer.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n\tcontainer.addEventListener( 'click', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tshowPanel( ++ mode % container.children.length );\n\n\t}, false );\n\n\t//\n\n\tfunction addPanel( panel ) {\n\n\t\tcontainer.appendChild( panel.dom );\n\t\treturn panel;\n\n\t}\n\n\tfunction showPanel( id ) {\n\n\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\n\n\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\n\n\t\t}\n\n\t\tmode = id;\n\n\t}\n\n\t//\n\n\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\n\n\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\n\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\n\n\tif ( self.performance && self.performance.memory ) {\n\n\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\n\n\t}\n\n\tshowPanel( 0 );\n\n\treturn {\n\n\t\tREVISION: 16,\n\n\t\tdom: container,\n\n\t\taddPanel: addPanel,\n\t\tshowPanel: showPanel,\n\n\t\tbegin: function () {\n\n\t\t\tbeginTime = ( performance || Date ).now();\n\n\t\t},\n\n\t\tend: function () {\n\n\t\t\tframes ++;\n\n\t\t\tvar time = ( performance || Date ).now();\n\n\t\t\tmsPanel.update( time - beginTime, 200 );\n\n\t\t\tif ( time >= prevTime + 1000 ) {\n\n\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\n\n\t\t\t\tprevTime = time;\n\t\t\t\tframes = 0;\n\n\t\t\t\tif ( memPanel ) {\n\n\t\t\t\t\tvar memory = performance.memory;\n\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn time;\n\n\t\t},\n\n\t\tupdate: function () {\n\n\t\t\tbeginTime = this.end();\n\n\t\t},\n\n\t\t// Backwards Compatibility\n\n\t\tdomElement: container,\n\t\tsetMode: showPanel\n\n\t};\n\n};\n\nStats.Panel = function ( name, fg, bg ) {\n\n\tvar min = Infinity, max = 0, round = Math.round;\n\tvar PR = round( window.devicePixelRatio || 1 );\n\n\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\n\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\n\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\n\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\n\n\tvar canvas = document.createElement( 'canvas' );\n\tcanvas.width = WIDTH;\n\tcanvas.height = HEIGHT;\n\tcanvas.style.cssText = 'width:80px;height:48px';\n\n\tvar context = canvas.getContext( '2d' );\n\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\n\tcontext.textBaseline = 'top';\n\n\tcontext.fillStyle = bg;\n\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\n\n\tcontext.fillStyle = fg;\n\tcontext.fillText( name, TEXT_X, TEXT_Y );\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\tcontext.fillStyle = bg;\n\tcontext.globalAlpha = 0.9;\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\treturn {\n\n\t\tdom: canvas,\n\n\t\tupdate: function ( value, maxValue ) {\n\n\t\t\tmin = Math.min( min, value );\n\t\t\tmax = Math.max( max, value );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 1;\n\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\n\t\t\tcontext.fillStyle = fg;\n\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\n\n\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 0.9;\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\n\n\t\t}\n\n\t};\n\n};\n\nexport default Stats;\n"],"names":["Factory","world","params","services","getFirstComponentByType","Services","frameLoop","getService","DebugBtn","constructor","window","document","body","insertAdjacentHTML","elementById","getElementById","onclick","evt","stopPropagation","preventDefault","addLoop","name","delta","innerText","Math","round","location","host","startsWith","getType","rStats","require","threeLib","worldService","PerformanceRStats","perfStatSingletonPresent","console","warn","stats","Stats","showPanel","appendChild","dom","this","updateRstats","isActiveWorld","animate","t","requestAnimationFrame","update","rS","end","start","addOnWorldAdded","updateWorldCallback","elementsByClassName","getElementsByClassName","length","remove","config","css","values","framerate","caption","over","groups","plugins","threeStats","renderer","i","getWorlds","FrameLoop","ThreeLib","NavMeshPlayer","toLowerCase","push","log","forEach","async","index","setMonitoringCallback","glStats","_rS","_totalDrawArraysCalls","_totalDrawElementsCalls","_totalUseProgramCalls","_totalFaces","_totalVertices","_totalPoints","_totalBindTexures","_h","f","c","apply","arguments","WebGLRenderingContext","prototype","drawArrays","POINTS","drawElements","useProgram","bindTexture","set","attach","r","allcalls","drawelements","drawarrays","fractions","base","steps","info","memory","geometries","programs","textures","render","calls","triangles","points","BrowserStats","_usedJSHeapSize","_totalJSHeapSize","performance","usedJSHeapSize","totalJSHeapSize","log1024","_size","v","floor","pow","average","avgMs","total","module","exports","nowOffset","Date","now","timing","navigationStart","mark","measure","settings","iterateKeys","array","callback","keys","Object","j","l","_settings","_colours","colours","_cssRStats","CSSPath","uri","url","element","createElement","href","rel","type","getElementsByTagName","_base","_div","_elHeight","_perfCounters","Graph","_dom","_id","_defArg","_def","_canvas","_ctx","getContext","_max","_current","color","_dotCanvas","_dotCtx","width","height","fillStyle","fillRect","globalAlpha","_alarmCanvas","_alarmCtx","style","className","draw","alarm","drawImage","StackGraph","_num","th","h","PerfCounter","id","group","_time","_value","_total","_averageValue","_accumValue","_accumStart","_accumSamples","_spanId","_spanValue","_spanValueText","createTextNode","_graph","_started","_average","_start","userTimingAPI","_end","textContent","div","tick","frame","e","interpolate","value","nodeValue","a","below","_perf","idArg","undefined","g","parseInt","indexOf","p","_update","k","s","val","graph","concat","h1","addEventListener","classList","toggle","bind","legend","_init","assetsLoader","loaderName","loaderLoader","loaderCache","asyncLoadThree","getGlobalRenderer","axolotis","THREE","WebGLRenderer","antialias","setSize","innerWidth","innerHeight","toneMapping","ACESFilmicToneMapping","toneMappingExposure","outputEncoding","sRGBEncoding","setPixelRatio","devicePixelRatio","domElement","scene","Scene","camera","PerspectiveCamera","position","z","prerender","preRenderPass","autoClear","aspect","updateProjectionMatrix","path","assets","endsWith","loader","getLoader","GLTFLoader","result","loadAsync","TextureLoader","init","mode","container","addPanel","panel","children","display","cssText","event","beginTime","prevTime","frames","fpsPanel","Panel","msPanel","self","memPanel","REVISION","begin","time","jsHeapSizeLimit","setMode","fg","bg","min","Infinity","max","PR","WIDTH","HEIGHT","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","canvas","context","font","textBaseline","fillText","maxValue"],"sourceRoot":""}