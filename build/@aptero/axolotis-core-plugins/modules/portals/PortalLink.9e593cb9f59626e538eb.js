/*!
 * 
 *   @aptero/axolotis-core-plugins v1.0.0
 *   https://github.com/ApteroSAS/axolotis-player
 *
 *   Copyright (c) Aptero (https://github.com/ApteroSAS/axolotis-player) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */
"use strict";(self.webpackChunkaxolotis_core_plugins=self.webpackChunkaxolotis_core_plugins||[]).push([[968],{481:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Factory": function() { return /* binding */ Factory; },\n/* harmony export */   "PortalLink": function() { return /* binding */ PortalLink; }\n/* harmony export */ });\n/* harmony import */ var _aptero_axolotis_player__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(919);\n/* harmony import */ var _aptero_axolotis_player__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_aptero_axolotis_player__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(212);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n //https://barthaweb.com/2020/09/webgl-portal/\n//https://github.com/stemkoski/AR-Examples/blob/master/portal-view.html\n//https://stemkoski.github.io/AR-Examples/portal-view.html\n//https://discourse.threejs.org/t/multiple-scenes-vs-layers/12503/10\n//TODO an iframe per world maybe?\n//https://web.dev/origin-agent-cluster/\n\nclass Factory {\n  async createComponent(world, config) {\n    var _config$in, _config$in2, _config$in3, _config$out, _config$out2, _config$out3;\n\n    let services = world.getFirstComponentByType(_aptero_axolotis_player__WEBPACK_IMPORTED_MODULE_0__.ServiceEntity.name);\n    let codeLoader = await services.getService("@aptero/axolotis-player/modules/core/loader/CodeLoaderService");\n    let three = await services.getService("@aptero/axolotis-core-plugins/modules/three/ThreeLib");\n    let service = await services.getService("@aptero/axolotis-core-plugins/modules/portals/PortalsService");\n    let playerService = await services.getService("@aptero/axolotis-core-plugins/modules/controller/PlayerService");\n    let worldService = await services.getService("@aptero/axolotis-player/modules/core/WorldService");\n    let portalLink = new PortalLink(service, three, playerService, worldService, {\n      position: new three__WEBPACK_IMPORTED_MODULE_1__.Vector3((_config$in = config.in) === null || _config$in === void 0 ? void 0 : _config$in.x, (_config$in2 = config.in) === null || _config$in2 === void 0 ? void 0 : _config$in2.y, (_config$in3 = config.in) === null || _config$in3 === void 0 ? void 0 : _config$in3.z)\n    }, {\n      position: new three__WEBPACK_IMPORTED_MODULE_1__.Vector3((_config$out = config.out) === null || _config$out === void 0 ? void 0 : _config$out.x, (_config$out2 = config.out) === null || _config$out2 === void 0 ? void 0 : _config$out2.y, (_config$out3 = config.out) === null || _config$out3 === void 0 ? void 0 : _config$out3.z)\n    });\n    codeLoader.awaitInitialLoading().then(async value => {\n      let world;\n\n      if (service.worldExist(config.url)) {\n        world = service.getWorld(config.url);\n      } else {\n        world = await (0,_aptero_axolotis_player__WEBPACK_IMPORTED_MODULE_0__.initHtmlFromUrl)(config.url);\n        service.notifylWorld(config.url, world);\n      }\n\n      portalLink.setTargetWorld(world);\n    });\n    return portalLink;\n  }\n\n}\nconst invisibleLayer = 31;\nconst tmpVisibleLayer = 30;\nconst regularLayer = 0;\nclass PortalLink {\n  async setTargetWorld(world) {\n    this.targetWorld = world;\n    let targetWorldService = await this.targetWorld.getFirstComponentByType(_aptero_axolotis_player__WEBPACK_IMPORTED_MODULE_0__.ServiceEntity.name);\n    this.targetThreeLib = await targetWorldService.getService("@aptero/axolotis-core-plugins/modules/three/ThreeLib");\n    this.targetPlayerService = await targetWorldService.getService("@aptero/axolotis-core-plugins/modules/controller/PlayerService");\n    let otherPortals = await world.getComponentByType(PortalLink.name);\n\n    if (otherPortals.length === 0) {\n      console.error("no destination portal present");\n    }\n\n    for (const op of otherPortals) {\n      if (op.inPosition.position.equals(this.outPosition.position)) {\n        // && op.key === this.key\n        this.targetLink = op;\n      }\n    }\n\n    if (this.targetLink) {\n      this.portals.addPortalRenderLoop(() => {\n        this.renderPortal();\n      });\n      this.portals.addPortalLoop(delta => {\n        this.computerPortalEnter();\n      });\n    } else {\n      throw new Error("invalid portal init: target portal in wrong state");\n    }\n  }\n\n  constructor(portals, three, playerService, worldService, inPosition, outPosition) {\n    this.portals = portals;\n    this.three = three;\n    this.playerService = playerService;\n    this.worldService = worldService;\n    this.inPosition = inPosition;\n    this.outPosition = outPosition;\n\n    _defineProperty(this, "otherCamera", void 0);\n\n    _defineProperty(this, "portalA", void 0);\n\n    _defineProperty(this, "portalB", void 0);\n\n    _defineProperty(this, "targetWorld", null);\n\n    _defineProperty(this, "targetThreeLib", null);\n\n    _defineProperty(this, "boundingBox", void 0);\n\n    _defineProperty(this, "targetLink", null);\n\n    _defineProperty(this, "portalPlane", void 0);\n\n    _defineProperty(this, "targetPlayerService", null);\n\n    _defineProperty(this, "tmpPos", new three__WEBPACK_IMPORTED_MODULE_1__.Vector3());\n\n    _defineProperty(this, "tmpDir", new three__WEBPACK_IMPORTED_MODULE_1__.Vector3());\n\n    _defineProperty(this, "tmpBox", new three__WEBPACK_IMPORTED_MODULE_1__.Box3());\n\n    _defineProperty(this, "tmpPlane", new three__WEBPACK_IMPORTED_MODULE_1__.Plane());\n\n    _defineProperty(this, "collidingLastFrame", false);\n\n    _defineProperty(this, "lastDistance", 0);\n\n    _defineProperty(this, "gracePeriode", 0);\n\n    this.otherCamera = new three__WEBPACK_IMPORTED_MODULE_1__.PerspectiveCamera(three.camera.fov, window.innerWidth / window.innerHeight, this.three.camera.near, this.three.camera.far);\n    three.scene.add(this.otherCamera); // Portal A (Portal View) ================================\n\n    let defaultMaterial = new three__WEBPACK_IMPORTED_MODULE_1__.MeshBasicMaterial({\n      color: 0xff0000,\n      side: three__WEBPACK_IMPORTED_MODULE_1__.DoubleSide,\n      transparent: true\n    });\n    this.portalA = new three__WEBPACK_IMPORTED_MODULE_1__.Mesh(new three__WEBPACK_IMPORTED_MODULE_1__.CircleGeometry(1, 64), //new THREE.BoxGeometry( 1, 1, 1 ),\n    defaultMaterial.clone());\n    this.portalA.material.opacity = 0;\n    this.portalA.position.copy(inPosition.position);\n\n    if (inPosition.rotation) {\n      this.portalA.setRotationFromEuler(inPosition.rotation);\n    }\n\n    this.portalA.layers.set(invisibleLayer); //invisible layer storage\n\n    three.scene.add(this.portalA);\n    this.portalA.geometry.computeBoundingBox();\n    this.portalPlane = new three__WEBPACK_IMPORTED_MODULE_1__.Plane(new three__WEBPACK_IMPORTED_MODULE_1__.Vector3(0, 0, 1)); //TODO remember to move and oriente the plan to follow the portal\n    //const helper = new THREE.PlaneHelper( this.portalPlane, 1, 0xffff00 );\n    //this.three.scene.add( helper );\n\n    this.boundingBox = new three__WEBPACK_IMPORTED_MODULE_1__.Box3();\n    this.boundingBox.copy(this.portalA.geometry.boundingBox || new three__WEBPACK_IMPORTED_MODULE_1__.Box3());\n    let minBox = new three__WEBPACK_IMPORTED_MODULE_1__.Box3(new three__WEBPACK_IMPORTED_MODULE_1__.Vector3(-0.2, -0.2, -0.2), new three__WEBPACK_IMPORTED_MODULE_1__.Vector3(0.2, 0.2, 0.2));\n    this.boundingBox = this.boundingBox.union(minBox); //const helper = new THREE.Box3Helper( this.boundingBox,0xffff00 as any );\n    //this.three.scene.add( helper );\n    // Portal B (Point of View position and rotation) ================================\n    // material for portals and blockers\n\n    let defaultMaterial2 = new three__WEBPACK_IMPORTED_MODULE_1__.MeshBasicMaterial({\n      color: 0xffffff,\n      side: three__WEBPACK_IMPORTED_MODULE_1__.DoubleSide,\n      transparent: true\n    });\n    this.portalB = new three__WEBPACK_IMPORTED_MODULE_1__.Mesh(new three__WEBPACK_IMPORTED_MODULE_1__.CircleGeometry(1, 64), defaultMaterial2.clone());\n    this.portalB.material.opacity = 0;\n    this.portalB.position.copy(outPosition.position);\n\n    if (outPosition.rotation) {\n      this.portalB.setRotationFromEuler(outPosition.rotation);\n    }\n\n    three.scene.add(this.portalB);\n  }\n\n  //in FPS\n  computerPortalEnter() {\n    if (!this.worldService.isActiveWorld()) {\n      return;\n    }\n\n    if (this.gracePeriode > 0) {\n      this.gracePeriode--;\n    } //compute collision\n\n\n    this.tmpBox.copy(this.boundingBox);\n    this.tmpPlane.copy(this.portalPlane);\n    this.tmpBox.applyMatrix4(this.portalA.matrixWorld);\n    this.tmpPlane.applyMatrix4(this.portalA.matrixWorld);\n    this.playerService.getCurrentPlayer().getHeadPosition(this.tmpPos);\n    this.three.camera.getWorldDirection(this.tmpDir); //this.tmpPos.add(this.tmpDir.multiplyScalar(0.30));\n\n    const isColliding = this.tmpBox.containsPoint(this.tmpPos);\n\n    if (isColliding) {\n      if (this.lastDistance !== 0) {\n        // - * + => - / + * - => - => this means we traversed the plan\n        if (this.tmpPlane.distanceToPoint(this.tmpPos) * this.lastDistance < 0) {\n          //enter\n          console.log("enter");\n\n          if (this.targetWorld && this.targetLink && this.targetPlayerService && this.gracePeriode == 0) {\n            this.targetLink.gracePeriode = 5;\n            this.targetLink.collidingLastFrame = true; //sync colliding flag\n\n            this.targetLink.lastDistance = this.lastDistance;\n            this.playerService.getCurrentPlayer().getHeadPosition(this.tmpPos); //right head position before teleport\n\n            this.targetPlayerService.getCurrentPlayer().teleportToLocation(this.tmpPos.x, this.tmpPos.y, this.tmpPos.z);\n            console.log("teleport");\n            this.worldService.setActiveWorld(this.targetWorld);\n            this.targetPlayerService.getCurrentPlayer().teleportToLocation(this.tmpPos.x, this.tmpPos.y, this.tmpPos.z);\n          }\n        }\n      }\n\n      this.lastDistance = this.tmpPlane.distanceToPoint(this.tmpPos);\n    } else if (!isColliding && this.lastDistance !== 0) {\n      //leave\n      this.lastDistance = 0;\n      console.log("leave");\n    }\n\n    this.collidingLastFrame = isColliding;\n  }\n\n  renderPortal() {\n    if (!this.targetThreeLib) {\n      return;\n    }\n\n    this.portalA.layers.set(tmpVisibleLayer); //Portal to render to layer 1\n    // relatively align other camera with main camera\n\n    let relativePosition = this.portalA.worldToLocal(this.three.camera.position.clone());\n    this.otherCamera.position.copy(this.portalB.localToWorld(relativePosition));\n    let relativeRotation = this.three.camera.quaternion.clone().multiply(this.portalA.quaternion.clone().invert());\n    this.otherCamera.quaternion.copy(relativeRotation.multiply(this.portalB.quaternion)); // keep camera tilt in sync\n\n    this.otherCamera.rotation.x = this.three.camera.rotation.x;\n    let gl = this.three.renderer.getContext(); // FIRST PASS\n    // goal: using the stencil buffer, place 1\'s in position of first portal\n    // enable the stencil buffer\n\n    gl.enable(gl.STENCIL_TEST); // layer 1 contains only the first portal\n\n    this.three.camera.layers.set(tmpVisibleLayer);\n    gl.stencilFunc(gl.ALWAYS, 1, 0xff);\n    gl.stencilOp(gl.KEEP, gl.KEEP, gl.REPLACE);\n    gl.stencilMask(0xff); // only write to stencil buffer (not color or depth)\n\n    gl.colorMask(false, false, false, false);\n    gl.depthMask(false);\n    this.three.renderer.render(this.three.scene, this.three.camera); //this.three.renderer.render( this.targetThreeLib.scene, this.targetThreeLib.camera );\n    // SECOND PASS\n    // goal: draw from the portal camera perspective (which is aligned relative to the second portal)\n    //   in the first portal region (set by the stencil in the previous pass)\n    // set up a clipping plane, so that portal camera does not see anything between\n    //   the portal camera and the second portal\n    // default normal of a plane is 0,0,1. apply mesh rotation to it.\n    // determine which side of the plane camera is on, for clipping plane orientation.\n\n    let portalToCamera = new three__WEBPACK_IMPORTED_MODULE_1__.Vector3().subVectors(this.three.camera.position.clone(), this.portalA.position.clone()); //  applyQuaternion( mainMover.quaternion );\n\n    let normalPortal = new three__WEBPACK_IMPORTED_MODULE_1__.Vector3(0, 0, 1).applyQuaternion(this.portalA.quaternion);\n    let clipSide = -Math.sign(portalToCamera.dot(normalPortal));\n    let clipNormal = new three__WEBPACK_IMPORTED_MODULE_1__.Vector3(0, 0, clipSide).applyQuaternion(this.portalB.quaternion);\n    let clipPoint = this.portalB.position;\n    let clipPlane = new three__WEBPACK_IMPORTED_MODULE_1__.Plane().setFromNormalAndCoplanarPoint(clipNormal, clipPoint);\n    this.three.renderer.clippingPlanes = [clipPlane];\n    gl.colorMask(true, true, true, true);\n    gl.depthMask(true);\n    gl.stencilFunc(gl.EQUAL, 1, 0xff);\n    gl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);\n    this.otherCamera.layers.set(regularLayer); //this.three.renderer.render( this.three.scene, this.otherCamera );//TODO maybe here scene 2\n\n    this.three.renderer.render(this.targetThreeLib.scene, this.otherCamera); // disable clipping planes\n\n    this.three.renderer.clippingPlanes = []; // THIRD PASS\n    // goal: set the depth buffer data for the first portal,\n    //   so that it can be occluded by other objects\n    // finished with stencil\n\n    gl.disable(gl.STENCIL_TEST);\n    gl.colorMask(false, false, false, false);\n    gl.depthMask(true); // need to clear the depth buffer, in case of occlusion\n\n    this.three.renderer.render(this.three.scene, this.three.camera);\n    this.three.camera.layers.set(regularLayer); // layer 0 contains everything but portals\n\n    this.portalA.layers.set(invisibleLayer); //Portal to render to layer 1\n  }\n\n  getType() {\n    return PortalLink.name;\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b2xvdGlzLWNvcmUtcGx1Z2lucy8uL3NyYy9saWIvbW9kdWxlcy9wb3J0YWxzL1BvcnRhbExpbmsudHM/Y2M3ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTZXJ2aWNlRW50aXR5IH0gZnJvbSBcIkBhcHRlcm8vYXhvbG90aXMtcGxheWVyXCI7XG5pbXBvcnQgeyBDb2RlTG9hZGVyQ29tcG9uZW50IH0gZnJvbSBcIkBhcHRlcm8vYXhvbG90aXMtcGxheWVyL2J1aWxkL3R5cGVzL21vZHVsZXMvY29yZS9sb2FkZXIvQ29kZUxvYWRlckNvbXBvbmVudFwiO1xuaW1wb3J0IHsgV2VicGFja0xhenlNb2R1bGUgfSBmcm9tIFwiQGFwdGVyby9heG9sb3Rpcy1wbGF5ZXIvYnVpbGQvdHlwZXMvbW9kdWxlcy9jb3JlL2xvYWRlci9XZWJwYWNrTG9hZGVyXCI7XG5pbXBvcnQgeyBXb3JsZEVudGl0eSB9IGZyb20gXCJAYXB0ZXJvL2F4b2xvdGlzLXBsYXllci9idWlsZC90eXBlcy9tb2R1bGVzL2NvcmUvZWNzL1dvcmxkRW50aXR5XCI7XG5pbXBvcnQgeyBUaHJlZUxpYiB9IGZyb20gXCJAcm9vdC9saWIvbW9kdWxlcy90aHJlZS9UaHJlZUxpYlwiO1xuaW1wb3J0IHsgUG9ydGFsc1NlcnZpY2UgfSBmcm9tIFwiLi9Qb3J0YWxzU2VydmljZVwiO1xuaW1wb3J0IHsgUGxheWVyU2VydmljZSB9IGZyb20gXCIuLi9jb250cm9sbGVyL1BsYXllclNlcnZpY2VcIjtcbmltcG9ydCB7IFdvcmxkU2VydmljZSB9IGZyb20gXCJAYXB0ZXJvL2F4b2xvdGlzLXBsYXllci9idWlsZC90eXBlcy9tb2R1bGVzL2NvcmUvV29ybGRTZXJ2aWNlXCI7XG5pbXBvcnQgeyBDb21wb25lbnRGYWN0b3J5IH0gZnJvbSBcIkBhcHRlcm8vYXhvbG90aXMtcGxheWVyL2J1aWxkL3R5cGVzL21vZHVsZXMvY29yZS9lY3MvQ29tcG9uZW50RmFjdG9yeVwiO1xuaW1wb3J0IENvbXBvbmVudCBmcm9tIFwiQGFwdGVyby9heG9sb3Rpcy1wbGF5ZXIvYnVpbGQvdHlwZXMvbW9kdWxlcy9jb3JlL2Vjcy9Db21wb25lbnRcIjtcbmltcG9ydCB7IGluaXRIdG1sRnJvbVVybCB9IGZyb20gXCJAYXB0ZXJvL2F4b2xvdGlzLXBsYXllclwiO1xuaW1wb3J0IHtcbiAgQm94MyxcbiAgQ2lyY2xlR2VvbWV0cnksXG4gIERvdWJsZVNpZGUsXG4gIE1lc2gsXG4gIE1lc2hCYXNpY01hdGVyaWFsLFxuICBQZXJzcGVjdGl2ZUNhbWVyYSxcbiAgUGxhbmUsXG4gIFZlY3RvcjMsXG59IGZyb20gXCJ0aHJlZVwiO1xuXG4vL2h0dHBzOi8vYmFydGhhd2ViLmNvbS8yMDIwLzA5L3dlYmdsLXBvcnRhbC9cbi8vaHR0cHM6Ly9naXRodWIuY29tL3N0ZW1rb3NraS9BUi1FeGFtcGxlcy9ibG9iL21hc3Rlci9wb3J0YWwtdmlldy5odG1sXG4vL2h0dHBzOi8vc3RlbWtvc2tpLmdpdGh1Yi5pby9BUi1FeGFtcGxlcy9wb3J0YWwtdmlldy5odG1sXG4vL2h0dHBzOi8vZGlzY291cnNlLnRocmVlanMub3JnL3QvbXVsdGlwbGUtc2NlbmVzLXZzLWxheWVycy8xMjUwMy8xMFxuXG4vL1RPRE8gYW4gaWZyYW1lIHBlciB3b3JsZCBtYXliZT9cbi8vaHR0cHM6Ly93ZWIuZGV2L29yaWdpbi1hZ2VudC1jbHVzdGVyL1xuXG5leHBvcnQgY2xhc3MgRmFjdG9yeVxuICBpbXBsZW1lbnRzIFdlYnBhY2tMYXp5TW9kdWxlLCBDb21wb25lbnRGYWN0b3J5PFBvcnRhbExpbms+XG57XG4gIGFzeW5jIGNyZWF0ZUNvbXBvbmVudChcbiAgICB3b3JsZDogV29ybGRFbnRpdHksXG4gICAgY29uZmlnOiB7XG4gICAgICB1cmw6IHN0cmluZztcbiAgICAgIGluOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyOyB6OiBudW1iZXIgfTtcbiAgICAgIG91dDogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgejogbnVtYmVyIH07XG4gICAgfVxuICApOiBQcm9taXNlPFBvcnRhbExpbms+IHtcbiAgICBsZXQgc2VydmljZXMgPSB3b3JsZC5nZXRGaXJzdENvbXBvbmVudEJ5VHlwZTxTZXJ2aWNlRW50aXR5PihcbiAgICAgIFNlcnZpY2VFbnRpdHkubmFtZVxuICAgICk7XG4gICAgbGV0IGNvZGVMb2FkZXIgPSBhd2FpdCBzZXJ2aWNlcy5nZXRTZXJ2aWNlPENvZGVMb2FkZXJDb21wb25lbnQ+KFxuICAgICAgXCJAYXB0ZXJvL2F4b2xvdGlzLXBsYXllci9tb2R1bGVzL2NvcmUvbG9hZGVyL0NvZGVMb2FkZXJTZXJ2aWNlXCJcbiAgICApO1xuICAgIGxldCB0aHJlZSA9IGF3YWl0IHNlcnZpY2VzLmdldFNlcnZpY2U8VGhyZWVMaWI+KFxuICAgICAgXCJAYXB0ZXJvL2F4b2xvdGlzLWNvcmUtcGx1Z2lucy9tb2R1bGVzL3RocmVlL1RocmVlTGliXCJcbiAgICApO1xuICAgIGxldCBzZXJ2aWNlID0gYXdhaXQgc2VydmljZXMuZ2V0U2VydmljZTxQb3J0YWxzU2VydmljZT4oXG4gICAgICBcIkBhcHRlcm8vYXhvbG90aXMtY29yZS1wbHVnaW5zL21vZHVsZXMvcG9ydGFscy9Qb3J0YWxzU2VydmljZVwiXG4gICAgKTtcbiAgICBsZXQgcGxheWVyU2VydmljZSA9IGF3YWl0IHNlcnZpY2VzLmdldFNlcnZpY2U8UGxheWVyU2VydmljZT4oXG4gICAgICBcIkBhcHRlcm8vYXhvbG90aXMtY29yZS1wbHVnaW5zL21vZHVsZXMvY29udHJvbGxlci9QbGF5ZXJTZXJ2aWNlXCJcbiAgICApO1xuICAgIGxldCB3b3JsZFNlcnZpY2UgPSBhd2FpdCBzZXJ2aWNlcy5nZXRTZXJ2aWNlPFdvcmxkU2VydmljZT4oXG4gICAgICBcIkBhcHRlcm8vYXhvbG90aXMtcGxheWVyL21vZHVsZXMvY29yZS9Xb3JsZFNlcnZpY2VcIlxuICAgICk7XG4gICAgbGV0IHBvcnRhbExpbmsgPSBuZXcgUG9ydGFsTGluayhcbiAgICAgIHNlcnZpY2UsXG4gICAgICB0aHJlZSxcbiAgICAgIHBsYXllclNlcnZpY2UsXG4gICAgICB3b3JsZFNlcnZpY2UsXG4gICAgICB7XG4gICAgICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMyhjb25maWcuaW4/LngsIGNvbmZpZy5pbj8ueSwgY29uZmlnLmluPy56KSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMyhjb25maWcub3V0Py54LCBjb25maWcub3V0Py55LCBjb25maWcub3V0Py56KSxcbiAgICAgIH1cbiAgICApO1xuICAgIGNvZGVMb2FkZXIuYXdhaXRJbml0aWFsTG9hZGluZygpLnRoZW4oYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICBsZXQgd29ybGQ7XG4gICAgICBpZiAoc2VydmljZS53b3JsZEV4aXN0KGNvbmZpZy51cmwpKSB7XG4gICAgICAgIHdvcmxkID0gc2VydmljZS5nZXRXb3JsZChjb25maWcudXJsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdvcmxkID0gYXdhaXQgaW5pdEh0bWxGcm9tVXJsKGNvbmZpZy51cmwpO1xuICAgICAgICBzZXJ2aWNlLm5vdGlmeWxXb3JsZChjb25maWcudXJsLCB3b3JsZCk7XG4gICAgICB9XG4gICAgICBwb3J0YWxMaW5rLnNldFRhcmdldFdvcmxkKHdvcmxkKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcG9ydGFsTGluaztcbiAgfVxufVxuXG5jb25zdCBpbnZpc2libGVMYXllciA9IDMxO1xuY29uc3QgdG1wVmlzaWJsZUxheWVyID0gMzA7XG5jb25zdCByZWd1bGFyTGF5ZXIgPSAwO1xuXG5leHBvcnQgY2xhc3MgUG9ydGFsTGluayBpbXBsZW1lbnRzIENvbXBvbmVudCB7XG4gIHByaXZhdGUgb3RoZXJDYW1lcmE6IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhO1xuICBwcml2YXRlIHBvcnRhbEE6IFRIUkVFLk1lc2g8VEhSRUUuQ2lyY2xlR2VvbWV0cnksIFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsPjtcbiAgcHJpdmF0ZSBwb3J0YWxCOiBUSFJFRS5NZXNoPFRIUkVFLkNpcmNsZUdlb21ldHJ5LCBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbD47XG4gIHByaXZhdGUgdGFyZ2V0V29ybGQ6IFdvcmxkRW50aXR5IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgdGFyZ2V0VGhyZWVMaWI6IFRocmVlTGliIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYm91bmRpbmdCb3g6IFRIUkVFLkJveDM7XG4gIHByaXZhdGUgdGFyZ2V0TGluazogUG9ydGFsTGluayB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHBvcnRhbFBsYW5lOiBUSFJFRS5QbGFuZTtcbiAgcHJpdmF0ZSB0YXJnZXRQbGF5ZXJTZXJ2aWNlOiBQbGF5ZXJTZXJ2aWNlIHwgbnVsbCA9IG51bGw7XG5cbiAgYXN5bmMgc2V0VGFyZ2V0V29ybGQod29ybGQ6IFdvcmxkRW50aXR5KSB7XG4gICAgdGhpcy50YXJnZXRXb3JsZCA9IHdvcmxkO1xuICAgIGxldCB0YXJnZXRXb3JsZFNlcnZpY2UgPVxuICAgICAgYXdhaXQgdGhpcy50YXJnZXRXb3JsZC5nZXRGaXJzdENvbXBvbmVudEJ5VHlwZTxTZXJ2aWNlRW50aXR5PihcbiAgICAgICAgU2VydmljZUVudGl0eS5uYW1lXG4gICAgICApO1xuICAgIHRoaXMudGFyZ2V0VGhyZWVMaWIgPSBhd2FpdCB0YXJnZXRXb3JsZFNlcnZpY2UuZ2V0U2VydmljZTxUaHJlZUxpYj4oXG4gICAgICBcIkBhcHRlcm8vYXhvbG90aXMtY29yZS1wbHVnaW5zL21vZHVsZXMvdGhyZWUvVGhyZWVMaWJcIlxuICAgICk7XG4gICAgdGhpcy50YXJnZXRQbGF5ZXJTZXJ2aWNlID1cbiAgICAgIGF3YWl0IHRhcmdldFdvcmxkU2VydmljZS5nZXRTZXJ2aWNlPFBsYXllclNlcnZpY2U+KFxuICAgICAgICBcIkBhcHRlcm8vYXhvbG90aXMtY29yZS1wbHVnaW5zL21vZHVsZXMvY29udHJvbGxlci9QbGF5ZXJTZXJ2aWNlXCJcbiAgICAgICk7XG4gICAgbGV0IG90aGVyUG9ydGFsczogUG9ydGFsTGlua1tdID0gYXdhaXQgd29ybGQuZ2V0Q29tcG9uZW50QnlUeXBlPFBvcnRhbExpbms+KFxuICAgICAgUG9ydGFsTGluay5uYW1lXG4gICAgKTtcbiAgICBpZiAob3RoZXJQb3J0YWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5lcnJvcihcIm5vIGRlc3RpbmF0aW9uIHBvcnRhbCBwcmVzZW50XCIpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IG9wIG9mIG90aGVyUG9ydGFscykge1xuICAgICAgaWYgKG9wLmluUG9zaXRpb24ucG9zaXRpb24uZXF1YWxzKHRoaXMub3V0UG9zaXRpb24ucG9zaXRpb24pKSB7XG4gICAgICAgIC8vICYmIG9wLmtleSA9PT0gdGhpcy5rZXlcbiAgICAgICAgdGhpcy50YXJnZXRMaW5rID0gb3A7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnRhcmdldExpbmspIHtcbiAgICAgIHRoaXMucG9ydGFscy5hZGRQb3J0YWxSZW5kZXJMb29wKCgpID0+IHtcbiAgICAgICAgdGhpcy5yZW5kZXJQb3J0YWwoKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5wb3J0YWxzLmFkZFBvcnRhbExvb3AoKGRlbHRhKSA9PiB7XG4gICAgICAgIHRoaXMuY29tcHV0ZXJQb3J0YWxFbnRlcigpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgcG9ydGFsIGluaXQ6IHRhcmdldCBwb3J0YWwgaW4gd3Jvbmcgc3RhdGVcIik7XG4gICAgfVxuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBwb3J0YWxzOiBQb3J0YWxzU2VydmljZSxcbiAgICBwcml2YXRlIHRocmVlOiBUaHJlZUxpYixcbiAgICBwcml2YXRlIHBsYXllclNlcnZpY2U6IFBsYXllclNlcnZpY2UsXG4gICAgcHJpdmF0ZSB3b3JsZFNlcnZpY2U6IFdvcmxkU2VydmljZSxcbiAgICBwcml2YXRlIGluUG9zaXRpb246IHsgcG9zaXRpb246IFRIUkVFLlZlY3RvcjM7IHJvdGF0aW9uPzogVEhSRUUuRXVsZXIgfSxcbiAgICBwcml2YXRlIG91dFBvc2l0aW9uOiB7IHBvc2l0aW9uOiBUSFJFRS5WZWN0b3IzOyByb3RhdGlvbj86IFRIUkVFLkV1bGVyIH1cbiAgKSB7XG4gICAgdGhpcy5vdGhlckNhbWVyYSA9IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYShcbiAgICAgIHRocmVlLmNhbWVyYS5mb3YsXG4gICAgICB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCxcbiAgICAgIHRoaXMudGhyZWUuY2FtZXJhLm5lYXIsXG4gICAgICB0aGlzLnRocmVlLmNhbWVyYS5mYXJcbiAgICApO1xuICAgIHRocmVlLnNjZW5lLmFkZCh0aGlzLm90aGVyQ2FtZXJhKTtcblxuICAgIC8vIFBvcnRhbCBBIChQb3J0YWwgVmlldykgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBsZXQgZGVmYXVsdE1hdGVyaWFsID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgIGNvbG9yOiAweGZmMDAwMCxcbiAgICAgIHNpZGU6IERvdWJsZVNpZGUsXG4gICAgICB0cmFuc3BhcmVudDogdHJ1ZSxcbiAgICB9KTtcblxuICAgIHRoaXMucG9ydGFsQSA9IG5ldyBNZXNoKFxuICAgICAgbmV3IENpcmNsZUdlb21ldHJ5KDEsIDY0KSxcbiAgICAgIC8vbmV3IFRIUkVFLkJveEdlb21ldHJ5KCAxLCAxLCAxICksXG4gICAgICBkZWZhdWx0TWF0ZXJpYWwuY2xvbmUoKVxuICAgICk7XG4gICAgdGhpcy5wb3J0YWxBLm1hdGVyaWFsLm9wYWNpdHkgPSAwO1xuICAgIHRoaXMucG9ydGFsQS5wb3NpdGlvbi5jb3B5KGluUG9zaXRpb24ucG9zaXRpb24pO1xuICAgIGlmIChpblBvc2l0aW9uLnJvdGF0aW9uKSB7XG4gICAgICB0aGlzLnBvcnRhbEEuc2V0Um90YXRpb25Gcm9tRXVsZXIoaW5Qb3NpdGlvbi5yb3RhdGlvbik7XG4gICAgfVxuICAgIHRoaXMucG9ydGFsQS5sYXllcnMuc2V0KGludmlzaWJsZUxheWVyKTsgLy9pbnZpc2libGUgbGF5ZXIgc3RvcmFnZVxuICAgIHRocmVlLnNjZW5lLmFkZCh0aGlzLnBvcnRhbEEpO1xuICAgIHRoaXMucG9ydGFsQS5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKTtcbiAgICB0aGlzLnBvcnRhbFBsYW5lID0gbmV3IFBsYW5lKG5ldyBWZWN0b3IzKDAsIDAsIDEpKTsgLy9UT0RPIHJlbWVtYmVyIHRvIG1vdmUgYW5kIG9yaWVudGUgdGhlIHBsYW4gdG8gZm9sbG93IHRoZSBwb3J0YWxcbiAgICAvL2NvbnN0IGhlbHBlciA9IG5ldyBUSFJFRS5QbGFuZUhlbHBlciggdGhpcy5wb3J0YWxQbGFuZSwgMSwgMHhmZmZmMDAgKTtcbiAgICAvL3RoaXMudGhyZWUuc2NlbmUuYWRkKCBoZWxwZXIgKTtcbiAgICB0aGlzLmJvdW5kaW5nQm94ID0gbmV3IEJveDMoKTtcbiAgICB0aGlzLmJvdW5kaW5nQm94LmNvcHkodGhpcy5wb3J0YWxBLmdlb21ldHJ5LmJvdW5kaW5nQm94IHx8IG5ldyBCb3gzKCkpO1xuICAgIGxldCBtaW5Cb3ggPSBuZXcgQm94MyhcbiAgICAgIG5ldyBWZWN0b3IzKC0wLjIsIC0wLjIsIC0wLjIpLFxuICAgICAgbmV3IFZlY3RvcjMoMC4yLCAwLjIsIDAuMilcbiAgICApO1xuICAgIHRoaXMuYm91bmRpbmdCb3ggPSB0aGlzLmJvdW5kaW5nQm94LnVuaW9uKG1pbkJveCk7XG4gICAgLy9jb25zdCBoZWxwZXIgPSBuZXcgVEhSRUUuQm94M0hlbHBlciggdGhpcy5ib3VuZGluZ0JveCwweGZmZmYwMCBhcyBhbnkgKTtcbiAgICAvL3RoaXMudGhyZWUuc2NlbmUuYWRkKCBoZWxwZXIgKTtcbiAgICAvLyBQb3J0YWwgQiAoUG9pbnQgb2YgVmlldyBwb3NpdGlvbiBhbmQgcm90YXRpb24pID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gbWF0ZXJpYWwgZm9yIHBvcnRhbHMgYW5kIGJsb2NrZXJzXG4gICAgbGV0IGRlZmF1bHRNYXRlcmlhbDIgPSBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgY29sb3I6IDB4ZmZmZmZmLFxuICAgICAgc2lkZTogRG91YmxlU2lkZSxcbiAgICAgIHRyYW5zcGFyZW50OiB0cnVlLFxuICAgIH0pO1xuXG4gICAgdGhpcy5wb3J0YWxCID0gbmV3IE1lc2goXG4gICAgICBuZXcgQ2lyY2xlR2VvbWV0cnkoMSwgNjQpLFxuICAgICAgZGVmYXVsdE1hdGVyaWFsMi5jbG9uZSgpXG4gICAgKTtcbiAgICB0aGlzLnBvcnRhbEIubWF0ZXJpYWwub3BhY2l0eSA9IDA7XG4gICAgdGhpcy5wb3J0YWxCLnBvc2l0aW9uLmNvcHkob3V0UG9zaXRpb24ucG9zaXRpb24pO1xuICAgIGlmIChvdXRQb3NpdGlvbi5yb3RhdGlvbikge1xuICAgICAgdGhpcy5wb3J0YWxCLnNldFJvdGF0aW9uRnJvbUV1bGVyKG91dFBvc2l0aW9uLnJvdGF0aW9uKTtcbiAgICB9XG4gICAgdGhyZWUuc2NlbmUuYWRkKHRoaXMucG9ydGFsQik7XG4gIH1cblxuICB0bXBQb3M6IFRIUkVFLlZlY3RvcjMgPSBuZXcgVmVjdG9yMygpO1xuICB0bXBEaXI6IFRIUkVFLlZlY3RvcjMgPSBuZXcgVmVjdG9yMygpO1xuICB0bXBCb3g6IFRIUkVFLkJveDMgPSBuZXcgQm94MygpO1xuICB0bXBQbGFuZTogVEhSRUUuUGxhbmUgPSBuZXcgUGxhbmUoKTtcbiAgY29sbGlkaW5nTGFzdEZyYW1lOiBib29sZWFuID0gZmFsc2U7XG4gIGxhc3REaXN0YW5jZTogbnVtYmVyID0gMDtcbiAgZ3JhY2VQZXJpb2RlID0gMDsgLy9pbiBGUFNcblxuICBjb21wdXRlclBvcnRhbEVudGVyKCkge1xuICAgIGlmICghdGhpcy53b3JsZFNlcnZpY2UuaXNBY3RpdmVXb3JsZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmdyYWNlUGVyaW9kZSA+IDApIHtcbiAgICAgIHRoaXMuZ3JhY2VQZXJpb2RlLS07XG4gICAgfVxuICAgIC8vY29tcHV0ZSBjb2xsaXNpb25cbiAgICB0aGlzLnRtcEJveC5jb3B5KHRoaXMuYm91bmRpbmdCb3gpO1xuICAgIHRoaXMudG1wUGxhbmUuY29weSh0aGlzLnBvcnRhbFBsYW5lKTtcbiAgICB0aGlzLnRtcEJveC5hcHBseU1hdHJpeDQodGhpcy5wb3J0YWxBLm1hdHJpeFdvcmxkKTtcbiAgICB0aGlzLnRtcFBsYW5lLmFwcGx5TWF0cml4NCh0aGlzLnBvcnRhbEEubWF0cml4V29ybGQpO1xuICAgIHRoaXMucGxheWVyU2VydmljZS5nZXRDdXJyZW50UGxheWVyKCkuZ2V0SGVhZFBvc2l0aW9uKHRoaXMudG1wUG9zKTtcbiAgICB0aGlzLnRocmVlLmNhbWVyYS5nZXRXb3JsZERpcmVjdGlvbih0aGlzLnRtcERpcik7XG4gICAgLy90aGlzLnRtcFBvcy5hZGQodGhpcy50bXBEaXIubXVsdGlwbHlTY2FsYXIoMC4zMCkpO1xuICAgIGNvbnN0IGlzQ29sbGlkaW5nID0gdGhpcy50bXBCb3guY29udGFpbnNQb2ludCh0aGlzLnRtcFBvcyk7XG4gICAgaWYgKGlzQ29sbGlkaW5nKSB7XG4gICAgICBpZiAodGhpcy5sYXN0RGlzdGFuY2UgIT09IDApIHtcbiAgICAgICAgLy8gLSAqICsgPT4gLSAvICsgKiAtID0+IC0gPT4gdGhpcyBtZWFucyB3ZSB0cmF2ZXJzZWQgdGhlIHBsYW5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRoaXMudG1wUGxhbmUuZGlzdGFuY2VUb1BvaW50KHRoaXMudG1wUG9zKSAqIHRoaXMubGFzdERpc3RhbmNlIDxcbiAgICAgICAgICAwXG4gICAgICAgICkge1xuICAgICAgICAgIC8vZW50ZXJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImVudGVyXCIpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0V29ybGQgJiZcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0TGluayAmJlxuICAgICAgICAgICAgdGhpcy50YXJnZXRQbGF5ZXJTZXJ2aWNlICYmXG4gICAgICAgICAgICB0aGlzLmdyYWNlUGVyaW9kZSA9PSAwXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldExpbmsuZ3JhY2VQZXJpb2RlID0gNTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0TGluay5jb2xsaWRpbmdMYXN0RnJhbWUgPSB0cnVlOyAvL3N5bmMgY29sbGlkaW5nIGZsYWdcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0TGluay5sYXN0RGlzdGFuY2UgPSB0aGlzLmxhc3REaXN0YW5jZTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyU2VydmljZS5nZXRDdXJyZW50UGxheWVyKCkuZ2V0SGVhZFBvc2l0aW9uKHRoaXMudG1wUG9zKTsgLy9yaWdodCBoZWFkIHBvc2l0aW9uIGJlZm9yZSB0ZWxlcG9ydFxuICAgICAgICAgICAgdGhpcy50YXJnZXRQbGF5ZXJTZXJ2aWNlXG4gICAgICAgICAgICAgIC5nZXRDdXJyZW50UGxheWVyKClcbiAgICAgICAgICAgICAgLnRlbGVwb3J0VG9Mb2NhdGlvbih0aGlzLnRtcFBvcy54LCB0aGlzLnRtcFBvcy55LCB0aGlzLnRtcFBvcy56KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidGVsZXBvcnRcIik7XG4gICAgICAgICAgICB0aGlzLndvcmxkU2VydmljZS5zZXRBY3RpdmVXb3JsZCh0aGlzLnRhcmdldFdvcmxkKTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0UGxheWVyU2VydmljZVxuICAgICAgICAgICAgICAuZ2V0Q3VycmVudFBsYXllcigpXG4gICAgICAgICAgICAgIC50ZWxlcG9ydFRvTG9jYXRpb24odGhpcy50bXBQb3MueCwgdGhpcy50bXBQb3MueSwgdGhpcy50bXBQb3Mueik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLmxhc3REaXN0YW5jZSA9IHRoaXMudG1wUGxhbmUuZGlzdGFuY2VUb1BvaW50KHRoaXMudG1wUG9zKTtcbiAgICB9IGVsc2UgaWYgKCFpc0NvbGxpZGluZyAmJiB0aGlzLmxhc3REaXN0YW5jZSAhPT0gMCkge1xuICAgICAgLy9sZWF2ZVxuICAgICAgdGhpcy5sYXN0RGlzdGFuY2UgPSAwO1xuICAgICAgY29uc29sZS5sb2coXCJsZWF2ZVwiKTtcbiAgICB9XG4gICAgdGhpcy5jb2xsaWRpbmdMYXN0RnJhbWUgPSBpc0NvbGxpZGluZztcbiAgfVxuXG4gIHJlbmRlclBvcnRhbCgpIHtcbiAgICBpZiAoIXRoaXMudGFyZ2V0VGhyZWVMaWIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5wb3J0YWxBLmxheWVycy5zZXQodG1wVmlzaWJsZUxheWVyKTsgLy9Qb3J0YWwgdG8gcmVuZGVyIHRvIGxheWVyIDFcblxuICAgIC8vIHJlbGF0aXZlbHkgYWxpZ24gb3RoZXIgY2FtZXJhIHdpdGggbWFpbiBjYW1lcmFcblxuICAgIGxldCByZWxhdGl2ZVBvc2l0aW9uID0gdGhpcy5wb3J0YWxBLndvcmxkVG9Mb2NhbChcbiAgICAgIHRoaXMudGhyZWUuY2FtZXJhLnBvc2l0aW9uLmNsb25lKClcbiAgICApO1xuICAgIHRoaXMub3RoZXJDYW1lcmEucG9zaXRpb24uY29weSh0aGlzLnBvcnRhbEIubG9jYWxUb1dvcmxkKHJlbGF0aXZlUG9zaXRpb24pKTtcblxuICAgIGxldCByZWxhdGl2ZVJvdGF0aW9uID0gdGhpcy50aHJlZS5jYW1lcmEucXVhdGVybmlvblxuICAgICAgLmNsb25lKClcbiAgICAgIC5tdWx0aXBseSh0aGlzLnBvcnRhbEEucXVhdGVybmlvbi5jbG9uZSgpLmludmVydCgpKTtcbiAgICB0aGlzLm90aGVyQ2FtZXJhLnF1YXRlcm5pb24uY29weShcbiAgICAgIHJlbGF0aXZlUm90YXRpb24ubXVsdGlwbHkodGhpcy5wb3J0YWxCLnF1YXRlcm5pb24pXG4gICAgKTtcblxuICAgIC8vIGtlZXAgY2FtZXJhIHRpbHQgaW4gc3luY1xuICAgIHRoaXMub3RoZXJDYW1lcmEucm90YXRpb24ueCA9IHRoaXMudGhyZWUuY2FtZXJhLnJvdGF0aW9uLng7XG5cbiAgICBsZXQgZ2wgPSB0aGlzLnRocmVlLnJlbmRlcmVyLmdldENvbnRleHQoKTtcblxuICAgIC8vIEZJUlNUIFBBU1NcbiAgICAvLyBnb2FsOiB1c2luZyB0aGUgc3RlbmNpbCBidWZmZXIsIHBsYWNlIDEncyBpbiBwb3NpdGlvbiBvZiBmaXJzdCBwb3J0YWxcblxuICAgIC8vIGVuYWJsZSB0aGUgc3RlbmNpbCBidWZmZXJcbiAgICBnbC5lbmFibGUoZ2wuU1RFTkNJTF9URVNUKTtcblxuICAgIC8vIGxheWVyIDEgY29udGFpbnMgb25seSB0aGUgZmlyc3QgcG9ydGFsXG4gICAgdGhpcy50aHJlZS5jYW1lcmEubGF5ZXJzLnNldCh0bXBWaXNpYmxlTGF5ZXIpO1xuXG4gICAgZ2wuc3RlbmNpbEZ1bmMoZ2wuQUxXQVlTLCAxLCAweGZmKTtcbiAgICBnbC5zdGVuY2lsT3AoZ2wuS0VFUCwgZ2wuS0VFUCwgZ2wuUkVQTEFDRSk7XG4gICAgZ2wuc3RlbmNpbE1hc2soMHhmZik7XG5cbiAgICAvLyBvbmx5IHdyaXRlIHRvIHN0ZW5jaWwgYnVmZmVyIChub3QgY29sb3Igb3IgZGVwdGgpXG4gICAgZ2wuY29sb3JNYXNrKGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlKTtcbiAgICBnbC5kZXB0aE1hc2soZmFsc2UpO1xuXG4gICAgdGhpcy50aHJlZS5yZW5kZXJlci5yZW5kZXIodGhpcy50aHJlZS5zY2VuZSwgdGhpcy50aHJlZS5jYW1lcmEpO1xuICAgIC8vdGhpcy50aHJlZS5yZW5kZXJlci5yZW5kZXIoIHRoaXMudGFyZ2V0VGhyZWVMaWIuc2NlbmUsIHRoaXMudGFyZ2V0VGhyZWVMaWIuY2FtZXJhICk7XG5cbiAgICAvLyBTRUNPTkQgUEFTU1xuICAgIC8vIGdvYWw6IGRyYXcgZnJvbSB0aGUgcG9ydGFsIGNhbWVyYSBwZXJzcGVjdGl2ZSAod2hpY2ggaXMgYWxpZ25lZCByZWxhdGl2ZSB0byB0aGUgc2Vjb25kIHBvcnRhbClcbiAgICAvLyAgIGluIHRoZSBmaXJzdCBwb3J0YWwgcmVnaW9uIChzZXQgYnkgdGhlIHN0ZW5jaWwgaW4gdGhlIHByZXZpb3VzIHBhc3MpXG5cbiAgICAvLyBzZXQgdXAgYSBjbGlwcGluZyBwbGFuZSwgc28gdGhhdCBwb3J0YWwgY2FtZXJhIGRvZXMgbm90IHNlZSBhbnl0aGluZyBiZXR3ZWVuXG4gICAgLy8gICB0aGUgcG9ydGFsIGNhbWVyYSBhbmQgdGhlIHNlY29uZCBwb3J0YWxcblxuICAgIC8vIGRlZmF1bHQgbm9ybWFsIG9mIGEgcGxhbmUgaXMgMCwwLDEuIGFwcGx5IG1lc2ggcm90YXRpb24gdG8gaXQuXG5cbiAgICAvLyBkZXRlcm1pbmUgd2hpY2ggc2lkZSBvZiB0aGUgcGxhbmUgY2FtZXJhIGlzIG9uLCBmb3IgY2xpcHBpbmcgcGxhbmUgb3JpZW50YXRpb24uXG4gICAgbGV0IHBvcnRhbFRvQ2FtZXJhID0gbmV3IFZlY3RvcjMoKS5zdWJWZWN0b3JzKFxuICAgICAgdGhpcy50aHJlZS5jYW1lcmEucG9zaXRpb24uY2xvbmUoKSxcbiAgICAgIHRoaXMucG9ydGFsQS5wb3NpdGlvbi5jbG9uZSgpXG4gICAgKTsgLy8gIGFwcGx5UXVhdGVybmlvbiggbWFpbk1vdmVyLnF1YXRlcm5pb24gKTtcbiAgICBsZXQgbm9ybWFsUG9ydGFsID0gbmV3IFZlY3RvcjMoMCwgMCwgMSkuYXBwbHlRdWF0ZXJuaW9uKFxuICAgICAgdGhpcy5wb3J0YWxBLnF1YXRlcm5pb25cbiAgICApO1xuICAgIGxldCBjbGlwU2lkZSA9IC1NYXRoLnNpZ24ocG9ydGFsVG9DYW1lcmEuZG90KG5vcm1hbFBvcnRhbCkpO1xuXG4gICAgbGV0IGNsaXBOb3JtYWwgPSBuZXcgVmVjdG9yMygwLCAwLCBjbGlwU2lkZSkuYXBwbHlRdWF0ZXJuaW9uKFxuICAgICAgdGhpcy5wb3J0YWxCLnF1YXRlcm5pb25cbiAgICApO1xuICAgIGxldCBjbGlwUG9pbnQgPSB0aGlzLnBvcnRhbEIucG9zaXRpb247XG4gICAgbGV0IGNsaXBQbGFuZSA9IG5ldyBQbGFuZSgpLnNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KFxuICAgICAgY2xpcE5vcm1hbCxcbiAgICAgIGNsaXBQb2ludFxuICAgICk7XG4gICAgdGhpcy50aHJlZS5yZW5kZXJlci5jbGlwcGluZ1BsYW5lcyA9IFtjbGlwUGxhbmVdO1xuXG4gICAgZ2wuY29sb3JNYXNrKHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xuICAgIGdsLmRlcHRoTWFzayh0cnVlKTtcblxuICAgIGdsLnN0ZW5jaWxGdW5jKGdsLkVRVUFMLCAxLCAweGZmKTtcbiAgICBnbC5zdGVuY2lsT3AoZ2wuS0VFUCwgZ2wuS0VFUCwgZ2wuS0VFUCk7XG5cbiAgICB0aGlzLm90aGVyQ2FtZXJhLmxheWVycy5zZXQocmVndWxhckxheWVyKTtcbiAgICAvL3RoaXMudGhyZWUucmVuZGVyZXIucmVuZGVyKCB0aGlzLnRocmVlLnNjZW5lLCB0aGlzLm90aGVyQ2FtZXJhICk7Ly9UT0RPIG1heWJlIGhlcmUgc2NlbmUgMlxuICAgIHRoaXMudGhyZWUucmVuZGVyZXIucmVuZGVyKHRoaXMudGFyZ2V0VGhyZWVMaWIuc2NlbmUsIHRoaXMub3RoZXJDYW1lcmEpO1xuXG4gICAgLy8gZGlzYWJsZSBjbGlwcGluZyBwbGFuZXNcbiAgICB0aGlzLnRocmVlLnJlbmRlcmVyLmNsaXBwaW5nUGxhbmVzID0gW107XG5cbiAgICAvLyBUSElSRCBQQVNTXG4gICAgLy8gZ29hbDogc2V0IHRoZSBkZXB0aCBidWZmZXIgZGF0YSBmb3IgdGhlIGZpcnN0IHBvcnRhbCxcbiAgICAvLyAgIHNvIHRoYXQgaXQgY2FuIGJlIG9jY2x1ZGVkIGJ5IG90aGVyIG9iamVjdHNcblxuICAgIC8vIGZpbmlzaGVkIHdpdGggc3RlbmNpbFxuICAgIGdsLmRpc2FibGUoZ2wuU1RFTkNJTF9URVNUKTtcblxuICAgIGdsLmNvbG9yTWFzayhmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7XG4gICAgZ2wuZGVwdGhNYXNrKHRydWUpO1xuICAgIC8vIG5lZWQgdG8gY2xlYXIgdGhlIGRlcHRoIGJ1ZmZlciwgaW4gY2FzZSBvZiBvY2NsdXNpb25cbiAgICB0aGlzLnRocmVlLnJlbmRlcmVyLnJlbmRlcih0aGlzLnRocmVlLnNjZW5lLCB0aGlzLnRocmVlLmNhbWVyYSk7XG5cbiAgICB0aGlzLnRocmVlLmNhbWVyYS5sYXllcnMuc2V0KHJlZ3VsYXJMYXllcik7IC8vIGxheWVyIDAgY29udGFpbnMgZXZlcnl0aGluZyBidXQgcG9ydGFsc1xuICAgIHRoaXMucG9ydGFsQS5sYXllcnMuc2V0KGludmlzaWJsZUxheWVyKTsgLy9Qb3J0YWwgdG8gcmVuZGVyIHRvIGxheWVyIDFcbiAgfVxuXG4gIGdldFR5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gUG9ydGFsTGluay5uYW1lO1xuICB9XG59XG4iXSwibmFtZXMiOlsiU2VydmljZUVudGl0eSIsImluaXRIdG1sRnJvbVVybCIsIkJveDMiLCJDaXJjbGVHZW9tZXRyeSIsIkRvdWJsZVNpZGUiLCJNZXNoIiwiTWVzaEJhc2ljTWF0ZXJpYWwiLCJQZXJzcGVjdGl2ZUNhbWVyYSIsIlBsYW5lIiwiVmVjdG9yMyIsIkZhY3RvcnkiLCJjcmVhdGVDb21wb25lbnQiLCJ3b3JsZCIsImNvbmZpZyIsInNlcnZpY2VzIiwiZ2V0Rmlyc3RDb21wb25lbnRCeVR5cGUiLCJuYW1lIiwiY29kZUxvYWRlciIsImdldFNlcnZpY2UiLCJ0aHJlZSIsInNlcnZpY2UiLCJwbGF5ZXJTZXJ2aWNlIiwid29ybGRTZXJ2aWNlIiwicG9ydGFsTGluayIsIlBvcnRhbExpbmsiLCJwb3NpdGlvbiIsImluIiwieCIsInkiLCJ6Iiwib3V0IiwiYXdhaXRJbml0aWFsTG9hZGluZyIsInRoZW4iLCJ2YWx1ZSIsIndvcmxkRXhpc3QiLCJ1cmwiLCJnZXRXb3JsZCIsIm5vdGlmeWxXb3JsZCIsInNldFRhcmdldFdvcmxkIiwiaW52aXNpYmxlTGF5ZXIiLCJ0bXBWaXNpYmxlTGF5ZXIiLCJyZWd1bGFyTGF5ZXIiLCJ0YXJnZXRXb3JsZCIsInRhcmdldFdvcmxkU2VydmljZSIsInRhcmdldFRocmVlTGliIiwidGFyZ2V0UGxheWVyU2VydmljZSIsIm90aGVyUG9ydGFscyIsImdldENvbXBvbmVudEJ5VHlwZSIsImxlbmd0aCIsImNvbnNvbGUiLCJlcnJvciIsIm9wIiwiaW5Qb3NpdGlvbiIsImVxdWFscyIsIm91dFBvc2l0aW9uIiwidGFyZ2V0TGluayIsInBvcnRhbHMiLCJhZGRQb3J0YWxSZW5kZXJMb29wIiwicmVuZGVyUG9ydGFsIiwiYWRkUG9ydGFsTG9vcCIsImRlbHRhIiwiY29tcHV0ZXJQb3J0YWxFbnRlciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJvdGhlckNhbWVyYSIsImNhbWVyYSIsImZvdiIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsIm5lYXIiLCJmYXIiLCJzY2VuZSIsImFkZCIsImRlZmF1bHRNYXRlcmlhbCIsImNvbG9yIiwic2lkZSIsInRyYW5zcGFyZW50IiwicG9ydGFsQSIsImNsb25lIiwibWF0ZXJpYWwiLCJvcGFjaXR5IiwiY29weSIsInJvdGF0aW9uIiwic2V0Um90YXRpb25Gcm9tRXVsZXIiLCJsYXllcnMiLCJzZXQiLCJnZW9tZXRyeSIsImNvbXB1dGVCb3VuZGluZ0JveCIsInBvcnRhbFBsYW5lIiwiYm91bmRpbmdCb3giLCJtaW5Cb3giLCJ1bmlvbiIsImRlZmF1bHRNYXRlcmlhbDIiLCJwb3J0YWxCIiwiaXNBY3RpdmVXb3JsZCIsImdyYWNlUGVyaW9kZSIsInRtcEJveCIsInRtcFBsYW5lIiwiYXBwbHlNYXRyaXg0IiwibWF0cml4V29ybGQiLCJnZXRDdXJyZW50UGxheWVyIiwiZ2V0SGVhZFBvc2l0aW9uIiwidG1wUG9zIiwiZ2V0V29ybGREaXJlY3Rpb24iLCJ0bXBEaXIiLCJpc0NvbGxpZGluZyIsImNvbnRhaW5zUG9pbnQiLCJsYXN0RGlzdGFuY2UiLCJkaXN0YW5jZVRvUG9pbnQiLCJsb2ciLCJjb2xsaWRpbmdMYXN0RnJhbWUiLCJ0ZWxlcG9ydFRvTG9jYXRpb24iLCJzZXRBY3RpdmVXb3JsZCIsInJlbGF0aXZlUG9zaXRpb24iLCJ3b3JsZFRvTG9jYWwiLCJsb2NhbFRvV29ybGQiLCJyZWxhdGl2ZVJvdGF0aW9uIiwicXVhdGVybmlvbiIsIm11bHRpcGx5IiwiaW52ZXJ0IiwiZ2wiLCJyZW5kZXJlciIsImdldENvbnRleHQiLCJlbmFibGUiLCJTVEVOQ0lMX1RFU1QiLCJzdGVuY2lsRnVuYyIsIkFMV0FZUyIsInN0ZW5jaWxPcCIsIktFRVAiLCJSRVBMQUNFIiwic3RlbmNpbE1hc2siLCJjb2xvck1hc2siLCJkZXB0aE1hc2siLCJyZW5kZXIiLCJwb3J0YWxUb0NhbWVyYSIsInN1YlZlY3RvcnMiLCJub3JtYWxQb3J0YWwiLCJhcHBseVF1YXRlcm5pb24iLCJjbGlwU2lkZSIsIk1hdGgiLCJzaWduIiwiZG90IiwiY2xpcE5vcm1hbCIsImNsaXBQb2ludCIsImNsaXBQbGFuZSIsInNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50IiwiY2xpcHBpbmdQbGFuZXMiLCJFUVVBTCIsImRpc2FibGUiLCJnZXRUeXBlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///481\n')}}]);