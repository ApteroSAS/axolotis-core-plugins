/*!
 * 
 *   @aptero/axolotis-core-plugins v1.0.0
 *   https://github.com/ApteroSAS/axolotis-player
 *
 *   Copyright (c) Aptero (https://github.com/ApteroSAS/axolotis-player) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */
"use strict";(self.webpackChunkaxolotis_core_plugins=self.webpackChunkaxolotis_core_plugins||[]).push([["@aptero/axolotis-core-plugins/modules/controller/pathFindingPlayer/NavMeshPlayer"],{"./src/lib/modules/controller/pathFindingPlayer/NavMeshPathfinder.ts":
/*!***************************************************************************!*\
  !*** ./src/lib/modules/controller/pathFindingPlayer/NavMeshPathfinder.ts ***!
  \***************************************************************************/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "NavMeshPathfinder": function() { return /* binding */ NavMeshPathfinder; }\n/* harmony export */ });\n/* harmony import */ var three_pathfinding__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three-pathfinding */ "./node_modules/three-pathfinding/dist/three-pathfinding.module.js");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three */ "./node_modules/three/build/three.module.js");\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\nclass NavMeshPathfinder {\n  constructor() {\n    _defineProperty(this, "pathfinder", void 0);\n\n    _defineProperty(this, "mesh", void 0);\n\n    _defineProperty(this, "zone", "character");\n\n    _defineProperty(this, "navGroup", null);\n\n    _defineProperty(this, "navNode", null);\n\n    _defineProperty(this, "findPOVPositionAboveNavMesh", (() => {\n      const startingFeetPosition = new three__WEBPACK_IMPORTED_MODULE_1__.Vector3();\n      const desiredFeetPosition = new three__WEBPACK_IMPORTED_MODULE_1__.Vector3(); // TODO: Here we assume the player is standing straight up, but in VR it is often the case\n      // that you want to lean over the edge of a balcony/table that does not have nav mesh below.\n      // We should find way to allow leaning over the edge of a balcony and maybe disallow putting\n      // your head through a wall.\n\n      return (startPOVPosition, desiredPOVPosition, outPOVPosition) => {\n        //const playerHeight = getCurrentPlayerHeight(true);\n        const playerHeight = 2;\n        startingFeetPosition.copy(startPOVPosition);\n        startingFeetPosition.y -= playerHeight;\n        desiredFeetPosition.copy(desiredPOVPosition);\n        desiredFeetPosition.y -= playerHeight;\n        this.findPositionOnNavMesh(startingFeetPosition, desiredFeetPosition, outPOVPosition);\n        outPOVPosition.y += playerHeight;\n        return outPOVPosition;\n      };\n    })());\n  }\n\n  isEnabled() {\n    return this.pathfinder && this.zone in this.pathfinder.zones;\n  }\n\n  loadMesh(mesh) {\n    let zone = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.zone;\n    this.pathfinder = new three_pathfinding__WEBPACK_IMPORTED_MODULE_0__.Pathfinding();\n    this.mesh = null;\n    this.zone = zone;\n\n    if (this.mesh) {\n      console.error("tried to load multiple nav meshes");\n      this.removeNavMeshData();\n    }\n\n    const geometry = mesh.geometry;\n    geometry.applyMatrix4(mesh.matrixWorld);\n    this.pathfinder.setZoneData(zone, three_pathfinding__WEBPACK_IMPORTED_MODULE_0__.Pathfinding.createZone(geometry));\n    this.mesh = mesh;\n  }\n\n  getClosestNode(pos) {\n    const pathfinder = this.pathfinder;\n\n    if (!pathfinder.zones[this.zone].groups[this.navGroup]) {\n      return null;\n    }\n\n    return pathfinder.getClosestNode(pos, this.zone, this.navGroup, true) || pathfinder.getClosestNode(pos, this.zone, this.navGroup);\n  }\n\n  findPositionOnNavMesh(start, end, outPos) {\n    let shouldRecomputeGroupAndNode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    const pathfinder = this.pathfinder;\n    if (!(this.zone in pathfinder.zones)) return;\n    this.navGroup = shouldRecomputeGroupAndNode || this.navGroup === null ? pathfinder.getGroup(this.zone, end, true, true) : this.navGroup;\n    this.navNode = shouldRecomputeGroupAndNode || this.navNode === null || this.navNode === undefined ? this.getClosestNode(end) : this.navNode;\n\n    if (this.navNode === null || this.navNode === undefined) {\n      // this.navNode can be null if it has never been set or if getClosestNode fails,\n      // and it can be undefined if clampStep fails, so we have to check both. We do not\n      // simply check if it is falsey (!this.navNode), because 0 (zero) is a valid value,\n      // and 0 is falsey.\n      outPos.copy(end);\n    } else {\n      this.navNode = pathfinder.clampStep(start, end, this.navNode, this.zone, this.navGroup, outPos);\n    }\n\n    return outPos;\n  }\n  /*findPositionOnNavMesh(\n    start: Vector3,\n    end: Vector3,\n    outPos: Vector3,\n    shouldRecomputeGroupAndNode: boolean = false\n  ) {\n    const pathfinder = this.pathfinder;\n    if (!(this.zone in pathfinder.zones)) return;\n    this.navGroup =\n      shouldRecomputeGroupAndNode || this.navGroup === null\n        ? pathfinder.getGroup(this.zone, end, true, true)\n        : this.navGroup;\n    this.navNode =\n      shouldRecomputeGroupAndNode ||\n      this.navNode === null ||\n      this.navNode === undefined\n        ? this.getClosestNode(end)\n        : this.navNode;\n    if (this.navNode === null || this.navNode === undefined) {\n      // this.navNode can be null if it has never been set or if getClosestNode fails,\n      // and it can be undefined if clampStep fails, so we have to check both. We do not\n      // simply check if it is falsey (!this.navNode), because 0 (zero) is a valid value,\n      // and 0 is falsey.\n      outPos.copy(end);\n    } else {\n      try {\n        this.navNode = pathfinder.clampStep(\n          start,\n          end,\n          this.navNode,\n          this.zone,\n          this.navGroup,\n          outPos\n        );\n      } catch (e) {\n        console.error(e);\n        outPos.copy(start);\n        this.navNode = null;\n        this.navGroup = null;\n      }\n    }\n    return outPos;\n  }*/\n\n\n  removeNavMeshData() {\n    if (this.mesh && this.mesh.geometry && this.mesh.geometry.dispose) {\n      this.mesh.geometry.dispose();\n    }\n\n    this.mesh = null;\n    this.pathfinder.zones = {};\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGliL21vZHVsZXMvY29udHJvbGxlci9wYXRoRmluZGluZ1BsYXllci9OYXZNZXNoUGF0aGZpbmRlci50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBRUE7QUFFTyxNQUFNRSxpQkFBTixDQUF3QjtBQUFBO0FBQUE7O0FBQUE7O0FBQUEsa0NBR04sV0FITTs7QUFBQSxzQ0FJTCxJQUpLOztBQUFBLHFDQUtOLElBTE07O0FBQUEseURBb0NDLENBQUMsTUFBTTtBQUNuQyxZQUFNQyxvQkFBb0IsR0FBRyxJQUFJRiwwQ0FBSixFQUE3QjtBQUNBLFlBQU1JLG1CQUFtQixHQUFHLElBQUlKLDBDQUFKLEVBQTVCLENBRm1DLENBR25DO0FBQ0E7QUFDQTtBQUNBOztBQUNBLGFBQU8sQ0FDTEssZ0JBREssRUFFTEMsa0JBRkssRUFHTEMsY0FISyxLQUlGO0FBQ0g7QUFDQSxjQUFNQyxZQUFZLEdBQUcsQ0FBckI7QUFDQU4sUUFBQUEsb0JBQW9CLENBQUNPLElBQXJCLENBQTBCSixnQkFBMUI7QUFDQUgsUUFBQUEsb0JBQW9CLENBQUNRLENBQXJCLElBQTBCRixZQUExQjtBQUNBSixRQUFBQSxtQkFBbUIsQ0FBQ0ssSUFBcEIsQ0FBeUJILGtCQUF6QjtBQUNBRixRQUFBQSxtQkFBbUIsQ0FBQ00sQ0FBcEIsSUFBeUJGLFlBQXpCO0FBQ0EsYUFBS0cscUJBQUwsQ0FDRVQsb0JBREYsRUFFRUUsbUJBRkYsRUFHRUcsY0FIRjtBQUtBQSxRQUFBQSxjQUFjLENBQUNHLENBQWYsSUFBb0JGLFlBQXBCO0FBQ0EsZUFBT0QsY0FBUDtBQUNELE9BbEJEO0FBbUJELEtBMUI2QixHQXBDRDtBQUFBOztBQU83QkssRUFBQUEsU0FBUyxHQUFZO0FBQ25CLFdBQU8sS0FBS0MsVUFBTCxJQUFtQixLQUFLQyxJQUFMLElBQWEsS0FBS0QsVUFBTCxDQUFnQkUsS0FBdkQ7QUFDRDs7QUFFREMsRUFBQUEsUUFBUSxDQUFDQyxJQUFELEVBQWlDO0FBQUEsUUFBMUJILElBQTBC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SCxJQUFMLElBQWEsS0FBS0EsSUFBTCxDQUFVSSxRQUF2QixJQUFtQyxLQUFLSixJQUFMLENBQVVJLFFBQVYsQ0FBbUJpQixPQUExRCxFQUFtRTtBQUNqRSxXQUFLckIsSUFBTCxDQUFVSSxRQUFWLENBQW1CaUIsT0FBbkI7QUFDRDs7QUFDRCxTQUFLckIsSUFBTCxHQUFZLElBQVo7QUFDQSxTQUFLSixVQUFMLENBQWdCRSxLQUFoQixHQUF3QixFQUF4QjtBQUNEOztBQXZKNEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9heG9sb3Rpcy1jb3JlLXBsdWdpbnMvLi9zcmMvbGliL21vZHVsZXMvY29udHJvbGxlci9wYXRoRmluZGluZ1BsYXllci9OYXZNZXNoUGF0aGZpbmRlci50cz9mM2IyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhdGhmaW5kaW5nIH0gZnJvbSBcInRocmVlLXBhdGhmaW5kaW5nXCI7XG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSBcInRocmVlXCI7XG5pbXBvcnQgKiBhcyBUSFJFRSBmcm9tIFwidGhyZWVcIjtcblxuZXhwb3J0IGNsYXNzIE5hdk1lc2hQYXRoZmluZGVyIHtcbiAgcHJpdmF0ZSBwYXRoZmluZGVyOiBQYXRoZmluZGluZztcbiAgcHJpdmF0ZSBtZXNoOiBhbnk7XG4gIHByaXZhdGUgem9uZTogc3RyaW5nID0gXCJjaGFyYWN0ZXJcIjtcbiAgcHJpdmF0ZSBuYXZHcm91cDogYW55ID0gbnVsbDtcbiAgcHJpdmF0ZSBuYXZOb2RlOiBhbnkgPSBudWxsO1xuXG4gIGlzRW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5wYXRoZmluZGVyICYmIHRoaXMuem9uZSBpbiB0aGlzLnBhdGhmaW5kZXIuem9uZXM7XG4gIH1cblxuICBsb2FkTWVzaChtZXNoLCB6b25lOiBzdHJpbmcgPSB0aGlzLnpvbmUpIHtcbiAgICB0aGlzLnBhdGhmaW5kZXIgPSBuZXcgUGF0aGZpbmRpbmcoKTtcbiAgICB0aGlzLm1lc2ggPSBudWxsO1xuICAgIHRoaXMuem9uZSA9IHpvbmU7XG4gICAgaWYgKHRoaXMubWVzaCkge1xuICAgICAgY29uc29sZS5lcnJvcihcInRyaWVkIHRvIGxvYWQgbXVsdGlwbGUgbmF2IG1lc2hlc1wiKTtcbiAgICAgIHRoaXMucmVtb3ZlTmF2TWVzaERhdGEoKTtcbiAgICB9XG4gICAgY29uc3QgZ2VvbWV0cnkgPSBtZXNoLmdlb21ldHJ5O1xuICAgIGdlb21ldHJ5LmFwcGx5TWF0cml4NChtZXNoLm1hdHJpeFdvcmxkKTtcbiAgICB0aGlzLnBhdGhmaW5kZXIuc2V0Wm9uZURhdGEoem9uZSwgUGF0aGZpbmRpbmcuY3JlYXRlWm9uZShnZW9tZXRyeSkpO1xuICAgIHRoaXMubWVzaCA9IG1lc2g7XG4gIH1cblxuICBnZXRDbG9zZXN0Tm9kZShwb3MpIHtcbiAgICBjb25zdCBwYXRoZmluZGVyID0gdGhpcy5wYXRoZmluZGVyO1xuICAgIGlmICghcGF0aGZpbmRlci56b25lc1t0aGlzLnpvbmVdLmdyb3Vwc1t0aGlzLm5hdkdyb3VwXSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICBwYXRoZmluZGVyLmdldENsb3Nlc3ROb2RlKHBvcywgdGhpcy56b25lLCB0aGlzLm5hdkdyb3VwLCB0cnVlKSB8fFxuICAgICAgcGF0aGZpbmRlci5nZXRDbG9zZXN0Tm9kZShwb3MsIHRoaXMuem9uZSwgdGhpcy5uYXZHcm91cClcbiAgICApO1xuICB9XG5cbiAgZmluZFBPVlBvc2l0aW9uQWJvdmVOYXZNZXNoID0gKCgpID0+IHtcbiAgICBjb25zdCBzdGFydGluZ0ZlZXRQb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgY29uc3QgZGVzaXJlZEZlZXRQb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgLy8gVE9ETzogSGVyZSB3ZSBhc3N1bWUgdGhlIHBsYXllciBpcyBzdGFuZGluZyBzdHJhaWdodCB1cCwgYnV0IGluIFZSIGl0IGlzIG9mdGVuIHRoZSBjYXNlXG4gICAgLy8gdGhhdCB5b3Ugd2FudCB0byBsZWFuIG92ZXIgdGhlIGVkZ2Ugb2YgYSBiYWxjb255L3RhYmxlIHRoYXQgZG9lcyBub3QgaGF2ZSBuYXYgbWVzaCBiZWxvdy5cbiAgICAvLyBXZSBzaG91bGQgZmluZCB3YXkgdG8gYWxsb3cgbGVhbmluZyBvdmVyIHRoZSBlZGdlIG9mIGEgYmFsY29ueSBhbmQgbWF5YmUgZGlzYWxsb3cgcHV0dGluZ1xuICAgIC8vIHlvdXIgaGVhZCB0aHJvdWdoIGEgd2FsbC5cbiAgICByZXR1cm4gKFxuICAgICAgc3RhcnRQT1ZQb3NpdGlvbjogVEhSRUUuVmVjdG9yMyxcbiAgICAgIGRlc2lyZWRQT1ZQb3NpdGlvbjogVEhSRUUuVmVjdG9yMyxcbiAgICAgIG91dFBPVlBvc2l0aW9uOiBUSFJFRS5WZWN0b3IzXG4gICAgKSA9PiB7XG4gICAgICAvL2NvbnN0IHBsYXllckhlaWdodCA9IGdldEN1cnJlbnRQbGF5ZXJIZWlnaHQodHJ1ZSk7XG4gICAgICBjb25zdCBwbGF5ZXJIZWlnaHQgPSAyO1xuICAgICAgc3RhcnRpbmdGZWV0UG9zaXRpb24uY29weShzdGFydFBPVlBvc2l0aW9uKTtcbiAgICAgIHN0YXJ0aW5nRmVldFBvc2l0aW9uLnkgLT0gcGxheWVySGVpZ2h0O1xuICAgICAgZGVzaXJlZEZlZXRQb3NpdGlvbi5jb3B5KGRlc2lyZWRQT1ZQb3NpdGlvbik7XG4gICAgICBkZXNpcmVkRmVldFBvc2l0aW9uLnkgLT0gcGxheWVySGVpZ2h0O1xuICAgICAgdGhpcy5maW5kUG9zaXRpb25Pbk5hdk1lc2goXG4gICAgICAgIHN0YXJ0aW5nRmVldFBvc2l0aW9uLFxuICAgICAgICBkZXNpcmVkRmVldFBvc2l0aW9uLFxuICAgICAgICBvdXRQT1ZQb3NpdGlvblxuICAgICAgKTtcbiAgICAgIG91dFBPVlBvc2l0aW9uLnkgKz0gcGxheWVySGVpZ2h0O1xuICAgICAgcmV0dXJuIG91dFBPVlBvc2l0aW9uO1xuICAgIH07XG4gIH0pKCk7XG5cbiAgZmluZFBvc2l0aW9uT25OYXZNZXNoKFxuICAgIHN0YXJ0OiBWZWN0b3IzLFxuICAgIGVuZDogVmVjdG9yMyxcbiAgICBvdXRQb3M6IFZlY3RvcjMsXG4gICAgc2hvdWxkUmVjb21wdXRlR3JvdXBBbmROb2RlOiBib29sZWFuID0gZmFsc2VcbiAgKSB7XG4gICAgY29uc3QgcGF0aGZpbmRlciA9IHRoaXMucGF0aGZpbmRlcjtcbiAgICBpZiAoISh0aGlzLnpvbmUgaW4gcGF0aGZpbmRlci56b25lcykpIHJldHVybjtcbiAgICB0aGlzLm5hdkdyb3VwID1cbiAgICAgIHNob3VsZFJlY29tcHV0ZUdyb3VwQW5kTm9kZSB8fCB0aGlzLm5hdkdyb3VwID09PSBudWxsXG4gICAgICAgID8gcGF0aGZpbmRlci5nZXRHcm91cCh0aGlzLnpvbmUsIGVuZCwgdHJ1ZSwgdHJ1ZSlcbiAgICAgICAgOiB0aGlzLm5hdkdyb3VwO1xuICAgIHRoaXMubmF2Tm9kZSA9XG4gICAgICBzaG91bGRSZWNvbXB1dGVHcm91cEFuZE5vZGUgfHxcbiAgICAgIHRoaXMubmF2Tm9kZSA9PT0gbnVsbCB8fFxuICAgICAgdGhpcy5uYXZOb2RlID09PSB1bmRlZmluZWRcbiAgICAgICAgPyB0aGlzLmdldENsb3Nlc3ROb2RlKGVuZClcbiAgICAgICAgOiB0aGlzLm5hdk5vZGU7XG4gICAgaWYgKHRoaXMubmF2Tm9kZSA9PT0gbnVsbCB8fCB0aGlzLm5hdk5vZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gdGhpcy5uYXZOb2RlIGNhbiBiZSBudWxsIGlmIGl0IGhhcyBuZXZlciBiZWVuIHNldCBvciBpZiBnZXRDbG9zZXN0Tm9kZSBmYWlscyxcbiAgICAgIC8vIGFuZCBpdCBjYW4gYmUgdW5kZWZpbmVkIGlmIGNsYW1wU3RlcCBmYWlscywgc28gd2UgaGF2ZSB0byBjaGVjayBib3RoLiBXZSBkbyBub3RcbiAgICAgIC8vIHNpbXBseSBjaGVjayBpZiBpdCBpcyBmYWxzZXkgKCF0aGlzLm5hdk5vZGUpLCBiZWNhdXNlIDAgKHplcm8pIGlzIGEgdmFsaWQgdmFsdWUsXG4gICAgICAvLyBhbmQgMCBpcyBmYWxzZXkuXG4gICAgICBvdXRQb3MuY29weShlbmQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm5hdk5vZGUgPSBwYXRoZmluZGVyLmNsYW1wU3RlcChcbiAgICAgICAgc3RhcnQsXG4gICAgICAgIGVuZCxcbiAgICAgICAgdGhpcy5uYXZOb2RlLFxuICAgICAgICB0aGlzLnpvbmUsXG4gICAgICAgIHRoaXMubmF2R3JvdXAsXG4gICAgICAgIG91dFBvc1xuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIG91dFBvcztcbiAgfVxuXG4gIC8qZmluZFBvc2l0aW9uT25OYXZNZXNoKFxuICAgIHN0YXJ0OiBWZWN0b3IzLFxuICAgIGVuZDogVmVjdG9yMyxcbiAgICBvdXRQb3M6IFZlY3RvcjMsXG4gICAgc2hvdWxkUmVjb21wdXRlR3JvdXBBbmROb2RlOiBib29sZWFuID0gZmFsc2VcbiAgKSB7XG4gICAgY29uc3QgcGF0aGZpbmRlciA9IHRoaXMucGF0aGZpbmRlcjtcbiAgICBpZiAoISh0aGlzLnpvbmUgaW4gcGF0aGZpbmRlci56b25lcykpIHJldHVybjtcbiAgICB0aGlzLm5hdkdyb3VwID1cbiAgICAgIHNob3VsZFJlY29tcHV0ZUdyb3VwQW5kTm9kZSB8fCB0aGlzLm5hdkdyb3VwID09PSBudWxsXG4gICAgICAgID8gcGF0aGZpbmRlci5nZXRHcm91cCh0aGlzLnpvbmUsIGVuZCwgdHJ1ZSwgdHJ1ZSlcbiAgICAgICAgOiB0aGlzLm5hdkdyb3VwO1xuICAgIHRoaXMubmF2Tm9kZSA9XG4gICAgICBzaG91bGRSZWNvbXB1dGVHcm91cEFuZE5vZGUgfHxcbiAgICAgIHRoaXMubmF2Tm9kZSA9PT0gbnVsbCB8fFxuICAgICAgdGhpcy5uYXZOb2RlID09PSB1bmRlZmluZWRcbiAgICAgICAgPyB0aGlzLmdldENsb3Nlc3ROb2RlKGVuZClcbiAgICAgICAgOiB0aGlzLm5hdk5vZGU7XG4gICAgaWYgKHRoaXMubmF2Tm9kZSA9PT0gbnVsbCB8fCB0aGlzLm5hdk5vZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gdGhpcy5uYXZOb2RlIGNhbiBiZSBudWxsIGlmIGl0IGhhcyBuZXZlciBiZWVuIHNldCBvciBpZiBnZXRDbG9zZXN0Tm9kZSBmYWlscyxcbiAgICAgIC8vIGFuZCBpdCBjYW4gYmUgdW5kZWZpbmVkIGlmIGNsYW1wU3RlcCBmYWlscywgc28gd2UgaGF2ZSB0byBjaGVjayBib3RoLiBXZSBkbyBub3RcbiAgICAgIC8vIHNpbXBseSBjaGVjayBpZiBpdCBpcyBmYWxzZXkgKCF0aGlzLm5hdk5vZGUpLCBiZWNhdXNlIDAgKHplcm8pIGlzIGEgdmFsaWQgdmFsdWUsXG4gICAgICAvLyBhbmQgMCBpcyBmYWxzZXkuXG4gICAgICBvdXRQb3MuY29weShlbmQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLm5hdk5vZGUgPSBwYXRoZmluZGVyLmNsYW1wU3RlcChcbiAgICAgICAgICBzdGFydCxcbiAgICAgICAgICBlbmQsXG4gICAgICAgICAgdGhpcy5uYXZOb2RlLFxuICAgICAgICAgIHRoaXMuem9uZSxcbiAgICAgICAgICB0aGlzLm5hdkdyb3VwLFxuICAgICAgICAgIG91dFBvc1xuICAgICAgICApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICBvdXRQb3MuY29weShzdGFydCk7XG4gICAgICAgIHRoaXMubmF2Tm9kZSA9IG51bGw7XG4gICAgICAgIHRoaXMubmF2R3JvdXAgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0UG9zO1xuICB9Ki9cblxuICByZW1vdmVOYXZNZXNoRGF0YSgpIHtcbiAgICBpZiAodGhpcy5tZXNoICYmIHRoaXMubWVzaC5nZW9tZXRyeSAmJiB0aGlzLm1lc2guZ2VvbWV0cnkuZGlzcG9zZSkge1xuICAgICAgdGhpcy5tZXNoLmdlb21ldHJ5LmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgdGhpcy5tZXNoID0gbnVsbDtcbiAgICB0aGlzLnBhdGhmaW5kZXIuem9uZXMgPSB7fTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlBhdGhmaW5kaW5nIiwiVEhSRUUiLCJOYXZNZXNoUGF0aGZpbmRlciIsInN0YXJ0aW5nRmVldFBvc2l0aW9uIiwiVmVjdG9yMyIsImRlc2lyZWRGZWV0UG9zaXRpb24iLCJzdGFydFBPVlBvc2l0aW9uIiwiZGVzaXJlZFBPVlBvc2l0aW9uIiwib3V0UE9WUG9zaXRpb24iLCJwbGF5ZXJIZWlnaHQiLCJjb3B5IiwieSIsImZpbmRQb3NpdGlvbk9uTmF2TWVzaCIsImlzRW5hYmxlZCIsInBhdGhmaW5kZXIiLCJ6b25lIiwiem9uZXMiLCJsb2FkTWVzaCIsIm1lc2giLCJjb25zb2xlIiwiZXJyb3IiLCJyZW1vdmVOYXZNZXNoRGF0YSIsImdlb21ldHJ5IiwiYXBwbHlNYXRyaXg0IiwibWF0cml4V29ybGQiLCJzZXRab25lRGF0YSIsImNyZWF0ZVpvbmUiLCJnZXRDbG9zZXN0Tm9kZSIsInBvcyIsImdyb3VwcyIsIm5hdkdyb3VwIiwic3RhcnQiLCJlbmQiLCJvdXRQb3MiLCJzaG91bGRSZWNvbXB1dGVHcm91cEFuZE5vZGUiLCJnZXRHcm91cCIsIm5hdk5vZGUiLCJ1bmRlZmluZWQiLCJjbGFtcFN0ZXAiLCJkaXNwb3NlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/lib/modules/controller/pathFindingPlayer/NavMeshPathfinder.ts\n')},"./src/lib/modules/controller/pathFindingPlayer/NavMeshPlayer.ts":
/*!***********************************************************************!*\
  !*** ./src/lib/modules/controller/pathFindingPlayer/NavMeshPlayer.ts ***!
  \***********************************************************************/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Factory": function() { return /* binding */ Factory; },\n/* harmony export */   "default": function() { return /* binding */ NavMeshPlayer; }\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ "./node_modules/three/build/three.module.js");\n/* harmony import */ var _aptero_axolotis_player__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aptero/axolotis-player */ "../axolotis-player/build/index.js");\n/* harmony import */ var _aptero_axolotis_player__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_aptero_axolotis_player__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _root_lib_modules_controller_pathFindingPlayer_NavMeshPathfinder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @root/lib/modules/controller/pathFindingPlayer/NavMeshPathfinder */ "./src/lib/modules/controller/pathFindingPlayer/NavMeshPathfinder.ts");\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n//import { ServiceEntity } from "@aptero/axolotis-player/build/types/modules/core/service/ServiceEntity";\n\n\nclass Factory {\n  async createComponent(world, config) {\n    let services = world.getFirstComponentByType(_aptero_axolotis_player__WEBPACK_IMPORTED_MODULE_0__.ServiceEntity.name);\n    let three = await services.getService("@aptero/axolotis-core-plugins/modules/three/ThreeLib");\n    let input = await services.getService("@aptero/axolotis-core-plugins/modules/controller/pathFindingPlayer/Input");\n    let playerService = await services.getService("@aptero/axolotis-core-plugins/modules/controller/PlayerService");\n    let frameLoop = await services.getService("@aptero/axolotis-player/modules/FrameLoop"); //let position = new THREE.Vector3(2.14, 1.48, -1.36);\n    //let position = new THREE.Vector3(0,5,0);\n\n    let position = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(config.position && config.position.x || 0, config.position && config.position.y || 0, config.position && config.position.z || 0);\n    let rotation = new three__WEBPACK_IMPORTED_MODULE_2__.Quaternion().setFromAxisAngle(new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 1, 0), -Math.PI * 0.5);\n    let playerControls = new NavMeshPlayer(position, rotation, await three, await input, playerService);\n    playerService.declarePlayer(playerControls);\n    playerControls.Initialize();\n    (await frameLoop).addLoop(NavMeshPlayer.name, delta => {\n      playerControls.Update(delta);\n    });\n    return playerControls;\n  }\n\n}\nconst NAV_ZONE = "character";\nclass NavMeshPlayer {\n  //playerHeight\n  getType() {\n    return NavMeshPlayer.name;\n  }\n\n  askFlyMode() {}\n\n  declareNavMesh(navMesh) {\n    this.navMesh.loadMesh(navMesh, NAV_ZONE);\n  }\n\n  teleportToLocation(x, y, z) {\n    this.position.copy(new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(x, y, z));\n  }\n\n  getHeadPosition(targetCopy) {\n    targetCopy.copy(this.position);\n  }\n\n  constructor(position, rotation, three, input, playerService) {\n    this.input = input;\n    this.playerService = playerService;\n\n    _defineProperty(this, "camera", void 0);\n\n    _defineProperty(this, "timeZeroToMax", void 0);\n\n    _defineProperty(this, "decceleration", void 0);\n\n    _defineProperty(this, "speed", void 0);\n\n    _defineProperty(this, "maxSpeed", void 0);\n\n    _defineProperty(this, "mouseSpeed", void 0);\n\n    _defineProperty(this, "acceleration", void 0);\n\n    _defineProperty(this, "isLocked", void 0);\n\n    _defineProperty(this, "angles", void 0);\n\n    _defineProperty(this, "pitch", void 0);\n\n    _defineProperty(this, "jumpVelocity", void 0);\n\n    _defineProperty(this, "yaw", void 0);\n\n    _defineProperty(this, "tempVec", void 0);\n\n    _defineProperty(this, "moveDir", void 0);\n\n    _defineProperty(this, "yOffset", void 0);\n\n    _defineProperty(this, "xAxis", void 0);\n\n    _defineProperty(this, "yAxis", void 0);\n\n    _defineProperty(this, "position", void 0);\n\n    _defineProperty(this, "positionOutTmp", new three__WEBPACK_IMPORTED_MODULE_2__.Vector3());\n\n    _defineProperty(this, "positionOutTmp2", new three__WEBPACK_IMPORTED_MODULE_2__.Vector3());\n\n    _defineProperty(this, "rotation", void 0);\n\n    _defineProperty(this, "velocity", void 0);\n\n    _defineProperty(this, "navMesh", void 0);\n\n    _defineProperty(this, "OnPointerlockChange", () => {\n      if (document.pointerLockElement) {\n        this.isLocked = true;\n        return;\n      }\n\n      this.isLocked = false;\n    });\n\n    _defineProperty(this, "OnMouseMove", event => {\n      if (!this.isLocked) {\n        return;\n      }\n\n      const {\n        movementX,\n        movementY\n      } = event;\n      this.angles.y -= movementX * this.mouseSpeed;\n      this.angles.x -= movementY * this.mouseSpeed;\n      this.angles.x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, this.angles.x));\n      this.UpdateRotation();\n    });\n\n    _defineProperty(this, "Accelarate", (direction, t) => {\n      const accel = this.tempVec.copy(direction).multiplyScalar(this.acceleration * t);\n      this.speed.add(accel);\n      this.speed.clampLength(0.0, this.maxSpeed);\n    });\n\n    _defineProperty(this, "Deccelerate", t => {\n      const frameDeccel = this.tempVec.copy(this.speed).multiplyScalar(this.decceleration * t);\n      this.speed.add(frameDeccel);\n    });\n\n    this.position = position;\n    this.rotation = rotation;\n    this.navMesh = new _root_lib_modules_controller_pathFindingPlayer_NavMeshPathfinder__WEBPACK_IMPORTED_MODULE_1__.NavMeshPathfinder();\n    this.camera = three.camera;\n    this.timeZeroToMax = 0.08;\n    this.maxSpeed = 7.0;\n    this.speed = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n    this.acceleration = this.maxSpeed / this.timeZeroToMax;\n    this.decceleration = -7.0;\n    this.mouseSpeed = 0.002;\n    this.isLocked = false;\n    this.angles = new three__WEBPACK_IMPORTED_MODULE_2__.Euler();\n    this.pitch = new three__WEBPACK_IMPORTED_MODULE_2__.Quaternion();\n    this.yaw = new three__WEBPACK_IMPORTED_MODULE_2__.Quaternion();\n    this.jumpVelocity = 5;\n    this.yOffset = 2;\n    this.tempVec = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n    this.moveDir = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n    this.xAxis = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(1.0, 0.0, 0.0);\n    this.yAxis = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(0.0, 1.0, 0.0);\n    this.velocity = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n  }\n\n  Initialize() {\n    this.angles.setFromQuaternion(this.rotation);\n    this.UpdateRotation();\n    this.input.AddMouseMoveListner(this.OnMouseMove);\n    document.addEventListener("pointerlockchange", this.OnPointerlockChange);\n    this.input.AddClickListner(() => {\n      if (!this.isLocked) {\n        document.body.requestPointerLock();\n      }\n    });\n  }\n\n  UpdateRotation() {\n    this.pitch.setFromAxisAngle(this.xAxis, this.angles.x);\n    this.yaw.setFromAxisAngle(this.yAxis, this.angles.y);\n    this.rotation.multiplyQuaternions(this.yaw, this.pitch).normalize();\n    this.camera.quaternion.copy(this.rotation);\n  }\n\n  Update(t) {\n    t = t * 0.001;\n    const forwardFactor = this.input.GetKeyDown("KeyS") - this.input.GetKeyDown("KeyW");\n    const rightFactor = this.input.GetKeyDown("KeyD") - this.input.GetKeyDown("KeyA");\n    const direction = this.moveDir.set(rightFactor, 0.0, forwardFactor).normalize();\n    this.Deccelerate(t);\n    this.Accelarate(direction, t);\n    const moveVector = this.tempVec.copy(this.speed);\n    moveVector.applyQuaternion(this.yaw);\n    this.velocity.setX(moveVector.x);\n    this.velocity.setZ(moveVector.z);\n    this.velocity.multiplyScalar(t);\n    this.positionOutTmp.x = this.position.x + this.velocity.x;\n    this.positionOutTmp.y = this.position.y + this.velocity.y;\n    this.positionOutTmp.z = this.position.z + this.velocity.z;\n\n    if (this.navMesh.isEnabled()) {\n      this.navMesh.findPOVPositionAboveNavMesh(this.position, this.positionOutTmp, this.positionOutTmp2);\n    } else {\n      this.positionOutTmp2.copy(this.positionOutTmp);\n    }\n\n    this.camera.position.set(this.positionOutTmp2.x, this.positionOutTmp2.y, this.positionOutTmp2.z);\n    this.position.copy(this.camera.position);\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGliL21vZHVsZXMvY29udHJvbGxlci9wYXRoRmluZGluZ1BsYXllci9OYXZNZXNoUGxheWVyLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFPQTtBQUVPLE1BQU1JLE9BQU4sQ0FFUDtBQUN1QixRQUFmQyxlQUFlLENBQ25CQyxLQURtQixFQUVuQkMsTUFGbUIsRUFHSztBQUN4QixRQUFJQyxRQUFRLEdBQUdGLEtBQUssQ0FBQ0csdUJBQU4sQ0FDYlAsdUVBRGEsQ0FBZjtBQUdBLFFBQUlTLEtBQUssR0FBRyxNQUFNSCxRQUFRLENBQUNJLFVBQVQsQ0FDaEIsc0RBRGdCLENBQWxCO0FBR0EsUUFBSUMsS0FBSyxHQUFHLE1BQU1MLFFBQVEsQ0FBQ0ksVUFBVCxDQUNoQiwwRUFEZ0IsQ0FBbEI7QUFHQSxRQUFJRSxhQUFhLEdBQUcsTUFBTU4sUUFBUSxDQUFDSSxVQUFULENBQ3hCLGdFQUR3QixDQUExQjtBQUdBLFFBQUlHLFNBQVMsR0FBRyxNQUFNUCxRQUFRLENBQUNJLFVBQVQsQ0FDcEIsMkNBRG9CLENBQXRCLENBYndCLENBZ0J4QjtBQUNBOztBQUNBLFFBQUlJLFFBQVEsR0FBRyxJQUFJaEIsMENBQUosQ0FDWk8sTUFBTSxDQUFDUyxRQUFQLElBQW1CVCxNQUFNLENBQUNTLFFBQVAsQ0FBZ0JDLENBQXBDLElBQTBDLENBRDdCLEVBRVpWLE1BQU0sQ0FBQ1MsUUFBUCxJQUFtQlQsTUFBTSxDQUFDUyxRQUFQLENBQWdCRSxDQUFwQyxJQUEwQyxDQUY3QixFQUdaWCxNQUFNLENBQUNTLFFBQVAsSUFBbUJULE1BQU0sQ0FBQ1MsUUFBUCxDQUFnQkcsQ0FBcEMsSUFBMEMsQ0FIN0IsQ0FBZjtBQUtBLFFBQUlDLFFBQVEsR0FBRyxJQUFJcEIsNkNBQUosR0FBdUJzQixnQkFBdkIsQ0FDYixJQUFJdEIsMENBQUosQ0FBa0IsQ0FBbEIsRUFBcUIsQ0FBckIsRUFBd0IsQ0FBeEIsQ0FEYSxFQUViLENBQUN1QixJ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TCxDQUFjM0QsQ0FBeEQ7QUFDQSxTQUFLaUYsY0FBTCxDQUFvQmhGLENBQXBCLEdBQXdCLEtBQUtGLFFBQUwsQ0FBY0UsQ0FBZCxHQUFrQixLQUFLMEQsUUFBTCxDQUFjMUQsQ0FBeEQ7QUFDQSxTQUFLZ0YsY0FBTCxDQUFvQi9FLENBQXBCLEdBQXdCLEtBQUtILFFBQUwsQ0FBY0csQ0FBZCxHQUFrQixLQUFLeUQsUUFBTCxDQUFjekQsQ0FBeEQ7O0FBRUEsUUFBSSxLQUFLaUIsT0FBTCxDQUFhK0QsU0FBYixFQUFKLEVBQThCO0FBQzVCLFdBQUsvRCxPQUFMLENBQWFnRSwyQkFBYixDQUNFLEtBQUtwRixRQURQLEVBRUUsS0FBS2tGLGNBRlAsRUFHRSxLQUFLRyxlQUhQO0FBS0QsS0FORCxNQU1PO0FBQ0wsV0FBS0EsZUFBTCxDQUFxQjlELElBQXJCLENBQTBCLEtBQUsyRCxjQUEvQjtBQUNEOztBQUVELFNBQUtoQyxNQUFMLENBQVlsRCxRQUFaLENBQXFCMkUsR0FBckIsQ0FDRSxLQUFLVSxlQUFMLENBQXFCcEYsQ0FEdkIsRUFFRSxLQUFLb0YsZUFBTCxDQUFxQm5GLENBRnZCLEVBR0UsS0FBS21GLGVBQUwsQ0FBcUJsRixDQUh2QjtBQUtBLFNBQUtILFFBQUwsQ0FBY3VCLElBQWQsQ0FBbUIsS0FBSzJCLE1BQUwsQ0FBWWxELFFBQS9CO0FBQ0Q7O0FBM0w2RCIsInNvdXJjZXMiOlsid2VicGFjazovL2F4b2xvdGlzLWNvcmUtcGx1Z2lucy8uL3NyYy9saWIvbW9kdWxlcy9jb250cm9sbGVyL3BhdGhGaW5kaW5nUGxheWVyL05hdk1lc2hQbGF5ZXIudHM/NjdmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tIFwidGhyZWVcIjtcbmltcG9ydCB7IEV1bGVyLCBRdWF0ZXJuaW9uLCBWZWN0b3IzIH0gZnJvbSBcInRocmVlXCI7XG5pbXBvcnQgeyBGcmFtZUxvb3AgfSBmcm9tIFwiQGFwdGVyby9heG9sb3Rpcy1wbGF5ZXIvYnVpbGQvdHlwZXMvbW9kdWxlcy9GcmFtZUxvb3BcIjtcbmltcG9ydCBDb21wb25lbnQgZnJvbSBcIkBhcHRlcm8vYXhvbG90aXMtcGxheWVyL2J1aWxkL3R5cGVzL21vZHVsZXMvY29yZS9lY3MvQ29tcG9uZW50XCI7XG5pbXBvcnQgeyBXZWJwYWNrTGF6eU1vZHVsZSB9IGZyb20gXCJAYXB0ZXJvL2F4b2xvdGlzLXBsYXllci9idWlsZC90eXBlcy9tb2R1bGVzL2NvcmUvbG9hZGVyL1dlYnBhY2tMb2FkZXJcIjtcbmltcG9ydCB7IENvbXBvbmVudEZhY3RvcnkgfSBmcm9tIFwiQGFwdGVyby9heG9sb3Rpcy1wbGF5ZXIvYnVpbGQvdHlwZXMvbW9kdWxlcy9jb3JlL2Vjcy9Db21wb25lbnRGYWN0b3J5XCI7XG5pbXBvcnQgeyBXb3JsZEVudGl0eSB9IGZyb20gXCJAYXB0ZXJvL2F4b2xvdGlzLXBsYXllci9idWlsZC90eXBlcy9tb2R1bGVzL2NvcmUvZWNzL1dvcmxkRW50aXR5XCI7XG4vL2ltcG9ydCB7IFNlcnZpY2VFbnRpdHkgfSBmcm9tIFwiQGFwdGVyby9heG9sb3Rpcy1wbGF5ZXIvYnVpbGQvdHlwZXMvbW9kdWxlcy9jb3JlL3NlcnZpY2UvU2VydmljZUVudGl0eVwiO1xuaW1wb3J0IHsgU2VydmljZUVudGl0eSB9IGZyb20gXCJAYXB0ZXJvL2F4b2xvdGlzLXBsYXllclwiO1xuaW1wb3J0IHsgVGhyZWVMaWIgfSBmcm9tIFwiQHJvb3QvbGliL21vZHVsZXMvdGhyZWUvVGhyZWVMaWJcIjtcbmltcG9ydCB7IElucHV0IH0gZnJvbSBcIkByb290L2xpYi9tb2R1bGVzL2NvbnRyb2xsZXIvcGF0aEZpbmRpbmdQbGF5ZXIvSW5wdXRcIjtcbmltcG9ydCB7XG4gIFBsYXllcixcbiAgUGxheWVyU2VydmljZSxcbn0gZnJvbSBcIkByb290L2xpYi9tb2R1bGVzL2NvbnRyb2xsZXIvUGxheWVyU2VydmljZVwiO1xuaW1wb3J0IHsgTmF2TWVzaFBhdGhmaW5kZXIgfSBmcm9tIFwiQHJvb3QvbGliL21vZHVsZXMvY29udHJvbGxlci9wYXRoRmluZGluZ1BsYXllci9OYXZNZXNoUGF0aGZpbmRlclwiO1xuXG5leHBvcnQgY2xhc3MgRmFjdG9yeVxuICBpbXBsZW1lbnRzIFdlYnBhY2tMYXp5TW9kdWxlLCBDb21wb25lbnRGYWN0b3J5PE5hdk1lc2hQbGF5ZXI+XG57XG4gIGFzeW5jIGNyZWF0ZUNvbXBvbmVudChcbiAgICB3b3JsZDogV29ybGRFbnRpdHksXG4gICAgY29uZmlnOiBhbnlcbiAgKTogUHJvbWlzZTxOYXZNZXNoUGxheWVyPiB7XG4gICAgbGV0IHNlcnZpY2VzID0gd29ybGQuZ2V0Rmlyc3RDb21wb25lbnRCeVR5cGU8U2VydmljZUVudGl0eT4oXG4gICAgICBTZXJ2aWNlRW50aXR5Lm5hbWVcbiAgICApO1xuICAgIGxldCB0aHJlZSA9IGF3YWl0IHNlcnZpY2VzLmdldFNlcnZpY2U8VGhyZWVMaWI+KFxuICAgICAgXCJAYXB0ZXJvL2F4b2xvdGlzLWNvcmUtcGx1Z2lucy9tb2R1bGVzL3RocmVlL1RocmVlTGliXCJcbiAgICApO1xuICAgIGxldCBpbnB1dCA9IGF3YWl0IHNlcnZpY2VzLmdldFNlcnZpY2U8SW5wdXQ+KFxuICAgICAgXCJAYXB0ZXJvL2F4b2xvdGlzLWNvcmUtcGx1Z2lucy9tb2R1bGVzL2NvbnRyb2xsZXIvcGF0aEZpbmRpbmdQbGF5ZXIvSW5wdXRcIlxuICAgICk7XG4gICAgbGV0IHBsYXllclNlcnZpY2UgPSBhd2FpdCBzZXJ2aWNlcy5nZXRTZXJ2aWNlPFBsYXllclNlcnZpY2U+KFxuICAgICAgXCJAYXB0ZXJvL2F4b2xvdGlzLWNvcmUtcGx1Z2lucy9tb2R1bGVzL2NvbnRyb2xsZXIvUGxheWVyU2VydmljZVwiXG4gICAgKTtcbiAgICBsZXQgZnJhbWVMb29wID0gYXdhaXQgc2VydmljZXMuZ2V0U2VydmljZTxGcmFtZUxvb3A+KFxuICAgICAgXCJAYXB0ZXJvL2F4b2xvdGlzLXBsYXllci9tb2R1bGVzL0ZyYW1lTG9vcFwiXG4gICAgKTtcbiAgICAvL2xldCBwb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKDIuMTQsIDEuNDgsIC0xLjM2KTtcbiAgICAvL2xldCBwb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsNSwwKTtcbiAgICBsZXQgcG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMyhcbiAgICAgIChjb25maWcucG9zaXRpb24gJiYgY29uZmlnLnBvc2l0aW9uLngpIHx8IDAsXG4gICAgICAoY29uZmlnLnBvc2l0aW9uICYmIGNvbmZpZy5wb3NpdGlvbi55KSB8fCAwLFxuICAgICAgKGNvbmZpZy5wb3NpdGlvbiAmJiBjb25maWcucG9zaXRpb24ueikgfHwgMFxuICAgICk7XG4gICAgbGV0IHJvdGF0aW9uID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKS5zZXRGcm9tQXhpc0FuZ2xlKFxuICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoMCwgMSwgMCksXG4gICAgICAtTWF0aC5QSSAqIDAuNVxuICAgICk7XG4gICAgbGV0IHBsYXllckNvbnRyb2xzID0gbmV3IE5hdk1lc2hQbGF5ZXIoXG4gICAgICBwb3NpdGlvbixcbiAgICAgIHJvdGF0aW9uLFxuICAgICAgYXdhaXQgdGhyZWUsXG4gICAgICBhd2FpdCBpbnB1dCxcbiAgICAgIHBsYXllclNlcnZpY2VcbiAgICApO1xuICAgIHBsYXllclNlcnZpY2UuZGVjbGFyZVBsYXllcihwbGF5ZXJDb250cm9scyk7XG4gICAgcGxheWVyQ29udHJvbHMuSW5pdGlhbGl6ZSgpO1xuICAgIChhd2FpdCBmcmFtZUxvb3ApLmFkZExvb3AoTmF2TWVzaFBsYXllci5uYW1lLCAoZGVsdGEpID0+IHtcbiAgICAgIHBsYXllckNvbnRyb2xzLlVwZGF0ZShkZWx0YSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHBsYXllckNvbnRyb2xzO1xuICB9XG59XG5cbmNvbnN0IE5BVl9aT05FID0gXCJjaGFyYWN0ZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmF2TWVzaFBsYXllciBpbXBsZW1lbnRzIENvbXBvbmVudCwgUGxheWVyIHtcbiAgcHJpdmF0ZSBjYW1lcmE6IGFueTtcbiAgcHJpdmF0ZSB0aW1lWmVyb1RvTWF4OiBudW1iZXI7XG4gIHByaXZhdGUgZGVjY2VsZXJhdGlvbjogbnVtYmVyO1xuICBwcml2YXRlIHNwZWVkOiBWZWN0b3IzO1xuICBwcml2YXRlIG1heFNwZWVkOiBudW1iZXI7XG4gIHByaXZhdGUgbW91c2VTcGVlZDogbnVtYmVyO1xuICBwcml2YXRlIGFjY2VsZXJhdGlvbjogbnVtYmVyO1xuICBwcml2YXRlIGlzTG9ja2VkOiBib29sZWFuO1xuICBwcml2YXRlIGFuZ2xlczogRXVsZXI7XG4gIHByaXZhdGUgcGl0Y2g6IFF1YXRlcm5pb247XG4gIHByaXZhdGUganVtcFZlbG9jaXR5OiBudW1iZXI7XG4gIHByaXZhdGUgeWF3OiBRdWF0ZXJuaW9uO1xuICBwcml2YXRlIHRlbXBWZWM6IFZlY3RvcjM7XG4gIHByaXZhdGUgbW92ZURpcjogVmVjdG9yMztcbiAgcHJpdmF0ZSB5T2Zmc2V0OiBudW1iZXI7IC8vcGxheWVySGVpZ2h0XG4gIHByaXZhdGUgeEF4aXM6IFZlY3RvcjM7XG4gIHByaXZhdGUgeUF4aXM6IFZlY3RvcjM7XG4gIHByaXZhdGUgcG9zaXRpb246IFZlY3RvcjM7XG4gIHByaXZhdGUgcG9zaXRpb25PdXRUbXA6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygpO1xuICBwcml2YXRlIHBvc2l0aW9uT3V0VG1wMjogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKCk7XG4gIHByaXZhdGUgcm90YXRpb246IFF1YXRlcm5pb247XG4gIHByaXZhdGUgdmVsb2NpdHk6IFZlY3RvcjM7XG4gIHByaXZhdGUgbmF2TWVzaDogTmF2TWVzaFBhdGhmaW5kZXI7XG5cbiAgZ2V0VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBOYXZNZXNoUGxheWVyLm5hbWU7XG4gIH1cblxuICBhc2tGbHlNb2RlKCkge31cblxuICBkZWNsYXJlTmF2TWVzaChcbiAgICBuYXZNZXNoOiBUSFJFRS5NZXNoPFRIUkVFLkJ1ZmZlckdlb21ldHJ5LCBUSFJFRS5NYXRlcmlhbCB8IFRIUkVFLk1hdGVyaWFsW10+XG4gICkge1xuICAgIHRoaXMubmF2TWVzaC5sb2FkTWVzaChuYXZNZXNoLCBOQVZfWk9ORSk7XG4gIH1cblxuICB0ZWxlcG9ydFRvTG9jYXRpb24oeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikge1xuICAgIHRoaXMucG9zaXRpb24uY29weShuZXcgVEhSRUUuVmVjdG9yMyh4LCB5LCB6KSk7XG4gIH1cblxuICBnZXRIZWFkUG9zaXRpb24odGFyZ2V0Q29weTogVEhSRUUuVmVjdG9yMyk6IHZvaWQge1xuICAgIHRhcmdldENvcHkuY29weSh0aGlzLnBvc2l0aW9uKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHBvc2l0aW9uLFxuICAgIHJvdGF0aW9uLFxuICAgIHRocmVlOiBUaHJlZUxpYixcbiAgICBwcml2YXRlIGlucHV0OiBJbnB1dCxcbiAgICBwcml2YXRlIHBsYXllclNlcnZpY2U6IFBsYXllclNlcnZpY2VcbiAgKSB7XG4gICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgIHRoaXMucm90YXRpb24gPSByb3RhdGlvbjtcbiAgICB0aGlzLm5hdk1lc2ggPSBuZXcgTmF2TWVzaFBhdGhmaW5kZXIoKTtcblxuICAgIHRoaXMuY2FtZXJhID0gdGhyZWUuY2FtZXJhO1xuXG4gICAgdGhpcy50aW1lWmVyb1RvTWF4ID0gMC4wODtcblxuICAgIHRoaXMubWF4U3BlZWQgPSA3LjA7XG4gICAgdGhpcy5zcGVlZCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgdGhpcy5hY2NlbGVyYXRpb24gPSB0aGlzLm1heFNwZWVkIC8gdGhpcy50aW1lWmVyb1RvTWF4O1xuICAgIHRoaXMuZGVjY2VsZXJhdGlvbiA9IC03LjA7XG5cbiAgICB0aGlzLm1vdXNlU3BlZWQgPSAwLjAwMjtcbiAgICB0aGlzLmlzTG9ja2VkID0gZmFsc2U7XG5cbiAgICB0aGlzLmFuZ2xlcyA9IG5ldyBUSFJFRS5FdWxlcigpO1xuICAgIHRoaXMucGl0Y2ggPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xuICAgIHRoaXMueWF3ID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcblxuICAgIHRoaXMuanVtcFZlbG9jaXR5ID0gNTtcbiAgICB0aGlzLnlPZmZzZXQgPSAyO1xuICAgIHRoaXMudGVtcFZlYyA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgdGhpcy5tb3ZlRGlyID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICB0aGlzLnhBeGlzID0gbmV3IFRIUkVFLlZlY3RvcjMoMS4wLCAwLjAsIDAuMCk7XG4gICAgdGhpcy55QXhpcyA9IG5ldyBUSFJFRS5WZWN0b3IzKDAuMCwgMS4wLCAwLjApO1xuICAgIHRoaXMudmVsb2NpdHkgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICB9XG5cbiAgSW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLmFuZ2xlcy5zZXRGcm9tUXVhdGVybmlvbih0aGlzLnJvdGF0aW9uKTtcbiAgICB0aGlzLlVwZGF0ZVJvdGF0aW9uKCk7XG5cbiAgICB0aGlzLmlucHV0LkFkZE1vdXNlTW92ZUxpc3RuZXIodGhpcy5Pbk1vdXNlTW92ZSk7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmxvY2tjaGFuZ2VcIiwgdGhpcy5PblBvaW50ZXJsb2NrQ2hhbmdlKTtcblxuICAgIHRoaXMuaW5wdXQuQWRkQ2xpY2tMaXN0bmVyKCgpID0+IHtcbiAgICAgIGlmICghdGhpcy5pc0xvY2tlZCkge1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlcXVlc3RQb2ludGVyTG9jaygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgT25Qb2ludGVybG9ja0NoYW5nZSA9ICgpID0+IHtcbiAgICBpZiAoZG9jdW1lbnQucG9pbnRlckxvY2tFbGVtZW50KSB7XG4gICAgICB0aGlzLmlzTG9ja2VkID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmlzTG9ja2VkID0gZmFsc2U7XG4gIH07XG5cbiAgT25Nb3VzZU1vdmUgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAoIXRoaXMuaXNMb2NrZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7IG1vdmVtZW50WCwgbW92ZW1lbnRZIH0gPSBldmVudDtcblxuICAgIHRoaXMuYW5nbGVzLnkgLT0gbW92ZW1lbnRYICogdGhpcy5tb3VzZVNwZWVkO1xuICAgIHRoaXMuYW5nbGVzLnggLT0gbW92ZW1lbnRZICogdGhpcy5tb3VzZVNwZWVkO1xuXG4gICAgdGhpcy5hbmdsZXMueCA9IE1hdGgubWF4KFxuICAgICAgLU1hdGguUEkgLyAyLFxuICAgICAgTWF0aC5taW4oTWF0aC5QSSAvIDIsIHRoaXMuYW5nbGVzLngpXG4gICAgKTtcblxuICAgIHRoaXMuVXBkYXRlUm90YXRpb24oKTtcbiAgfTtcblxuICBVcGRhdGVSb3RhdGlvbigpIHtcbiAgICB0aGlzLnBpdGNoLnNldEZyb21BeGlzQW5nbGUodGhpcy54QXhpcywgdGhpcy5hbmdsZXMueCk7XG4gICAgdGhpcy55YXcuc2V0RnJvbUF4aXNBbmdsZSh0aGlzLnlBeGlzLCB0aGlzLmFuZ2xlcy55KTtcblxuICAgIHRoaXMucm90YXRpb24ubXVsdGlwbHlRdWF0ZXJuaW9ucyh0aGlzLnlhdywgdGhpcy5waXRjaCkubm9ybWFsaXplKCk7XG5cbiAgICB0aGlzLmNhbWVyYS5xdWF0ZXJuaW9uLmNvcHkodGhpcy5yb3RhdGlvbik7XG4gIH1cblxuICBBY2NlbGFyYXRlID0gKGRpcmVjdGlvbiwgdCkgPT4ge1xuICAgIGNvbnN0IGFjY2VsID0gdGhpcy50ZW1wVmVjXG4gICAgICAuY29weShkaXJlY3Rpb24pXG4gICAgICAubXVsdGlwbHlTY2FsYXIodGhpcy5hY2NlbGVyYXRpb24gKiB0KTtcbiAgICB0aGlzLnNwZWVkLmFkZChhY2NlbCk7XG4gICAgdGhpcy5zcGVlZC5jbGFtcExlbmd0aCgwLjAsIHRoaXMubWF4U3BlZWQpO1xuICB9O1xuXG4gIERlY2NlbGVyYXRlID0gKHQpID0+IHtcbiAgICBjb25zdCBmcmFtZURlY2NlbCA9IHRoaXMudGVtcFZlY1xuICAgICAgLmNvcHkodGhpcy5zcGVlZClcbiAgICAgIC5tdWx0aXBseVNjYWxhcih0aGlzLmRlY2NlbGVyYXRpb24gKiB0KTtcbiAgICB0aGlzLnNwZWVkLmFkZChmcmFtZURlY2NlbCk7XG4gIH07XG5cbiAgVXBkYXRlKHQpIHtcbiAgICB0ID0gdCAqIDAuMDAxO1xuICAgIGNvbnN0IGZvcndhcmRGYWN0b3IgPVxuICAgICAgdGhpcy5pbnB1dC5HZXRLZXlEb3duKFwiS2V5U1wiKSAtIHRoaXMuaW5wdXQuR2V0S2V5RG93bihcIktleVdcIik7XG4gICAgY29uc3QgcmlnaHRGYWN0b3IgPVxuICAgICAgdGhpcy5pbnB1dC5HZXRLZXlEb3duKFwiS2V5RFwiKSAtIHRoaXMuaW5wdXQuR2V0S2V5RG93bihcIktleUFcIik7XG4gICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5tb3ZlRGlyXG4gICAgICAuc2V0KHJpZ2h0RmFjdG9yLCAwLjAsIGZvcndhcmRGYWN0b3IpXG4gICAgICAubm9ybWFsaXplKCk7XG5cbiAgICB0aGlzLkRlY2NlbGVyYXRlKHQpO1xuICAgIHRoaXMuQWNjZWxhcmF0ZShkaXJlY3Rpb24sIHQpO1xuXG4gICAgY29uc3QgbW92ZVZlY3RvciA9IHRoaXMudGVtcFZlYy5jb3B5KHRoaXMuc3BlZWQpO1xuICAgIG1vdmVWZWN0b3IuYXBwbHlRdWF0ZXJuaW9uKHRoaXMueWF3KTtcblxuICAgIHRoaXMudmVsb2NpdHkuc2V0WChtb3ZlVmVjdG9yLngpO1xuICAgIHRoaXMudmVsb2NpdHkuc2V0Wihtb3ZlVmVjdG9yLnopO1xuICAgIHRoaXMudmVsb2NpdHkubXVsdGlwbHlTY2FsYXIodCk7XG5cbiAgICB0aGlzLnBvc2l0aW9uT3V0VG1wLnggPSB0aGlzLnBvc2l0aW9uLnggKyB0aGlzLnZlbG9jaXR5Lng7XG4gICAgdGhpcy5wb3NpdGlvbk91dFRtcC55ID0gdGhpcy5wb3NpdGlvbi55ICsgdGhpcy52ZWxvY2l0eS55O1xuICAgIHRoaXMucG9zaXRpb25PdXRUbXAueiA9IHRoaXMucG9zaXRpb24ueiArIHRoaXMudmVsb2NpdHkuejtcblxuICAgIGlmICh0aGlzLm5hdk1lc2guaXNFbmFibGVkKCkpIHtcbiAgICAgIHRoaXMubmF2TWVzaC5maW5kUE9WUG9zaXRpb25BYm92ZU5hdk1lc2goXG4gICAgICAgIHRoaXMucG9zaXRpb24sXG4gICAgICAgIHRoaXMucG9zaXRpb25PdXRUbXAsXG4gICAgICAgIHRoaXMucG9zaXRpb25PdXRUbXAyXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBvc2l0aW9uT3V0VG1wMi5jb3B5KHRoaXMucG9zaXRpb25PdXRUbXApO1xuICAgIH1cblxuICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnNldChcbiAgICAgIHRoaXMucG9zaXRpb25PdXRUbXAyLngsXG4gICAgICB0aGlzLnBvc2l0aW9uT3V0VG1wMi55LFxuICAgICAgdGhpcy5wb3NpdGlvbk91dFRtcDIuelxuICAgICk7XG4gICAgdGhpcy5wb3NpdGlvbi5jb3B5KHRoaXMuY2FtZXJhLnBvc2l0aW9uKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlRIUkVFIiwiVmVjdG9yMyIsIlNlcnZpY2VFbnRpdHkiLCJOYXZNZXNoUGF0aGZpbmRlciIsIkZhY3RvcnkiLCJjcmVhdGVDb21wb25lbnQiLCJ3b3JsZCIsImNvbmZpZyIsInNlcnZpY2VzIiwiZ2V0Rmlyc3RDb21wb25lbnRCeVR5cGUiLCJuYW1lIiwidGhyZWUiLCJnZXRTZXJ2aWNlIiwiaW5wdXQiLCJwbGF5ZXJTZXJ2aWNlIiwiZnJhbWVMb29wIiwicG9zaXRpb24iLCJ4IiwieSIsInoiLCJyb3RhdGlvbiIsIlF1YXRlcm5pb24iLCJzZXRGcm9tQXhpc0FuZ2xlIiwiTWF0aCIsIlBJIiwicGxheWVyQ29udHJvbHMiLCJOYXZNZXNoUGxheWVyIiwiZGVjbGFyZVBsYXllciIsIkluaXRpYWxpemUiLCJhZGRMb29wIiwiZGVsdGEiLCJVcGRhdGUiLCJOQVZfWk9ORSIsImdldFR5cGUiLCJhc2tGbHlNb2RlIiwiZGVjbGFyZU5hdk1lc2giLCJuYXZNZXNoIiwibG9hZE1lc2giLCJ0ZWxlcG9ydFRvTG9jYXRpb24iLCJjb3B5IiwiZ2V0SGVhZFBvc2l0aW9uIiwidGFyZ2V0Q29weSIsImNvbnN0cnVjdG9yIiwiZG9jdW1lbnQiLCJwb2ludGVyTG9ja0VsZW1lbnQiLCJpc0xvY2tlZCIsImV2ZW50IiwibW92ZW1lbnRYIiwibW92ZW1lbnRZIiwiYW5nbGVzIiwibW91c2VTcGVlZCIsIm1heCIsIm1pbiIsIlVwZGF0ZVJvdGF0aW9uIiwiZGlyZWN0aW9uIiwidCIsImFjY2VsIiwidGVtcFZlYyIsIm11bHRpcGx5U2NhbGFyIiwiYWNjZWxlcmF0aW9uIiwic3BlZWQiLCJhZGQiLCJjbGFtcExlbmd0aCIsIm1heFNwZWVkIiwiZnJhbWVEZWNjZWwiLCJkZWNjZWxlcmF0aW9uIiwiY2FtZXJhIiwidGltZVplcm9Ub01heCIsIkV1bGVyIiwicGl0Y2giLCJ5YXciLCJqdW1wVmVsb2NpdHkiLCJ5T2Zmc2V0IiwibW92ZURpciIsInhBeGlzIiwieUF4aXMiLCJ2ZWxvY2l0eSIsInNldEZyb21RdWF0ZXJuaW9uIiwiQWRkTW91c2VNb3ZlTGlzdG5lciIsIk9uTW91c2VNb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIk9uUG9pbnRlcmxvY2tDaGFuZ2UiLCJBZGRDbGlja0xpc3RuZXIiLCJib2R5IiwicmVxdWVzdFBvaW50ZXJMb2NrIiwibXVsdGlwbHlRdWF0ZXJuaW9ucyIsIm5vcm1hbGl6ZSIsInF1YXRlcm5pb24iLCJmb3J3YXJkRmFjdG9yIiwiR2V0S2V5RG93biIsInJpZ2h0RmFjdG9yIiwic2V0IiwiRGVjY2VsZXJhdGUiLCJBY2NlbGFyYXRlIiwibW92ZVZlY3RvciIsImFwcGx5UXVhdGVybmlvbiIsInNldFgiLCJzZXRaIiwicG9zaXRpb25PdXRUbXAiLCJpc0VuYWJsZWQiLCJmaW5kUE9WUG9zaXRpb25BYm92ZU5hdk1lc2giLCJwb3NpdGlvbk91dFRtcDIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/lib/modules/controller/pathFindingPlayer/NavMeshPlayer.ts\n')}}]);