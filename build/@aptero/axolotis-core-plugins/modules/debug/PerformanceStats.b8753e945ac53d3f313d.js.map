{"version":3,"file":"@aptero/axolotis-core-plugins/modules/debug/PerformanceStats.b8753e945ac53d3f313d.js","mappings":";;;;;;;;;;;qNASO,MAAMA,EACQ,oBAACC,GAClB,IAAIC,QAAkBD,EAASE,WAC7B,6CAEF,OAAO,IAAIC,EAASF,EAAWD,IAI5B,MAAMG,EACXC,YAAYH,EAAsBI,GAgBhCC,OAAOC,SAASC,KAAKC,mBAAmB,YAdtC,uYAeF,IAAIC,EAAcJ,OAAOC,SAASI,eAAe,aAC7CD,IACFA,EAAYE,QAAWC,IACrBA,EAAIC,kBACJD,EAAIE,iBACJV,EAAcH,WACZ,iEAGJD,EAAUe,QAAQb,EAASc,MAAOC,IAC/BR,EAAoBS,UACnBC,KAAKC,MAAO,EAAMH,EAAS,KAAQ,WAGrCZ,OAAOgB,SAASC,KAAKC,WAAW,cAClCnB,EAAcH,WACZ,gEAKNuB,UACE,OAAOtB,EAASc,Q,oHC1DpB,IAAIS,EAAQ,WAEX,IAAIC,EAAO,EAEPC,EAAYrB,SAASsB,cAAe,OAWxC,SAASC,EAAUC,GAGlB,OADAH,EAAUI,YAAaD,EAAME,KACtBF,EAIR,SAASG,EAAWC,GAEnB,IAAM,IAAIC,EAAI,EAAGA,EAAIR,EAAUS,SAASC,OAAQF,IAE/CR,EAAUS,SAAUD,GAAIG,MAAMC,QAAUJ,IAAMD,EAAK,QAAU,OAI9DR,EAAOQ,EAzBRP,EAAUW,MAAME,QAAU,uEAC1Bb,EAAUc,iBAAkB,SAAS,SAAWC,GAE/CA,EAAM5B,iBACNmB,IAAcP,EAAOC,EAAUS,SAASC,WAEtC,GAyBH,IAAIM,GAAcC,aAAeC,MAAOC,MAAOC,EAAWJ,EAAWK,EAAS,EAE1EC,EAAWpB,EAAU,IAAIJ,EAAMyB,MAAO,MAAO,OAAQ,SACrDC,EAAUtB,EAAU,IAAIJ,EAAMyB,MAAO,KAAM,OAAQ,SAEvD,GAAKE,KAAKR,aAAeQ,KAAKR,YAAYS,OAEzC,IAAIC,EAAWzB,EAAU,IAAIJ,EAAMyB,MAAO,KAAM,OAAQ,SAMzD,OAFAjB,EAAW,GAEJ,CAENsB,SAAU,GAEVvB,IAAKL,EAELE,SAAUA,EACVI,UAAWA,EAEXuB,MAAO,WAENb,GAAcC,aAAeC,MAAOC,OAIrCW,IAAK,WAEJT,IAEA,IAAIU,GAASd,aAAeC,MAAOC,MAInC,GAFAK,EAAQQ,OAAQD,EAAOf,EAAW,KAE7Be,GAAQX,EAAW,MAEvBE,EAASU,OAAmB,IAATX,GAAoBU,EAAOX,GAAY,KAE1DA,EAAWW,EACXV,EAAS,EAEJM,GAAW,CAEf,IAAID,EAAST,YAAYS,OACzBC,EAASK,OAAQN,EAAOO,eAAiB,QAASP,EAAOQ,gBAAkB,SAM7E,OAAOH,GAIRC,OAAQ,WAEPhB,EAAYmB,KAAKL,OAMlBM,WAAYpC,EACZqC,QAAS/B,IAMXR,EAAMyB,MAAQ,SAAWlC,EAAMiD,EAAIC,GAElC,IAAIC,EAAMC,EAAAA,EAAUC,EAAM,EAAGjD,EAAQD,KAAKC,MACtCkD,EAAKlD,EAAOf,OAAOkE,kBAAoB,GAEvCC,EAAQ,GAAKF,EAAIG,EAAS,GAAKH,EAClCI,EAAS,EAAIJ,EAAIK,EAAS,EAAIL,EAC9BM,EAAU,EAAIN,EAAIO,EAAU,GAAKP,EACjCQ,EAAc,GAAKR,EAAIS,EAAe,GAAKT,EAExCU,EAAS1E,SAASsB,cAAe,UACrCoD,EAAOC,MAAQT,EACfQ,EAAOE,OAAST,EAChBO,EAAO1C,MAAME,QAAU,yBAEvB,IAAI2C,EAAUH,EAAOI,WAAY,MAejC,OAdAD,EAAQE,KAAO,QAAY,EAAIf,EAAO,gCACtCa,EAAQG,aAAe,MAEvBH,EAAQI,UAAYrB,EACpBiB,EAAQK,SAAU,EAAG,EAAGhB,EAAOC,GAE/BU,EAAQI,UAAYtB,EACpBkB,EAAQM,SAAUzE,EAAM0D,EAAQC,GAChCQ,EAAQK,SAAUZ,EAASC,EAASC,EAAaC,GAEjDI,EAAQI,UAAYrB,EACpBiB,EAAQO,YAAc,GACtBP,EAAQK,SAAUZ,EAASC,EAASC,EAAaC,GAE1C,CAEN/C,IAAKgD,EAELrB,OAAQ,SAAWgC,EAAOC,GAEzBzB,EAAMhD,KAAKgD,IAAKA,EAAKwB,GACrBtB,EAAMlD,KAAKkD,IAAKA,EAAKsB,GAErBR,EAAQI,UAAYrB,EACpBiB,EAAQO,YAAc,EACtBP,EAAQK,SAAU,EAAG,EAAGhB,EAAOK,GAC/BM,EAAQI,UAAYtB,EACpBkB,EAAQM,SAAUrE,EAAOuE,GAAU,IAAM3E,EAAO,KAAOI,EAAO+C,GAAQ,IAAM/C,EAAOiD,GAAQ,IAAKK,EAAQC,GAExGQ,EAAQU,UAAWb,EAAQJ,EAAUN,EAAIO,EAASC,EAAcR,EAAIS,EAAcH,EAASC,EAASC,EAAcR,EAAIS,GAEtHI,EAAQK,SAAUZ,EAAUE,EAAcR,EAAIO,EAASP,EAAIS,GAE3DI,EAAQI,UAAYrB,EACpBiB,EAAQO,YAAc,GACtBP,EAAQK,SAAUZ,EAAUE,EAAcR,EAAIO,EAASP,EAAIlD,GAAS,EAAMuE,EAAQC,GAAeb,OAQpG,Q,kCCtKA,MAsIMe,EAASC,EAAQ,KACHA,EAAQ,KAIrB,MAAMjG,EACQ,oBAACC,GAClB,IAAIiG,QAAiBjG,EAASE,WAC5B,wDAEED,QAAkBD,EAASE,WAC7B,6CAEEgG,QAAqBlG,EAASE,WAChC,qDAEF,OAAO,IAAIiG,EAAiBF,EAAUhG,EAAWiG,IAI9C,MAAMC,EAEX/F,YACU6F,EACRhG,EACQiG,G,UAER,GADA,KAHQD,SAAAA,EAGR,KADQC,aAAAA,E,OACR,G,EAAA,Q,EAAA,M,sFACI5F,OAAO8F,yBACT,OAEF9F,OAAO8F,0BAA2B,EAClCC,QAAQC,KACN,2GAEF,MAAMC,EAAQ7E,IAKd,GAJA6E,EAAMrE,UAAU,GAChB3B,SAASC,KAAKwB,YAAYuE,EAAMtE,KAChC8B,KAAKyC,eACLlG,OAAOC,SAASC,KAAKC,mBAAmB,YA3K1C,65EA4KMyF,EAAaO,gBAAiB,CAChC,MAAMC,EAAWC,IAEfC,sBAAsBF,GACtBH,EAAM3C,SACNG,KAAK8C,KAAKjD,SACVG,KAAK8C,GAAG,aAAanD,MACrBK,KAAK8C,GAAG,aAAaC,SAEvBF,sBAAsBF,GAGxBR,EAAaa,iBAAgB,KAC3BhD,KAAKiD,yBACJ,GAGLR,eACE,IAAIS,EAAsB1G,SAASC,KAAK0G,uBAAuB,WAC7B,GAA9BD,EAAoB3E,QACtB2E,EAAoB,GAAGE,SAMzB,IAAIC,EAAc,CAChBC,IAAK,GACLC,OAAQ,CACNC,UAAW,CAAEC,QAAS,aAAcC,KAAM,KAE5CC,OAAQ,GACRC,QAPc,CAFG,IAAIrH,OAAOsH,WAAW7D,KAAKkC,SAAS4B,YAWvD,IAAK,IAAIzF,EAAI,EAAGA,EAAI2B,KAAKmC,aAAa4B,YAAYxF,OAAQF,IACxDgF,EAAOE,OAAOS,EAAAA,UAAAA,KAAAA,cAA+B,IAAM3F,GAAK,CACtDoF,QAASO,EAAAA,UAAAA,KAAiB,QAC1BN,KAAM,IAERL,EAAOE,OAAOU,EAAS,SAATA,KAAAA,cAA8B,IAAM5F,GAAK,CACrDoF,QAASQ,EAAS,SAATA,KAAgB,SAE3BZ,EAAOE,OAAOW,EAAAA,QAAAA,KAAAA,cAAmC,IAAM7F,GAAK,CAC1DoF,QAASS,EAAAA,QAAAA,KAAqB,SAEhCb,EAAOE,OAAOnH,EAAS,SAATA,KAAAA,cAA8B,IAAMiC,GAAK,CACrDoF,QAASrH,EAAS,SAATA,KAAgB,SAE3BiH,EAAOE,OAAOnB,EAAiBlF,KAAKiH,cAAgB,IAAM9F,GAAK,CAC7DoF,QAASrB,EAAiBlF,KAAO,SAGnCmG,EAAOM,OAAOS,KAAK,CACjBX,QAAS,WAAapF,EACtBkF,OAAQ,CACNS,EAAAA,UAAAA,KAAAA,cAA+B,IAAM3F,EACrC4F,EAAS,SAATA,KAAAA,cAA8B,IAAM5F,EACpC6F,EAAAA,QAAAA,KAAAA,cAAmC,IAAM7F,KAK/C2B,KAAK8C,GAAK,IAAId,EAAOqB,GAGvBJ,sBACEX,QAAQ+B,IAAI,cAAerE,KAAKmC,aAAa4B,aAC7C/D,KAAKyC,eACLzC,KAAKmC,aAAa4B,YAAYO,SAAQC,MAAOC,EAAOC,KAClD,IAAIxI,EAAWuI,EAAME,wBACnBC,EAAAA,cAAAA,aAEoB1I,EAASE,WAC7B,8CAEQyI,uBACP1H,IACC8C,KAAK8C,GAAG5F,EAAKiH,cAAgB,IAAMM,GAAO1B,WAE3C7F,IACC8C,KAAK8C,GAAG5F,EAAKiH,cAAgB,IAAMM,GAAO9E,YAMlDjC,UACE,OAAO0E,EAAiBlF,Q,gBClQ5BX,OAAOsI,QAAU,WACf,IAAIC,EAAM,KAENC,EAAwB,EAC1BC,EAA0B,EAC1BC,EAAwB,EACxBC,EAAc,EACdC,EAAiB,EACjBC,EAAe,EACfC,EAAoB,EAEtB,SAASC,EAAGC,EAAGC,GACb,OAAO,WACLA,EAAEC,MAAMzF,KAAM0F,WACdH,EAAEE,MAAMzF,KAAM0F,YAIlBC,sBAAsBC,UAAUC,WAAaP,EAC3CK,sBAAsBC,UAAUC,YAChC,WACEd,IACIW,UAAU,IAAM1F,KAAK8F,OAAQV,GAAgBM,UAAU,GACtDP,GAAkBO,UAAU,MAIrCC,sBAAsBC,UAAUG,aAAeT,EAC7CK,sBAAsBC,UAAUG,cAChC,WACEf,IACAE,GAAeQ,UAAU,GAAK,EAC9BP,GAAkBO,UAAU,MAIhCC,sBAAsBC,UAAUI,WAAaV,EAC3CK,sBAAsBC,UAAUI,YAChC,WACEf,OAIJU,sBAAsBC,UAAUK,YAAcX,EAC5CK,sBAAsBC,UAAUK,aAChC,WACEZ,OAmEJ,MAAO,CACLxF,OA5BF,WACEiF,EAAI,YAAYoB,IAAInB,EAAwBC,GAC5CF,EAAI,gBAAgBoB,IAAIlB,GACxBF,EAAI,cAAcoB,IAAInB,GACtBD,EAAI,eAAeoB,IAAIb,GACvBP,EAAI,cAAcoB,IAAIjB,GACtBH,EAAI,WAAWoB,IAAIhB,GACnBJ,EAAI,cAAcoB,IAAIf,GACtBL,EAAI,YAAYoB,IAAId,IAqBpBrC,MAlBF,WACEgC,EAAwB,EACxBC,EAA0B,EAC1BC,EAAwB,EACxBC,EAAc,EACdC,EAAiB,EACjBC,EAAe,EACfC,EAAoB,GAYpB1F,IATF,aAUEwG,OARF,SAAiBC,GACftB,EAAMsB,GAQN7C,OApEY,CACZ8C,SAAU,CACR3C,KAAM,IACND,QAAS,gBAEX6C,aAAc,CACZ7C,QAAS,uBAEX8C,WAAY,CACV9C,QAAS,sBA4DXE,OAxDY,CACZ,CACEF,QAAS,QACTF,OAAQ,CACN,WACA,eACA,aACA,aACA,cACA,UACA,aACA,cA8CJiD,UAzCe,CACf,CACEC,KAAM,WACNC,MAAO,CAAC,eAAgB,kBA0C9BnK,OAAOsH,WAAa,SAAUC,GAC5B,IAAIgB,EAAM,KA8DV,MAAO,CACLjF,OAlBF,WACEiF,EAAI,mCAAmCoB,IAAIpC,EAAS6C,KAAKpH,OAAOqH,YAChE9B,EAAI,0BAA0BoB,IAAIpC,EAAS6C,KAAKE,SAAStI,QACzDuG,EAAI,iCAAiCoB,IAAIpC,EAAS6C,KAAKpH,OAAOuH,UAC9DhC,EAAI,8BAA8BoB,IAAIpC,EAAS6C,KAAKI,OAAOC,OAC3DlC,EAAI,kCAAkCoB,IAAIpC,EAAS6C,KAAKI,OAAOE,WAC/DnC,EAAI,+BAA+BoB,IAAIpC,EAAS6C,KAAKI,OAAOG,SAa5DnE,MAVF,aAWEpD,IATF,aAUEwG,OARF,SAAiBC,GACftB,EAAMsB,GAQN7C,OAjEY,CACZ,kCAAmC,CACjCE,QAAS,cAEX,gCAAiC,CAC/BA,QAAS,YAEX,yBAA0B,CACxBA,QAAS,YAEX,6BAA8B,CAC5BA,QAAS,SAEX,iCAAkC,CAChCA,QAAS,YACTC,KAAM,KAER,8BAA+B,CAC7BD,QAAS,WAgDXE,OA5CY,CACZ,CACEF,QAAS,oBACTF,OAAQ,CACN,kCACA,yBACA,kCAGJ,CACEE,QAAS,oBACTF,OAAQ,CACN,6BACA,iCACA,iCA+BJiD,UA1Be,KAkCnBjK,OAAO4K,aAAe,WACpB,IAAIrC,EAAM,KAENsC,EAAkB,EACpBC,EAAmB,EAEjB9K,OAAOuC,cAAgBA,YAAYS,SACrCT,YAAYS,OAAS,CACnBO,eAAgB,EAChBwH,gBAAiB,IAIsB,IAAvCxI,YAAYS,OAAO+H,iBACrBhF,QAAQC,KACN,6EAIJ,IA0BIgF,EAAUlK,KAAKgH,IAAI,MAEvB,SAASmD,EAAMC,GACb,IACIpJ,EAAIhB,KAAKqK,MAAMrK,KAAKgH,IAAIoD,GAAKF,GACjC,OAAOlK,KAAKC,MAFI,IAEGmK,EAAiBpK,KAAKsK,IAAI,KAAMtJ,IAFnC,IAuBlB,MAAO,CACLwB,OAnBF,WACEuH,EAAkBI,EAAM1I,YAAYS,OAAOO,gBAC3CuH,EAAmBG,EAAM1I,YAAYS,OAAO+H,iBAE5CxC,EAAI,UAAUoB,IAAIkB,GAClBtC,EAAI,SAASoB,IAAImB,IAejBtE,MAZF,WACEqE,EAAkB,GAYlBzH,IATF,aAUEwG,OARF,SAAiBC,GACftB,EAAMsB,GAQN7C,OAzDY,CACZhE,OAAQ,CACNkE,QAAS,cACTmE,SAAS,EACTC,MAAO,IACPnE,KAAM,IAERoE,MAAO,CACLrE,QAAS,iBAkDXE,OA9CY,CACZ,CACEF,QAAS,UACTF,OAAQ,CAAC,SAAU,WA4CrBiD,UAxCe,CACf,CACEC,KAAM,QACNC,MAAO,CAAC,cA0CZqB,EAAOC,QAAU,CACfnD,QAAStI,OAAOsI,QAChBhB,WAAYtH,OAAOsH,WACnBsD,aAAc5K,OAAO4K,e,8BC7RzB,WACM,gBAAiB5K,QAAU,IAC7BA,OAAOuC,YAAc,IAGvB,IAAIA,EAAcvC,OAAOuC,YAEzB,GAAI,QAASA,GAAe,EAAO,CACjC,IAAImJ,EAAYlJ,KAAKC,MAEjBF,EAAYoJ,QAAUpJ,EAAYoJ,OAAOC,kBAC3CF,EAAYnJ,EAAYoJ,OAAOC,iBAGjCrJ,EAAYE,IAAM,WAChB,OAAOD,KAAKC,MAAQiJ,GAInBnJ,EAAYsJ,OACftJ,EAAYsJ,KAAO,cAGhBtJ,EAAYuJ,UACfvJ,EAAYuJ,QAAU,cAxB1B,GA4BA9L,OAAOyF,OAAS,SAAgBsG,GAC9B,SAASC,EAAYC,EAAOC,GAE1B,IADA,IAAIC,EAAOC,OAAOD,KAAKF,GACdI,EAAI,EAAGC,EAAIH,EAAKnK,OAAQqK,EAAIC,EAAGD,IACtCH,EAASC,EAAKE,IAYlB,IAAIE,EAAYR,GAAY,GACxBS,EAAWD,EAAUE,SAAW,CAClC,UACA,UACA,UACA,UACA,WAKEC,GAAcH,EAAUI,QAAUJ,EAAUI,QAAU,IAAM,cAErDJ,EAAUxF,KAAO,CAH1B,uEAGqC2F,IAClC3E,SAAQ,SAAU6E,GAtBvB,IAAmBC,EACbC,EADaD,EAuBPD,GAtBNE,EAAU7M,SAASsB,cAAc,SAC7BwL,KAAOF,EACfC,EAAQE,IAAM,aACdF,EAAQG,KAAO,WACfhN,SAASiN,qBAAqB,QAAQ,GAAGxL,YAAYoL,MAqBlDP,EAAUvF,SAAQuF,EAAUvF,OAAS,IAE1C,IAAImG,EACFC,EACAC,EAAY,GAEVC,EAAgB,GAEpB,SAASC,EAAMC,EAAMC,EAAKC,GACxB,IAAIC,EAAOD,GAAW,GAClBE,EAAU3N,SAASsB,cAAc,UACnCsM,EAAOD,EAAQ7I,WAAW,MAC1B+I,EAAO,EACPC,EAAW,EAET9E,EAAI0E,EAAKK,MAAQL,EAAKK,MAAQ,UAE9BC,EAAahO,SAASsB,cAAc,UACtC2M,EAAUD,EAAWlJ,WAAW,MAClCkJ,EAAWrJ,MAAQ,EACnBqJ,EAAWpJ,OAAS,GACpBqJ,EAAQhJ,UAAY,UACpBgJ,EAAQ/I,SAAS,EAAG,EAAG,EAAG,IAC1B+I,EAAQhJ,UAAY+D,EACpBiF,EAAQ/I,SAAS,EAAGkI,EAAW,EAAGA,GAClCa,EAAQhJ,UAAY,UACpBgJ,EAAQ7I,YAAc,GACtB6I,EAAQ/I,SAAS,EAAGkI,EAAW,EAAG,GAClCa,EAAQ7I,YAAc,EAEtB,IAAI8I,EAAelO,SAASsB,cAAc,UACxC6M,EAAYD,EAAapJ,WAAW,MAwDtC,OAvDAoJ,EAAavJ,MAAQ,EACrBuJ,EAAatJ,OAAS,GACtBuJ,EAAUlJ,UAAY,UACtBkJ,EAAUjJ,SAAS,EAAG,EAAG,EAAG,IAC5BiJ,EAAUlJ,UAAY,UACtBkJ,EAAUjJ,SAAS,EAAGkI,EAAW,EAAGA,GACpCe,EAAU/I,YAAc,GACxB+I,EAAUlJ,UAAY,UACtBkJ,EAAUjJ,SAAS,EAAGkI,EAAW,EAAG,GACpCe,EAAU/I,YAAc,EAGtBuI,EAAQhJ,MAvCC,IAwCTgJ,EAAQ/I,OAASwI,EACjBO,EAAQ3L,MAAM2C,MAAQgJ,EAAQhJ,MAAQ,KACtCgJ,EAAQ3L,MAAM4C,OAAS+I,EAAQ/I,OAAS,KACxC+I,EAAQS,UAAY,YACpBb,EAAK9L,YAAYkM,GAEjBC,EAAK3I,UAAY,UACjB2I,EAAK1I,SAAS,EAAG,EAAGyI,EAAQhJ,MAAOgJ,EAAQ/I,QAmCtC,CACLyJ,KAjCF,SAAepD,EAAGqD,IAChBR,GAA6B,IAAhB7C,EAAI6C,KACjBD,GAAQ,OACaA,EAAOC,GAC5BF,EAAKrI,UACHoI,EACA,EACA,EACAA,EAAQhJ,MAAQ,EAChBgJ,EAAQ/I,OACR,EACA,EACA+I,EAAQhJ,MAAQ,EAChBgJ,EAAQ/I,QAEN0J,EACFV,EAAKrI,UACH2I,EACAP,EAAQhJ,MAAQ,EAChBgJ,EAAQ/I,OAAUkJ,EAAWH,EAAQ/I,OAAUiJ,EAAOT,GAGxDQ,EAAKrI,UACHyI,EACAL,EAAQhJ,MAAQ,EAChBgJ,EAAQ/I,OAAUkJ,EAAWH,EAAQ/I,OAAUiJ,EAAOT,KAY9D,SAASmB,EAAWhB,EAAMiB,GACxB,IAAIb,EAAU3N,SAASsB,cAAc,UACnCsM,EAAOD,EAAQ7I,WAAW,MAqC5B,OAlCE6I,EAAQhJ,MA5FC,IA6FTgJ,EAAQ/I,OAASwI,EAAYoB,EAC7Bb,EAAQ3L,MAAM2C,MAAQgJ,EAAQhJ,MAAQ,KACtCgJ,EAAQ3L,MAAM4C,OAAS+I,EAAQ/I,OAAS,KACxC+I,EAAQS,UAAY,YACpBb,EAAK9L,YAAYkM,GAEjBC,EAAK3I,UAAY,UACjB2I,EAAK1I,SAAS,EAAG,EAAGyI,EAAQhJ,MAAOgJ,EAAQ/I,QA0BtC,CACLyJ,KAxBF,SAAepD,GACb2C,EAAKrI,UACHoI,EACA,EACA,EACAA,EAAQhJ,MAAQ,EAChBgJ,EAAQ/I,OACR,EACA,EACA+I,EAAQhJ,MAAQ,EAChBgJ,EAAQ/I,QAEV,IAAI6J,EAAK,EACT1C,EAAYd,GAAG,SAAUmB,GACvB,IAAIsC,EAAIzD,EAAEmB,GAAKuB,EAAQ/I,OACvBgJ,EAAK3I,UAAYsH,EAASH,GAC1BwB,EAAK1I,SAASyI,EAAQhJ,MAAQ,EAAG8J,EAAI,EAAGC,GACxCD,GAAMC,OAWZ,SAASC,EAAY/M,EAAIgN,GACvB,IACEC,EADErB,EAAM5L,EAERkN,EAAS,EACTC,EAAS,EACTC,EAAgB,EAChBC,EAAc,EACdC,EAAc5M,YAAYE,MAC1B2M,EAAgB,EAChB5B,EAAOvN,SAASsB,cAAc,OAC9B8N,EAAUpP,SAASsB,cAAc,QACjC+N,EAAarP,SAASsB,cAAc,OACpCgO,EAAiBtP,SAASuP,eAAe,IACzC7B,EAAOpB,EAAYA,EAAUvF,OAAOyG,EAAI7F,eAAiB,KACzD6H,EAAS,IAAIlC,EAAMC,EAAMC,EAAKE,GAC9B+B,GAAW,EAeb,SAASC,EAASzE,GAChB,GAAIyC,GAAQA,EAAKtC,QAAS,CACxB6D,GAAehE,EACfkE,IACA,IAAI/I,EAAI9D,YAAYE,MAChB4D,EAAI8I,IAAgBxB,EAAKrC,OAAS,OACpC2D,EAAgBC,EAAcE,EAC9BF,EAAc,EACdC,EAAc9I,EACd+I,EAAgB,IAKtB,SAASQ,IACPd,EAAQvM,YAAYE,MAChB8J,EAAUsD,eAAetN,YAAYsJ,KAAK4B,EAAM,UACpDiC,GAAW,EAGb,SAASI,IACPf,EAASxM,YAAYE,MAAQqM,EACzBvC,EAAUsD,gBACZtN,YAAYsJ,KAAK4B,EAAM,QACnBiC,GACFnN,YAAYuJ,QAAQ2B,EAAKA,EAAM,SAAUA,EAAM,SAGnDkC,EAASZ,GAwCX,OAjFAM,EAAQhB,UAAY,gBACpBgB,EAAQU,YAAcpC,GAAQA,EAAKzG,QAAUyG,EAAKzG,QAAUuG,EAE5D6B,EAAWjB,UAAY,mBACvBiB,EAAW5N,YAAY6N,GAEvB/B,EAAK9L,YAAY2N,GACjB7B,EAAK9L,YAAY4N,GACbT,EAAOA,EAAMmB,IAAItO,YAAY8L,GAC5BJ,EAAK1L,YAAY8L,GAEtBsB,EAAQvM,YAAYE,MAsEb,CACLkH,IANF,SAAcuB,GAEZyE,EADAZ,EAAS7D,IAMT1E,MAAOoJ,EACPK,KAxCF,WACEH,IACAF,KAuCAxM,IAAK0M,EACLI,MA1BF,WACE,IAAI7J,EAAI9D,YAAYE,MAChB0N,EAAI9J,EAAIyI,EACZE,IACImB,EAAI,MAEJpB,EADEpB,IAA6B,IAArBA,EAAKyC,YACNpB,EAEU,IAATA,EAAiBmB,EAE7BnB,EAAS,EACTF,EAAQzI,EACRsJ,EAASZ,KAeXzJ,MAAO,WACL,OAAOyJ,GAETT,KAzCF,WACE,IAAIpD,EAAIyC,GAAQA,EAAKtC,QAAU4D,EAAgBF,EAC/CQ,EAAec,UAAYvP,KAAKC,MAAU,IAAJmK,GAAW,IACjD,IAAIoF,EACF3C,IACEA,EAAK4C,OAASxB,EAASpB,EAAK4C,OAC3B5C,EAAKxG,MAAQ4H,EAASpB,EAAKxG,MAChCsI,EAAOnB,KAAKS,EAAQuB,GACpB9C,EAAKa,UAAYiC,EAAI,wBAA0B,oBAoDnD,SAASE,EAAMC,GACb,IAAI5O,EAAK4O,EAAM7I,cAEf,QADW8I,IAAP7O,IAAkBA,EAAK,WACvByL,EAAczL,GAAK,OAAOyL,EAAczL,GAE5C,IAAIgN,EAAQ,KACRtC,GAAaA,EAAUnF,QACzB4E,EAAYO,EAAUnF,QAAQ,SAAUiF,GACtC,IAAIsE,EAAIpE,EAAUnF,OAAOwJ,SAASvE,EAAG,KAChCwC,IAAiD,IAAxC8B,EAAE3J,OAAO6J,QAAQhP,EAAG+F,iBAChCiH,EAAQ8B,MAKd,IAAIG,EAAI,IAAIlC,EAAY/M,EAAIgN,GAE5B,OADAvB,EAAczL,GAAMiP,EACbA,EA8ET,SAASC,IACP/E,EAAYO,EAAUlF,SAAS,SAAUgF,GACvCE,EAAUlF,QAAQgF,GAAG/I,YAGvB0I,EAAYsB,GAAe,SAAUjB,GACnCiB,EAAcjB,GAAGiC,UAGf/B,GAAaA,EAAUtC,WACzB+B,EAAYO,EAAUtC,WAAW,SAAUoC,GACzC,IAAIrD,EAAIuD,EAAUtC,UAAU2G,SAASvE,EAAG,KACpCnB,EAAI,GACJhB,EAAOoD,EAActE,EAAEkB,KAAKtC,eAC5BsC,IACFA,EAAOA,EAAK5E,QACZ0G,EAAYO,EAAUtC,UAAUoC,GAAGlC,OAAO,SAAU6G,GAClD,IAAIC,EAAI1E,EAAUtC,UAAUoC,GAAGlC,MAAMyG,SAASI,EAAG,KAAKpJ,cAClDsJ,EAAM5D,EAAc2D,GACpBC,GACFhG,EAAErD,KAAKqJ,EAAI5L,QAAU4E,OAI3BlB,EAAEmI,MAAM7C,KAAKpD,MAanB,OAhHA,WACE,GAAIqB,EAAUlF,QAAS,CAChBkF,EAAUvF,SAAQuF,EAAUvF,OAAS,IACrCuF,EAAUnF,SAAQmF,EAAUnF,OAAS,IACrCmF,EAAUtC,YAAWsC,EAAUtC,UAAY,IAChD,IAAK,IAAIoC,EAAI,EAAGA,EAAIE,EAAUlF,QAAQrF,OAAQqK,IAC5CE,EAAUlF,QAAQgF,GAAGzC,OAAO4G,GAC5BxE,EAAYO,EAAUlF,QAAQgF,GAAGrF,QAAQ,SAAUgK,GACjDzE,EAAUvF,OAAOgK,GAAKzE,EAAUlF,QAAQgF,GAAGrF,OAAOgK,MAEpDzE,EAAUnF,OAASmF,EAAUnF,OAAOgK,OAAO7E,EAAUlF,QAAQgF,GAAGjF,QAChEmF,EAAUtC,UAAYsC,EAAUtC,UAAUmH,OACxC7E,EAAUlF,QAAQgF,GAAGpC,gBAIzBsC,EAAUlF,QAAU,IAGtB8F,EAAQlN,SAASsB,cAAc,QACzB8M,UAAY,WAClBjB,EAAOnN,SAASsB,cAAc,QACzB8M,UAAY,eACjBjB,EAAKnL,MAAM4C,OAAS,OACpBsI,EAAMzL,YAAY0L,GAClBnN,SAASC,KAAKwB,YAAYyL,GAErBZ,IAEDA,EAAUnF,QACZ4E,EAAYO,EAAUnF,QAAQ,SAAUiF,GACtC,IAAIsE,EAAIpE,EAAUnF,OAAOwJ,SAASvE,EAAG,KACjC2D,EAAM/P,SAASsB,cAAc,OACjCyO,EAAI3B,UAAY,WAChBsC,EAAEX,IAAMA,EACR,IAAIqB,EAAKpR,SAASsB,cAAc,MAChC8P,EAAGtB,YAAcY,EAAEzJ,QACnBmK,EAAGjP,iBACD,QACA,SAAU+N,GACR1M,KAAK6N,UAAUC,OAAO,UACtBpB,EAAE1P,kBACF+Q,KAAKxB,IAET5C,EAAK1L,YAAY2P,GACjBjE,EAAK1L,YAAYsO,MAIjBzD,EAAUtC,WACZ+B,EAAYO,EAAUtC,WAAW,SAAUoC,GACzC,IAAIrD,EAAIuD,EAAUtC,UAAU2G,SAASvE,EAAG,KACpC2D,EAAM/P,SAASsB,cAAc,OACjCyO,EAAI3B,UAAY,cAChB,IAAIoD,EAASxR,SAASsB,cAAc,OACpCkQ,EAAOpD,UAAY,YAEnB,IAAIM,EAAI,EACR3C,EAAYO,EAAUtC,UAAUoC,GAAGlC,OAAO,SAAU6G,GAClD,IAAIF,EAAI7Q,SAASsB,cAAc,KAC/BuP,EAAEf,YAAcxD,EAAUtC,UAAUoC,GAAGlC,MAAM6G,GAC7CF,EAAE7O,MAAM+L,MAAQxB,EAASmC,GACzB8C,EAAO/P,YAAYoP,GACnBnC,OAEFqB,EAAItO,YAAY+P,GAChBzB,EAAI/N,MAAM4C,OAAS8J,EAAItB,EAAY,KACnCrE,EAAEgH,IAAMA,EACR,IAAImB,EAAQ,IAAI3C,EAAWwB,EAAKrB,GAChC3F,EAAEmI,MAAQA,EACV/D,EAAK1L,YAAYsO,OAwCvB0B,GAEO,SAAU7P,GACf,OAAIA,EAAW2O,EAAM3O,GACd,CACLiL,QAASK,EACT7J,OAAQyN,KAMZvF,EAAOC,QAAUzL,OAAOyF,Q,uSC3cnB,MAAMkM,EAA6B,IAZnC,MAAmB,mCACV,IADU,gBAEf,IAEM,gBAACC,EAAoBC,GAIlC,OAHKpO,KAAKqO,YAAYF,KACpBnO,KAAKqO,YAAYF,SAAoBC,KAEhCpO,KAAKqO,YAAYF,K,wHCIrB5J,eAAe+J,IAKpB,aAJyB,6BAOpB/J,eAAegK,IAAoB,MACxC,GAAI,UAAChS,OAAOiS,gBAAR,QAAC,EAAiB1K,SAAU,CAC9B,MAAM2K,QAAcH,IACpB,IAAIxK,EAAW,IAAI2K,EAAMC,cAAc,CAAEC,WAAW,IACpD7K,EAAS8K,QAAQrS,OAAOsS,WAAYtS,OAAOuS,aAE3ChL,EAASiL,YAAcN,EAAMO,sBAC7BlL,EAASmL,oBAAsB,EAC/BnL,EAASoL,eAAiBT,EAAMU,aAChCrL,EAASsL,cAAc7S,OAAOkE,kBAE9BjE,SAASC,KAAKwB,YAAY6F,EAAS7D,YAC9B1D,OAAOiS,WACVjS,OAAOiS,SAAW,IAEpBjS,OAAOiS,SAAS1K,SAAWA,EAE7B,OAAOvH,OAAOiS,SAAS1K,SAGlB,MAAMG,EAMX5H,YACUH,EACAiG,EACAsM,GACR,KAHQvS,UAAAA,EAGR,KAFQiG,aAAAA,EAER,KADQsM,MAAAA,EACR,gGAN8B,IAQtB,aACRzO,KAAKqP,MAAQ,IAAIrP,KAAKyO,MAAMa,MAE5BtP,KAAK8D,eAAiByK,IAEtBvO,KAAKuP,OAAS,IAAIvP,KAAKyO,MAAMe,kBAC3B,GACAjT,OAAOsS,WAAatS,OAAOuS,YAC3B,KACA,KAEF9O,KAAKuP,OAAOE,SAASC,EAAI,EAEzB,MAAM3I,EAAS,KACb,IAAK,MAAM4I,KAAa3P,KAAK4P,cAC3BD,IAGF3P,KAAK8D,SAASiD,OAAO/G,KAAKqP,MAAOrP,KAAKuP,QAEtCvP,KAAK8D,SAAS+L,WAAY,GAGtBC,EAAiB,KACrB9P,KAAKuP,OAAOQ,OAASxT,OAAOsS,WAAatS,OAAOuS,YAChD9O,KAAKuP,OAAOS,yBACZhQ,KAAK8D,SAAS8K,QAAQrS,OAAOsS,WAAYtS,OAAOuS,aAChD/H,KAGF/G,KAAKmC,aAAa8N,0BAAyB,KACzC1T,OAAO2T,oBAAoB,SAAUJ,GACrC9P,KAAK9D,UAAUiU,WAAWlM,EAAS/G,MAC/B8C,KAAKmC,aAAaO,kBACpBnG,OAAOoC,iBAAiB,SAAUmR,GAAgB,GAClD9P,KAAK9D,UAAUe,QAAQgH,EAAS/G,KAAM6J,OAEvC,GAGW,iBAACqJ,GACf,GAAIlC,EAAamC,OAAOD,GACtB,OAAOlC,EAAamC,OAAOD,GAW7B,GAAIA,EAAKE,SAAS,QAAS,CACzB,MAAMC,QAAerC,EAAasC,UAAU,cAAcjM,SAKrC,WAJO,sDAIIkM,cAI1BC,QAAeH,EAAOI,UAAUP,GACtClC,EAAamC,OAAOD,GAAQM,EAE9B,GAAIN,EAAKE,SAAS,QAAS,CACzB,MAAMC,QAAerC,EAAasC,UAAU,iBAAiBjM,SACzC,IAAIvE,KAAKyO,MAAMmC,gBAG7BF,QAAeH,EAAOI,UAAUP,GACtClC,EAAamC,OAAOD,GAAQM,EAE9B,OAAOxC,EAAamC,OAAOD,GAG7B1S,UACE,OAAOuG,EAAS/G,MAIb,MAAMlB,EACXK,eAEmB,oBAACJ,GAClB,IAAIC,QAAkBD,EAASE,WAC7B,6CAEEgG,QAAqBlG,EAASE,WAChC,qDAEF,OAAO,IAAI8H,EAAS/H,EAAWiG,QAAoBmM","sources":["webpack://axolotis-core-plugins/./src/lib/modules/debug/DebugBtn.ts","webpack://axolotis-core-plugins/./node_modules/three/examples/jsm/libs/stats.module.js","webpack://axolotis-core-plugins/./src/lib/modules/debug/PerformanceStats.ts","webpack://axolotis-core-plugins/./src/lib/modules/debug/rStats/rStats.extras.ts","webpack://axolotis-core-plugins/./src/lib/modules/debug/rStats/rStats.ts","webpack://axolotis-core-plugins/./src/lib/modules/three/ThreeAssetsLoader.ts","webpack://axolotis-core-plugins/./src/lib/modules/three/ThreeLib.ts"],"sourcesContent":["import { WebpackLazyModule } from \"@aptero/axolotis-player/build/types/modules/core/loader/WebpackLoader\";\r\nimport {\r\n  LazyServices,\r\n  Service,\r\n} from \"@aptero/axolotis-player/build/types/modules/core/service/LazyServices\";\r\nimport { FrameLoop } from \"@aptero/axolotis-player/build/types/modules/FrameLoop\";\r\nimport Component from \"@aptero/axolotis-player/build/types/modules/core/ecs/Component\";\r\nimport { PerformanceStats } from \"@root/lib/modules/debug/PerformanceStats\";\r\n\r\nexport class Factory implements WebpackLazyModule, Service<DebugBtn> {\r\n  async createService(services: LazyServices): Promise<DebugBtn> {\r\n    let frameLoop = await services.getService<FrameLoop>(\r\n      \"@aptero/axolotis-player/modules/FrameLoop\"\r\n    );\r\n    return new DebugBtn(frameLoop, services);\r\n  }\r\n}\r\n\r\nexport class DebugBtn implements Component {\r\n  constructor(frameLoop: FrameLoop, serviceEntity: LazyServices) {\r\n    let html =\r\n      '<div id=\"debug-btn\" style=\"display: block;\\n' +\r\n      \"    font-family: monospace;\\n\" +\r\n      \"    cursor: pointer;\\n\" +\r\n      \"    position: absolute;\\n\" +\r\n      \"    bottom: 0;\\n\" +\r\n      \"    right: 2px;\\n\" +\r\n      \"    padding: 4px 8px;\\n\" +\r\n      \"    color: #fff;\\n\" +\r\n      \"    text-shadow: 1px 1px 1px rgba(0,0,0,.5);\\n\" +\r\n      \"    font-size: 10px;\\n\" +\r\n      \"    -moz-user-select: none;\\n\" +\r\n      \"    -webkit-user-select: none;\\n\" +\r\n      \"    -ms-user-select: none;\\n\" +\r\n      '    user-select: none\" >60 FPS</div>';\r\n    window.document.body.insertAdjacentHTML(\"beforeend\", html);\r\n    let elementById = window.document.getElementById(\"debug-btn\");\r\n    if (elementById) {\r\n      elementById.onclick = (evt) => {\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n        serviceEntity.getService<PerformanceStats>(\r\n          \"@aptero/axolotis-core-plugins/modules/debug/PerformanceStats\"\r\n        );\r\n      };\r\n      frameLoop.addLoop(DebugBtn.name, (delta) => {\r\n        (elementById as any).innerText =\r\n          Math.round((1.0 / delta) * 1000) + \" FPS\";\r\n      });\r\n    }\r\n    if (window.location.host.startsWith(\"localhost\")) {\r\n      serviceEntity.getService<PerformanceStats>(\r\n        \"@aptero/axolotis-core-plugins/modules/debug/PerformanceStats\"\r\n      );\r\n    }\r\n  }\r\n\r\n  getType(): string {\r\n    return DebugBtn.name;\r\n  }\r\n}\r\n","var Stats = function () {\n\n\tvar mode = 0;\n\n\tvar container = document.createElement( 'div' );\n\tcontainer.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n\tcontainer.addEventListener( 'click', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tshowPanel( ++ mode % container.children.length );\n\n\t}, false );\n\n\t//\n\n\tfunction addPanel( panel ) {\n\n\t\tcontainer.appendChild( panel.dom );\n\t\treturn panel;\n\n\t}\n\n\tfunction showPanel( id ) {\n\n\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\n\n\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\n\n\t\t}\n\n\t\tmode = id;\n\n\t}\n\n\t//\n\n\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\n\n\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\n\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\n\n\tif ( self.performance && self.performance.memory ) {\n\n\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\n\n\t}\n\n\tshowPanel( 0 );\n\n\treturn {\n\n\t\tREVISION: 16,\n\n\t\tdom: container,\n\n\t\taddPanel: addPanel,\n\t\tshowPanel: showPanel,\n\n\t\tbegin: function () {\n\n\t\t\tbeginTime = ( performance || Date ).now();\n\n\t\t},\n\n\t\tend: function () {\n\n\t\t\tframes ++;\n\n\t\t\tvar time = ( performance || Date ).now();\n\n\t\t\tmsPanel.update( time - beginTime, 200 );\n\n\t\t\tif ( time >= prevTime + 1000 ) {\n\n\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\n\n\t\t\t\tprevTime = time;\n\t\t\t\tframes = 0;\n\n\t\t\t\tif ( memPanel ) {\n\n\t\t\t\t\tvar memory = performance.memory;\n\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn time;\n\n\t\t},\n\n\t\tupdate: function () {\n\n\t\t\tbeginTime = this.end();\n\n\t\t},\n\n\t\t// Backwards Compatibility\n\n\t\tdomElement: container,\n\t\tsetMode: showPanel\n\n\t};\n\n};\n\nStats.Panel = function ( name, fg, bg ) {\n\n\tvar min = Infinity, max = 0, round = Math.round;\n\tvar PR = round( window.devicePixelRatio || 1 );\n\n\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\n\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\n\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\n\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\n\n\tvar canvas = document.createElement( 'canvas' );\n\tcanvas.width = WIDTH;\n\tcanvas.height = HEIGHT;\n\tcanvas.style.cssText = 'width:80px;height:48px';\n\n\tvar context = canvas.getContext( '2d' );\n\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\n\tcontext.textBaseline = 'top';\n\n\tcontext.fillStyle = bg;\n\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\n\n\tcontext.fillStyle = fg;\n\tcontext.fillText( name, TEXT_X, TEXT_Y );\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\tcontext.fillStyle = bg;\n\tcontext.globalAlpha = 0.9;\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\treturn {\n\n\t\tdom: canvas,\n\n\t\tupdate: function ( value, maxValue ) {\n\n\t\t\tmin = Math.min( min, value );\n\t\t\tmax = Math.max( max, value );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 1;\n\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\n\t\t\tcontext.fillStyle = fg;\n\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\n\n\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 0.9;\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\n\n\t\t}\n\n\t};\n\n};\n\nexport default Stats;\n","const html =\r\n  \"<style>\\n\" +\r\n  \"    .alarm{\\n\" +\r\n  \"        color: #b70000;!important;\\n\" +\r\n  \"    }\\n\" +\r\n  \"\\n\" +\r\n  \"    .rs-base h1{\\n\" +\r\n  \"        margin: 0;\\n\" +\r\n  \"        padding: 0;\\n\" +\r\n  \"        font-size: 1.4em;\\n\" +\r\n  \"        color: #fff;\\n\" +\r\n  \"        margin-bottom: 5px;\\n\" +\r\n  \"        cursor: pointer;\\n\" +\r\n  \"    }\\n\" +\r\n  \"\\n\" +\r\n  \"    .rs-base div.rs-group{\\n\" +\r\n  \"        margin-bottom: 10px;\\n\" +\r\n  \"    }\\n\" +\r\n  \"\\n\" +\r\n  \"    .rs-base div.rs-group.hidden{\\n\" +\r\n  \"        display: none;\\n\" +\r\n  \"    }\\n\" +\r\n  \"\\n\" +\r\n  \"    .rs-base div.rs-fraction{\\n\" +\r\n  \"        position: relative;\\n\" +\r\n  \"        margin-bottom: 5px;\\n\" +\r\n  \"    }\\n\" +\r\n  \"\\n\" +\r\n  \"    .rs-base div.rs-fraction p{\\n\" +\r\n  \"        width: 120px;\\n\" +\r\n  \"        text-align: right;\\n\" +\r\n  \"        margin: 0;\\n\" +\r\n  \"        padding: 0;\\n\" +\r\n  \"    }\\n\" +\r\n  \"\\n\" +\r\n  \"    .rs-base div.rs-legend{\\n\" +\r\n  \"        position: absolute;\\n\" +\r\n  \"        line-height: 1em;\\n\" +\r\n  \"    }\\n\" +\r\n  \"\\n\" +\r\n  \"    .rs-base div.rs-counter-base{\\n\" +\r\n  \"        position: relative;\\n\" +\r\n  \"        margin: 2px 0;\\n\" +\r\n  \"        height: 1em;\\n\" +\r\n  \"    }\\n\" +\r\n  \"\\n\" +\r\n  \"    .rs-base span.rs-counter-id{\\n\" +\r\n  \"        color: white;\\n\" +\r\n  \"        position: absolute;\\n\" +\r\n  \"        left: 0;\\n\" +\r\n  \"        top: 0;\\n\" +\r\n  \"    }\\n\" +\r\n  \"\\n\" +\r\n  \"    .rs-base div.rs-counter-value{\\n\" +\r\n  \"        color: white;\\n\" +\r\n  \"        position: absolute;\\n\" +\r\n  \"        left: 90px;\\n\" +\r\n  \"        width: 30px;\\n\" +\r\n  \"        height: 1em;\\n\" +\r\n  \"        top: 0;\\n\" +\r\n  \"        text-align: right;\\n\" +\r\n  \"    }\\n\" +\r\n  \"\\n\" +\r\n  \"    .rs-base canvas.rs-canvas{\\n\" +\r\n  \"        position: absolute;\\n\" +\r\n  \"        right: 0;\\n\" +\r\n  \"    }\\n\" +\r\n  \"</style>\\n\" +\r\n  \"<style>\\n\" +\r\n  \"\\n\" +\r\n  \"    .rs-header {\\n\" +\r\n  \"        display: flex;\\n\" +\r\n  \"        justify-content: space-between;\\n\" +\r\n  \"        border-bottom: 1px rgba(255,255,255,0.1) solid;\\n\" +\r\n  \"        margin-bottom: 8px;\\n\" +\r\n  \"    }\\n\" +\r\n  \"\\n\" +\r\n  \"    .rs-collapse-btn {\\n\" +\r\n  \"        cursor: pointer;\\n\" +\r\n  \"        font-size: 12px;\\n\" +\r\n  \"    }\\n\" +\r\n  \"\\n\" +\r\n  \"    .rs-fps-counter {\\n\" +\r\n  \"        font-family: monospace;\\n\" +\r\n  \"        cursor: pointer;\\n\" +\r\n  \"        position: absolute;\\n\" +\r\n  \"        bottom: 96px;\\n\" +\r\n  \"        right: 2px;\\n\" +\r\n  \"        padding: 4px 8px;\\n\" +\r\n  \"        color: #ffffff;\\n\" +\r\n  \"        text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);\\n\" +\r\n  \"        font-size: 10px;\\n\" +\r\n  \"        -moz-user-select: none;\\n\" +\r\n  \"        -webkit-user-select: none;\\n\" +\r\n  \"        -ms-user-select: none;\\n\" +\r\n  \"        user-select: none;\\n\" +\r\n  \"    }\\n\" +\r\n  \"\\n\" +\r\n  \"    .rs-base {\\n\" +\r\n  \"        right: 10px;\\n\" +\r\n  \"        left: auto;\\n\" +\r\n  \"        top: 10px;\\n\" +\r\n  \"        -moz-user-select: none;\\n\" +\r\n  \"        -webkit-user-select: none;\\n\" +\r\n  \"        -ms-user-select: none;\\n\" +\r\n  \"        user-select: none;\\n\" +\r\n  \"\\n\" +\r\n  \"        position: absolute;\\n\" +\r\n  \"        z-index: 10000;\\n\" +\r\n  \"        padding: 10px;\\n\" +\r\n  \"        background-color: #222;\\n\" +\r\n  \"        font-size: 10px;\\n\" +\r\n  \"        line-height: 1.2em;\\n\" +\r\n  \"        width: 350px;\\n\" +\r\n  \"        font-family: 'Roboto Condensed', tahoma, sans-serif;\\n\" +\r\n  \"        overflow: hidden;\\n\" +\r\n  \"    }\\n\" +\r\n  \"</style>\\n\";\r\nimport { WebpackLazyModule } from \"@aptero/axolotis-player/build/types/modules/core/loader/WebpackLoader\";\r\nimport {\r\n  LazyServices,\r\n  Service,\r\n} from \"@aptero/axolotis-player/build/types/modules/core/service/LazyServices\";\r\nimport Component from \"@aptero/axolotis-player/build/types/modules/core/ecs/Component\";\r\nimport Stats from \"three/examples/jsm/libs/stats.module\";\r\nimport { FrameLoop } from \"@aptero/axolotis-player\";\r\nimport { WorldService } from \"@aptero/axolotis-player/build/types/modules/core/WorldService\";\r\n//import { ServiceEntity } from \"@aptero/axolotis-player/build/types/modules/core/service/ServiceEntity\";\r\nimport { ServiceEntity } from \"@aptero/axolotis-player\";\r\nimport { ThreeLib } from \"@root/lib/modules/three/ThreeLib\";\r\nimport NavMeshPlayer from \"@root/lib/modules/controller/pathFindingPlayer/NavMeshPlayer\";\r\nimport { DebugBtn } from \"@root/lib/modules/debug/DebugBtn\";\r\n//import {PortalsService} from \"@aptero/axolotis-core-plugins/modules/portals/PortalsService\";\r\n\r\nconst rStats = require(\"./rStats/rStats\");\r\nconst rStatsExtra = require(\"./rStats/rStats.extras\");\r\n\r\ndeclare const window: any;\r\n\r\nexport class Factory implements WebpackLazyModule, Service<PerformanceStats> {\r\n  async createService(services: LazyServices): Promise<PerformanceStats> {\r\n    let threeLib = await services.getService<ThreeLib>(\r\n      \"@aptero/axolotis-core-plugins/modules/three/ThreeLib\"\r\n    );\r\n    let frameLoop = await services.getService<FrameLoop>(\r\n      \"@aptero/axolotis-player/modules/FrameLoop\"\r\n    );\r\n    let worldService = await services.getService<WorldService>(\r\n      \"@aptero/axolotis-player/modules/core/WorldService\"\r\n    );\r\n    return new PerformanceStats(threeLib, frameLoop, worldService);\r\n  }\r\n}\r\n\r\nexport class PerformanceStats implements Component {\r\n  private rS: any;\r\n  constructor(\r\n    private threeLib: ThreeLib,\r\n    frameLoop: FrameLoop,\r\n    private worldService: WorldService\r\n  ) {\r\n    if (window.perfStatSingletonPresent) {\r\n      return; //Only one debug panel even if multiple world\r\n    }\r\n    window.perfStatSingletonPresent = true;\r\n    console.warn(\r\n      \"MB MBytes of allocated memory. (Run Chrome with --enable-precise-memory-info) to have precise perf info\"\r\n    );\r\n    const stats = Stats();\r\n    stats.showPanel(2);\r\n    document.body.appendChild(stats.dom);\r\n    this.updateRstats();\r\n    window.document.body.insertAdjacentHTML(\"beforeend\", html);\r\n    if (worldService.isActiveWorld()) {\r\n      const animate = (t) => {\r\n        //Avoir using frameloop for this so it does not appear on perf\r\n        requestAnimationFrame(animate);\r\n        stats.update();\r\n        this.rS().update();\r\n        this.rS(\"framerate\").end();\r\n        this.rS(\"framerate\").start();\r\n      };\r\n      requestAnimationFrame(animate);\r\n    }\r\n\r\n    worldService.addOnWorldAdded(() => {\r\n      this.updateWorldCallback();\r\n    }, true);\r\n  }\r\n\r\n  updateRstats() {\r\n    let elementsByClassName = document.body.getElementsByClassName(\"rs-base\");\r\n    if (elementsByClassName.length != 0) {\r\n      elementsByClassName[0].remove();\r\n    }\r\n    //https://spite.github.io/rstats/\r\n    const threeStats = new window.threeStats(this.threeLib.renderer);\r\n    //const glS = new window.glStats(); // init at any point\r\n    const plugins = [threeStats];\r\n    let config: any = {\r\n      css: [], // Our stylesheet is injected from AFrame.\r\n      values: {\r\n        framerate: { caption: \"Frame (ms)\", over: 19 }, //17 ms = 60fps\r\n      },\r\n      groups: [],\r\n      plugins: plugins,\r\n    };\r\n    for (let i = 0; i < this.worldService.getWorlds().length; i++) {\r\n      config.values[FrameLoop.name.toLowerCase() + \"-\" + i] = {\r\n        caption: FrameLoop.name + \" (ms)\",\r\n        over: 10,\r\n      };\r\n      config.values[ThreeLib.name.toLowerCase() + \"-\" + i] = {\r\n        caption: ThreeLib.name + \" (ms)\",\r\n      };\r\n      config.values[NavMeshPlayer.name.toLowerCase() + \"-\" + i] = {\r\n        caption: NavMeshPlayer.name + \" (ms)\",\r\n      };\r\n      config.values[DebugBtn.name.toLowerCase() + \"-\" + i] = {\r\n        caption: DebugBtn.name + \" (ms)\",\r\n      };\r\n      config.values[PerformanceStats.name.toLowerCase() + \"-\" + i] = {\r\n        caption: PerformanceStats.name + \" (ms)\",\r\n      };\r\n      //config.values[PortalsService.name.toLowerCase()+\"-\"+i] = { caption: PortalsService.name + \" (ms)\" };\r\n      config.groups.push({\r\n        caption: \"World - \" + i,\r\n        values: [\r\n          FrameLoop.name.toLowerCase() + \"-\" + i,\r\n          ThreeLib.name.toLowerCase() + \"-\" + i,\r\n          NavMeshPlayer.name.toLowerCase() + \"-\" + i,\r\n        ],\r\n        //PortalsService.name.toLowerCase()+\"-\"+i]\r\n      });\r\n    }\r\n    this.rS = new rStats(config);\r\n  }\r\n\r\n  updateWorldCallback() {\r\n    console.log(\"new world :\", this.worldService.getWorlds());\r\n    this.updateRstats();\r\n    this.worldService.getWorlds().forEach(async (world, index) => {\r\n      let services = world.getFirstComponentByType<ServiceEntity>(\r\n        ServiceEntity.name\r\n      );\r\n      let frameLoop = await services.getService<FrameLoop>(\r\n        \"@aptero/axolotis-player/modules/FrameLoop\"\r\n      );\r\n      frameLoop.setMonitoringCallback(\r\n        (name) => {\r\n          this.rS(name.toLowerCase() + \"-\" + index).start();\r\n        },\r\n        (name) => {\r\n          this.rS(name.toLowerCase() + \"-\" + index).end();\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  getType(): string {\r\n    return PerformanceStats.name;\r\n  }\r\n}\r\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n// @ts-nocheck\r\nwindow.glStats = function () {\r\n  var _rS = null;\r\n\r\n  var _totalDrawArraysCalls = 0,\r\n    _totalDrawElementsCalls = 0,\r\n    _totalUseProgramCalls = 0,\r\n    _totalFaces = 0,\r\n    _totalVertices = 0,\r\n    _totalPoints = 0,\r\n    _totalBindTexures = 0;\r\n\r\n  function _h(f, c) {\r\n    return function () {\r\n      c.apply(this, arguments);\r\n      f.apply(this, arguments);\r\n    };\r\n  }\r\n\r\n  WebGLRenderingContext.prototype.drawArrays = _h(\r\n    WebGLRenderingContext.prototype.drawArrays,\r\n    function () {\r\n      _totalDrawArraysCalls++;\r\n      if (arguments[0] == this.POINTS) _totalPoints += arguments[2];\r\n      else _totalVertices += arguments[2];\r\n    }\r\n  );\r\n\r\n  WebGLRenderingContext.prototype.drawElements = _h(\r\n    WebGLRenderingContext.prototype.drawElements,\r\n    function () {\r\n      _totalDrawElementsCalls++;\r\n      _totalFaces += arguments[1] / 3;\r\n      _totalVertices += arguments[1];\r\n    }\r\n  );\r\n\r\n  WebGLRenderingContext.prototype.useProgram = _h(\r\n    WebGLRenderingContext.prototype.useProgram,\r\n    function () {\r\n      _totalUseProgramCalls++;\r\n    }\r\n  );\r\n\r\n  WebGLRenderingContext.prototype.bindTexture = _h(\r\n    WebGLRenderingContext.prototype.bindTexture,\r\n    function () {\r\n      _totalBindTexures++;\r\n    }\r\n  );\r\n\r\n  var _values = {\r\n    allcalls: {\r\n      over: 3000,\r\n      caption: \"Calls (hook)\",\r\n    },\r\n    drawelements: {\r\n      caption: \"drawElements (hook)\",\r\n    },\r\n    drawarrays: {\r\n      caption: \"drawArrays (hook)\",\r\n    },\r\n  };\r\n\r\n  var _groups = [\r\n    {\r\n      caption: \"WebGL\",\r\n      values: [\r\n        \"allcalls\",\r\n        \"drawelements\",\r\n        \"drawarrays\",\r\n        \"useprogram\",\r\n        \"bindtexture\",\r\n        \"glfaces\",\r\n        \"glvertices\",\r\n        \"glpoints\",\r\n      ],\r\n    },\r\n  ];\r\n\r\n  var _fractions = [\r\n    {\r\n      base: \"allcalls\",\r\n      steps: [\"drawelements\", \"drawarrays\"],\r\n    },\r\n  ];\r\n\r\n  function _update() {\r\n    _rS(\"allcalls\").set(_totalDrawArraysCalls + _totalDrawElementsCalls);\r\n    _rS(\"drawElements\").set(_totalDrawElementsCalls);\r\n    _rS(\"drawArrays\").set(_totalDrawArraysCalls);\r\n    _rS(\"bindTexture\").set(_totalBindTexures);\r\n    _rS(\"useProgram\").set(_totalUseProgramCalls);\r\n    _rS(\"glfaces\").set(_totalFaces);\r\n    _rS(\"glvertices\").set(_totalVertices);\r\n    _rS(\"glpoints\").set(_totalPoints);\r\n  }\r\n\r\n  function _start() {\r\n    _totalDrawArraysCalls = 0;\r\n    _totalDrawElementsCalls = 0;\r\n    _totalUseProgramCalls = 0;\r\n    _totalFaces = 0;\r\n    _totalVertices = 0;\r\n    _totalPoints = 0;\r\n    _totalBindTexures = 0;\r\n  }\r\n\r\n  function _end() {}\r\n\r\n  function _attach(r) {\r\n    _rS = r;\r\n  }\r\n\r\n  return {\r\n    update: _update,\r\n    start: _start,\r\n    end: _end,\r\n    attach: _attach,\r\n    values: _values,\r\n    groups: _groups,\r\n    fractions: _fractions,\r\n  };\r\n};\r\n\r\nwindow.threeStats = function (renderer) {\r\n  var _rS = null;\r\n\r\n  var _values = {\r\n    \"renderer.info.memory.geometries\": {\r\n      caption: \"Geometries\",\r\n    },\r\n    \"renderer.info.memory.textures\": {\r\n      caption: \"Textures\",\r\n    },\r\n    \"renderer.info.programs\": {\r\n      caption: \"Programs\",\r\n    },\r\n    \"renderer.info.render.calls\": {\r\n      caption: \"Calls\",\r\n    },\r\n    \"renderer.info.render.triangles\": {\r\n      caption: \"Triangles\",\r\n      over: 300000,\r\n    },\r\n    \"renderer.info.render.points\": {\r\n      caption: \"Points\",\r\n    },\r\n  };\r\n\r\n  var _groups = [\r\n    {\r\n      caption: \"Three.js - Memory\",\r\n      values: [\r\n        \"renderer.info.memory.geometries\",\r\n        \"renderer.info.programs\",\r\n        \"renderer.info.memory.textures\",\r\n      ],\r\n    },\r\n    {\r\n      caption: \"Three.js - Render\",\r\n      values: [\r\n        \"renderer.info.render.calls\",\r\n        \"renderer.info.render.triangles\",\r\n        \"renderer.info.render.points\",\r\n      ],\r\n    },\r\n  ];\r\n\r\n  var _fractions = [];\r\n\r\n  function _update() {\r\n    _rS(\"renderer.info.memory.geometries\").set(renderer.info.memory.geometries);\r\n    _rS(\"renderer.info.programs\").set(renderer.info.programs.length);\r\n    _rS(\"renderer.info.memory.textures\").set(renderer.info.memory.textures);\r\n    _rS(\"renderer.info.render.calls\").set(renderer.info.render.calls);\r\n    _rS(\"renderer.info.render.triangles\").set(renderer.info.render.triangles);\r\n    _rS(\"renderer.info.render.points\").set(renderer.info.render.points);\r\n  }\r\n\r\n  function _start() {}\r\n\r\n  function _end() {}\r\n\r\n  function _attach(r) {\r\n    _rS = r;\r\n  }\r\n\r\n  return {\r\n    update: _update,\r\n    start: _start,\r\n    end: _end,\r\n    attach: _attach,\r\n    values: _values,\r\n    groups: _groups,\r\n    fractions: _fractions,\r\n  };\r\n};\r\n\r\n/*\r\n *   From https://github.com/paulirish/memory-stats.js\r\n */\r\n\r\nwindow.BrowserStats = function () {\r\n  var _rS = null;\r\n\r\n  var _usedJSHeapSize = 0,\r\n    _totalJSHeapSize = 0;\r\n\r\n  if (window.performance && !performance.memory) {\r\n    performance.memory = {\r\n      usedJSHeapSize: 0,\r\n      totalJSHeapSize: 0,\r\n    };\r\n  }\r\n\r\n  if (performance.memory.totalJSHeapSize === 0) {\r\n    console.warn(\r\n      \"totalJSHeapSize === 0... performance.memory is only available in Chrome .\"\r\n    );\r\n  }\r\n\r\n  var _values = {\r\n    memory: {\r\n      caption: \"Used Memory\",\r\n      average: true,\r\n      avgMs: 1000,\r\n      over: 22,\r\n    },\r\n    total: {\r\n      caption: \"Total Memory\",\r\n    },\r\n  };\r\n\r\n  var _groups = [\r\n    {\r\n      caption: \"Browser\",\r\n      values: [\"memory\", \"total\"],\r\n    },\r\n  ];\r\n\r\n  var _fractions = [\r\n    {\r\n      base: \"total\",\r\n      steps: [\"memory\"],\r\n    },\r\n  ];\r\n\r\n  var log1024 = Math.log(1024);\r\n\r\n  function _size(v) {\r\n    var precision = 100; //Math.pow(10, 2);\r\n    var i = Math.floor(Math.log(v) / log1024);\r\n    return Math.round((v * precision) / Math.pow(1024, i)) / precision; // + ' ' + sizes[i];\r\n  }\r\n\r\n  function _update() {\r\n    _usedJSHeapSize = _size(performance.memory.usedJSHeapSize);\r\n    _totalJSHeapSize = _size(performance.memory.totalJSHeapSize);\r\n\r\n    _rS(\"memory\").set(_usedJSHeapSize);\r\n    _rS(\"total\").set(_totalJSHeapSize);\r\n  }\r\n\r\n  function _start() {\r\n    _usedJSHeapSize = 0;\r\n  }\r\n\r\n  function _end() {}\r\n\r\n  function _attach(r) {\r\n    _rS = r;\r\n  }\r\n\r\n  return {\r\n    update: _update,\r\n    start: _start,\r\n    end: _end,\r\n    attach: _attach,\r\n    values: _values,\r\n    groups: _groups,\r\n    fractions: _fractions,\r\n  };\r\n};\r\n\r\nif (typeof module === \"object\") {\r\n  module.exports = {\r\n    glStats: window.glStats,\r\n    threeStats: window.threeStats,\r\n    BrowserStats: window.BrowserStats,\r\n  };\r\n}\r\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n// @ts-nocheck\r\n// performance.now() polyfill from https://gist.github.com/paulirish/5438650\r\n\"use strict\";\r\n\r\n(function () {\r\n  if (\"performance\" in window == false) {\r\n    window.performance = {};\r\n  }\r\n\r\n  var performance = window.performance;\r\n\r\n  if (\"now\" in performance == false) {\r\n    var nowOffset = Date.now();\r\n\r\n    if (performance.timing && performance.timing.navigationStart) {\r\n      nowOffset = performance.timing.navigationStart;\r\n    }\r\n\r\n    performance.now = function now() {\r\n      return Date.now() - nowOffset;\r\n    };\r\n  }\r\n\r\n  if (!performance.mark) {\r\n    performance.mark = function () {};\r\n  }\r\n\r\n  if (!performance.measure) {\r\n    performance.measure = function () {};\r\n  }\r\n})();\r\n\r\nwindow.rStats = function rStats(settings) {\r\n  function iterateKeys(array, callback) {\r\n    var keys = Object.keys(array);\r\n    for (var j = 0, l = keys.length; j < l; j++) {\r\n      callback(keys[j]);\r\n    }\r\n  }\r\n\r\n  function importCSS(url) {\r\n    var element = document.createElement(\"link\");\r\n    element.href = url;\r\n    element.rel = \"stylesheet\";\r\n    element.type = \"text/css\";\r\n    document.getElementsByTagName(\"head\")[0].appendChild(element);\r\n  }\r\n\r\n  var _settings = settings || {};\r\n  var _colours = _settings.colours || [\r\n    \"#850700\",\r\n    \"#c74900\",\r\n    \"#fcb300\",\r\n    \"#284280\",\r\n    \"#4c7c0c\",\r\n  ];\r\n\r\n  var _cssFont =\r\n    \"https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300\";\r\n  var _cssRStats = (_settings.CSSPath ? _settings.CSSPath : \"\") + \"rStats.css\";\r\n\r\n  var _css = _settings.css || [_cssFont, _cssRStats];\r\n  _css.forEach(function (uri) {\r\n    importCSS(uri);\r\n  });\r\n\r\n  if (!_settings.values) _settings.values = {};\r\n\r\n  var _base,\r\n    _div,\r\n    _elHeight = 10,\r\n    _elWidth = 200;\r\n  var _perfCounters = {};\r\n\r\n  function Graph(_dom, _id, _defArg) {\r\n    var _def = _defArg || {};\r\n    var _canvas = document.createElement(\"canvas\"),\r\n      _ctx = _canvas.getContext(\"2d\"),\r\n      _max = 0,\r\n      _current = 0;\r\n\r\n    var c = _def.color ? _def.color : \"#666666\";\r\n\r\n    var _dotCanvas = document.createElement(\"canvas\"),\r\n      _dotCtx = _dotCanvas.getContext(\"2d\");\r\n    _dotCanvas.width = 1;\r\n    _dotCanvas.height = 2 * _elHeight;\r\n    _dotCtx.fillStyle = \"#444444\";\r\n    _dotCtx.fillRect(0, 0, 1, 2 * _elHeight);\r\n    _dotCtx.fillStyle = c;\r\n    _dotCtx.fillRect(0, _elHeight, 1, _elHeight);\r\n    _dotCtx.fillStyle = \"#ffffff\";\r\n    _dotCtx.globalAlpha = 0.5;\r\n    _dotCtx.fillRect(0, _elHeight, 1, 1);\r\n    _dotCtx.globalAlpha = 1;\r\n\r\n    var _alarmCanvas = document.createElement(\"canvas\"),\r\n      _alarmCtx = _alarmCanvas.getContext(\"2d\");\r\n    _alarmCanvas.width = 1;\r\n    _alarmCanvas.height = 2 * _elHeight;\r\n    _alarmCtx.fillStyle = \"#444444\";\r\n    _alarmCtx.fillRect(0, 0, 1, 2 * _elHeight);\r\n    _alarmCtx.fillStyle = \"#b70000\";\r\n    _alarmCtx.fillRect(0, _elHeight, 1, _elHeight);\r\n    _alarmCtx.globalAlpha = 0.5;\r\n    _alarmCtx.fillStyle = \"#ffffff\";\r\n    _alarmCtx.fillRect(0, _elHeight, 1, 1);\r\n    _alarmCtx.globalAlpha = 1;\r\n\r\n    function _init() {\r\n      _canvas.width = _elWidth;\r\n      _canvas.height = _elHeight;\r\n      _canvas.style.width = _canvas.width + \"px\";\r\n      _canvas.style.height = _canvas.height + \"px\";\r\n      _canvas.className = \"rs-canvas\";\r\n      _dom.appendChild(_canvas);\r\n\r\n      _ctx.fillStyle = \"#444444\";\r\n      _ctx.fillRect(0, 0, _canvas.width, _canvas.height);\r\n    }\r\n\r\n    function _draw(v, alarm) {\r\n      _current += (v - _current) * 0.1;\r\n      _max *= 0.99;\r\n      if (_current > _max) _max = _current;\r\n      _ctx.drawImage(\r\n        _canvas,\r\n        1,\r\n        0,\r\n        _canvas.width - 1,\r\n        _canvas.height,\r\n        0,\r\n        0,\r\n        _canvas.width - 1,\r\n        _canvas.height\r\n      );\r\n      if (alarm) {\r\n        _ctx.drawImage(\r\n          _alarmCanvas,\r\n          _canvas.width - 1,\r\n          _canvas.height - (_current * _canvas.height) / _max - _elHeight\r\n        );\r\n      } else {\r\n        _ctx.drawImage(\r\n          _dotCanvas,\r\n          _canvas.width - 1,\r\n          _canvas.height - (_current * _canvas.height) / _max - _elHeight\r\n        );\r\n      }\r\n    }\r\n\r\n    _init();\r\n\r\n    return {\r\n      draw: _draw,\r\n    };\r\n  }\r\n\r\n  function StackGraph(_dom, _num) {\r\n    var _canvas = document.createElement(\"canvas\"),\r\n      _ctx = _canvas.getContext(\"2d\");\r\n\r\n    function _init() {\r\n      _canvas.width = _elWidth;\r\n      _canvas.height = _elHeight * _num;\r\n      _canvas.style.width = _canvas.width + \"px\";\r\n      _canvas.style.height = _canvas.height + \"px\";\r\n      _canvas.className = \"rs-canvas\";\r\n      _dom.appendChild(_canvas);\r\n\r\n      _ctx.fillStyle = \"#444444\";\r\n      _ctx.fillRect(0, 0, _canvas.width, _canvas.height);\r\n    }\r\n\r\n    function _draw(v) {\r\n      _ctx.drawImage(\r\n        _canvas,\r\n        1,\r\n        0,\r\n        _canvas.width - 1,\r\n        _canvas.height,\r\n        0,\r\n        0,\r\n        _canvas.width - 1,\r\n        _canvas.height\r\n      );\r\n      var th = 0;\r\n      iterateKeys(v, function (j) {\r\n        var h = v[j] * _canvas.height;\r\n        _ctx.fillStyle = _colours[j];\r\n        _ctx.fillRect(_canvas.width - 1, th, 1, h);\r\n        th += h;\r\n      });\r\n    }\r\n\r\n    _init();\r\n\r\n    return {\r\n      draw: _draw,\r\n    };\r\n  }\r\n\r\n  function PerfCounter(id, group) {\r\n    var _id = id,\r\n      _time,\r\n      _value = 0,\r\n      _total = 0,\r\n      _averageValue = 0,\r\n      _accumValue = 0,\r\n      _accumStart = performance.now(),\r\n      _accumSamples = 0,\r\n      _dom = document.createElement(\"div\"),\r\n      _spanId = document.createElement(\"span\"),\r\n      _spanValue = document.createElement(\"div\"),\r\n      _spanValueText = document.createTextNode(\"\"),\r\n      _def = _settings ? _settings.values[_id.toLowerCase()] : null,\r\n      _graph = new Graph(_dom, _id, _def),\r\n      _started = false;\r\n\r\n    _spanId.className = \"rs-counter-id\";\r\n    _spanId.textContent = _def && _def.caption ? _def.caption : _id;\r\n\r\n    _spanValue.className = \"rs-counter-value\";\r\n    _spanValue.appendChild(_spanValueText);\r\n\r\n    _dom.appendChild(_spanId);\r\n    _dom.appendChild(_spanValue);\r\n    if (group) group.div.appendChild(_dom);\r\n    else _div.appendChild(_dom);\r\n\r\n    _time = performance.now();\r\n\r\n    function _average(v) {\r\n      if (_def && _def.average) {\r\n        _accumValue += v;\r\n        _accumSamples++;\r\n        var t = performance.now();\r\n        if (t - _accumStart >= (_def.avgMs || 1000)) {\r\n          _averageValue = _accumValue / _accumSamples;\r\n          _accumValue = 0;\r\n          _accumStart = t;\r\n          _accumSamples = 0;\r\n        }\r\n      }\r\n    }\r\n\r\n    function _start() {\r\n      _time = performance.now();\r\n      if (_settings.userTimingAPI) performance.mark(_id + \"-start\");\r\n      _started = true;\r\n    }\r\n\r\n    function _end() {\r\n      _value = performance.now() - _time;\r\n      if (_settings.userTimingAPI) {\r\n        performance.mark(_id + \"-end\");\r\n        if (_started) {\r\n          performance.measure(_id, _id + \"-start\", _id + \"-end\");\r\n        }\r\n      }\r\n      _average(_value);\r\n    }\r\n\r\n    function _tick() {\r\n      _end();\r\n      _start();\r\n    }\r\n\r\n    function _draw() {\r\n      var v = _def && _def.average ? _averageValue : _value;\r\n      _spanValueText.nodeValue = Math.round(v * 100) / 100;\r\n      var a =\r\n        _def &&\r\n        ((_def.below && _value < _def.below) ||\r\n          (_def.over && _value > _def.over));\r\n      _graph.draw(_value, a);\r\n      _dom.className = a ? \"rs-counter-base alarm\" : \"rs-counter-base\";\r\n    }\r\n\r\n    function _frame() {\r\n      var t = performance.now();\r\n      var e = t - _time;\r\n      _total++;\r\n      if (e > 1000) {\r\n        if (_def && _def.interpolate === false) {\r\n          _value = _total;\r\n        } else {\r\n          _value = (_total * 1000) / e;\r\n        }\r\n        _total = 0;\r\n        _time = t;\r\n        _average(_value);\r\n      }\r\n    }\r\n\r\n    function _set(v) {\r\n      _value = v;\r\n      _average(_value);\r\n    }\r\n\r\n    return {\r\n      set: _set,\r\n      start: _start,\r\n      tick: _tick,\r\n      end: _end,\r\n      frame: _frame,\r\n      value: function () {\r\n        return _value;\r\n      },\r\n      draw: _draw,\r\n    };\r\n  }\r\n\r\n  function sample() {\r\n    var _value = 0;\r\n\r\n    function _set(v) {\r\n      _value = v;\r\n    }\r\n\r\n    return {\r\n      set: _set,\r\n      value: function () {\r\n        return _value;\r\n      },\r\n    };\r\n  }\r\n\r\n  function _perf(idArg) {\r\n    var id = idArg.toLowerCase();\r\n    if (id === undefined) id = \"default\";\r\n    if (_perfCounters[id]) return _perfCounters[id];\r\n\r\n    var group = null;\r\n    if (_settings && _settings.groups) {\r\n      iterateKeys(_settings.groups, function (j) {\r\n        var g = _settings.groups[parseInt(j, 10)];\r\n        if (!group && g.values.indexOf(id.toLowerCase()) !== -1) {\r\n          group = g;\r\n        }\r\n      });\r\n    }\r\n\r\n    var p = new PerfCounter(id, group);\r\n    _perfCounters[id] = p;\r\n    return p;\r\n  }\r\n\r\n  function _init() {\r\n    if (_settings.plugins) {\r\n      if (!_settings.values) _settings.values = {};\r\n      if (!_settings.groups) _settings.groups = [];\r\n      if (!_settings.fractions) _settings.fractions = [];\r\n      for (var j = 0; j < _settings.plugins.length; j++) {\r\n        _settings.plugins[j].attach(_perf);\r\n        iterateKeys(_settings.plugins[j].values, function (k) {\r\n          _settings.values[k] = _settings.plugins[j].values[k];\r\n        });\r\n        _settings.groups = _settings.groups.concat(_settings.plugins[j].groups);\r\n        _settings.fractions = _settings.fractions.concat(\r\n          _settings.plugins[j].fractions\r\n        );\r\n      }\r\n    } else {\r\n      _settings.plugins = {};\r\n    }\r\n\r\n    _base = document.createElement(\"div\");\r\n    _base.className = \"rs-base\";\r\n    _div = document.createElement(\"div\");\r\n    _div.className = \"rs-container\";\r\n    _div.style.height = \"auto\";\r\n    _base.appendChild(_div);\r\n    document.body.appendChild(_base);\r\n\r\n    if (!_settings) return;\r\n\r\n    if (_settings.groups) {\r\n      iterateKeys(_settings.groups, function (j) {\r\n        var g = _settings.groups[parseInt(j, 10)];\r\n        var div = document.createElement(\"div\");\r\n        div.className = \"rs-group\";\r\n        g.div = div;\r\n        var h1 = document.createElement(\"h1\");\r\n        h1.textContent = g.caption;\r\n        h1.addEventListener(\r\n          \"click\",\r\n          function (e) {\r\n            this.classList.toggle(\"hidden\");\r\n            e.preventDefault();\r\n          }.bind(div)\r\n        );\r\n        _div.appendChild(h1);\r\n        _div.appendChild(div);\r\n      });\r\n    }\r\n\r\n    if (_settings.fractions) {\r\n      iterateKeys(_settings.fractions, function (j) {\r\n        var f = _settings.fractions[parseInt(j, 10)];\r\n        var div = document.createElement(\"div\");\r\n        div.className = \"rs-fraction\";\r\n        var legend = document.createElement(\"div\");\r\n        legend.className = \"rs-legend\";\r\n\r\n        var h = 0;\r\n        iterateKeys(_settings.fractions[j].steps, function (k) {\r\n          var p = document.createElement(\"p\");\r\n          p.textContent = _settings.fractions[j].steps[k];\r\n          p.style.color = _colours[h];\r\n          legend.appendChild(p);\r\n          h++;\r\n        });\r\n        div.appendChild(legend);\r\n        div.style.height = h * _elHeight + \"px\";\r\n        f.div = div;\r\n        var graph = new StackGraph(div, h);\r\n        f.graph = graph;\r\n        _div.appendChild(div);\r\n      });\r\n    }\r\n  }\r\n\r\n  function _update() {\r\n    iterateKeys(_settings.plugins, function (j) {\r\n      _settings.plugins[j].update();\r\n    });\r\n\r\n    iterateKeys(_perfCounters, function (j) {\r\n      _perfCounters[j].draw();\r\n    });\r\n\r\n    if (_settings && _settings.fractions) {\r\n      iterateKeys(_settings.fractions, function (j) {\r\n        var f = _settings.fractions[parseInt(j, 10)];\r\n        var v = [];\r\n        var base = _perfCounters[f.base.toLowerCase()];\r\n        if (base) {\r\n          base = base.value();\r\n          iterateKeys(_settings.fractions[j].steps, function (k) {\r\n            var s = _settings.fractions[j].steps[parseInt(k, 10)].toLowerCase();\r\n            var val = _perfCounters[s];\r\n            if (val) {\r\n              v.push(val.value() / base);\r\n            }\r\n          });\r\n        }\r\n        f.graph.draw(v);\r\n      });\r\n    }\r\n\r\n    /*if( _height != _div.clientHeight ) {\r\n            _height = _div.clientHeight;\r\n            _base.style.height = _height + 2 * _elHeight + 'px';\r\n        console.log( _base.clientHeight );\r\n        }*/\r\n  }\r\n\r\n  _init();\r\n\r\n  return function (id) {\r\n    if (id) return _perf(id);\r\n    return {\r\n      element: _base,\r\n      update: _update,\r\n    };\r\n  };\r\n};\r\n\r\nif (typeof module === \"object\") {\r\n  module.exports = window.rStats;\r\n}\r\n","export class AssetsLoader {\n  loaderCache = {};\n  assets = {};\n\n  async getLoader(loaderName: string, loaderLoader: () => void) {\n    if (!this.loaderCache[loaderName]) {\n      this.loaderCache[loaderName] = await loaderLoader();\n    }\n    return this.loaderCache[loaderName];\n  }\n}\n\nexport const assetsLoader: AssetsLoader = new AssetsLoader();\n","import { assetsLoader } from \"@root/lib/modules/three/ThreeAssetsLoader\";\nimport Component from \"@aptero/axolotis-player/build/types/modules/core/ecs/Component\";\nimport { WebpackLazyModule } from \"@aptero/axolotis-player/build/types/modules/core/loader/WebpackLoader\";\nimport {\n  FrameLoop,\n  LazyServices,\n  WorldService,\n} from \"@aptero/axolotis-player/build/types\";\nimport { Service } from \"@aptero/axolotis-player/build/types/modules/core/service/LazyServices\";\n\ndeclare let window: any;\n\nexport async function aTHREE() {\n  const THREE: any = await import(\n    /*  webpackPrefetch: 0,  webpackMode: 'lazy',  webpackChunkName: \"@aptero/axolotis-core-plugins/three\"  */\n    \"three\"\n  );\n  return THREE;\n}\n\nexport async function getGlobalRenderer() {\n  if (!window.axolotis?.renderer) {\n    const THREE = await aTHREE();\n    let renderer = new THREE.WebGLRenderer({ antialias: true });\n    renderer.setSize(window.innerWidth, window.innerHeight);\n\n    renderer.toneMapping = THREE.ACESFilmicToneMapping;\n    renderer.toneMappingExposure = 1;\n    renderer.outputEncoding = THREE.sRGBEncoding;\n    renderer.setPixelRatio(window.devicePixelRatio);\n\n    document.body.appendChild(renderer.domElement);\n    if (!window.axolotis) {\n      window.axolotis = {};\n    }\n    window.axolotis.renderer = renderer;\n  }\n  return window.axolotis.renderer;\n}\n\nexport class ThreeLib implements Component {\n  renderer: THREE.WebGLRenderer;\n  scene: THREE.Scene;\n  camera: THREE.PerspectiveCamera;\n  preRenderPass: (() => void)[] = [];\n\n  constructor(\n    private frameLoop: FrameLoop,\n    private worldService: WorldService,\n    private THREE\n  ) {}\n\n  async init() {\n    this.scene = new this.THREE.Scene();\n\n    this.renderer = await getGlobalRenderer();\n\n    this.camera = new this.THREE.PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.001,\n      100000\n    );\n    this.camera.position.z = 2;\n\n    const render = () => {\n      for (const prerender of this.preRenderPass) {\n        prerender();\n      }\n      // FINAL PASS\n      this.renderer.render(this.scene, this.camera);\n      // set things back to normal\n      this.renderer.autoClear = true;\n    };\n\n    const onWindowResize = () => {\n      this.camera.aspect = window.innerWidth / window.innerHeight;\n      this.camera.updateProjectionMatrix();\n      this.renderer.setSize(window.innerWidth, window.innerHeight);\n      render();\n    };\n\n    this.worldService.addOnWorldChangeCallback(() => {\n      window.removeEventListener(\"resize\", onWindowResize);\n      this.frameLoop.removeLoop(ThreeLib.name);\n      if (this.worldService.isActiveWorld()) {\n        window.addEventListener(\"resize\", onWindowResize, false);\n        this.frameLoop.addLoop(ThreeLib.name, render);\n      }\n    }, true);\n  }\n\n  async loadAssets(path: string) {\n    if (assetsLoader.assets[path]) {\n      return assetsLoader.assets[path];\n    }\n    /*\n    TODO createa a early start download of assets so that the GLB start downloading early in the waterfall\n    Not as simple as it seems may be doable using service worker\n    fetch(path);//start download of assets\n    var oReq = new XMLHttpRequest();\n    oReq.addEventListener(\"load\", ()=>{});\n    oReq.open(\"GET\", path);\n    oReq.send();\n    */\n    if (path.endsWith(\".glb\")) {\n      const loader = await assetsLoader.getLoader(\"GLTFLoader\", async () => {\n        const module: any = await import(\n          /*  webpackPrefetch: 0,  webpackMode: 'lazy',  webpackChunkName: \"@aptero/axolotis-core-plugins/three/examples/jsm/loaders/GLTFLoader\"  */\n          \"three/examples/jsm/loaders/GLTFLoader\"\n        );\n        const gltfLoader = new module.GLTFLoader();\n        //const gltfLoader = new GLTFLoader(new this.THREE.LoadingManager());\n        return gltfLoader;\n      });\n      const result = await loader.loadAsync(path);\n      assetsLoader.assets[path] = result;\n    }\n    if (path.endsWith(\".jpg\")) {\n      const loader = await assetsLoader.getLoader(\"TextureLoader\", async () => {\n        const texLoader = new this.THREE.TextureLoader();\n        return texLoader;\n      });\n      const result = await loader.loadAsync(path);\n      assetsLoader.assets[path] = result;\n    }\n    return assetsLoader.assets[path];\n  }\n\n  getType(): string {\n    return ThreeLib.name;\n  }\n}\n\nexport class Factory implements WebpackLazyModule, Service<ThreeLib> {\n  constructor() {}\n\n  async createService(services: LazyServices): Promise<ThreeLib> {\n    let frameLoop = await services.getService<FrameLoop>(\n      \"@aptero/axolotis-player/modules/FrameLoop\"\n    );\n    let worldService = await services.getService<WorldService>(\n      \"@aptero/axolotis-player/modules/core/WorldService\"\n    );\n    return new ThreeLib(frameLoop, worldService, await aTHREE());\n  }\n}\n"],"names":["Factory","services","frameLoop","getService","DebugBtn","constructor","serviceEntity","window","document","body","insertAdjacentHTML","elementById","getElementById","onclick","evt","stopPropagation","preventDefault","addLoop","name","delta","innerText","Math","round","location","host","startsWith","getType","Stats","mode","container","createElement","addPanel","panel","appendChild","dom","showPanel","id","i","children","length","style","display","cssText","addEventListener","event","beginTime","performance","Date","now","prevTime","frames","fpsPanel","Panel","msPanel","self","memory","memPanel","REVISION","begin","end","time","update","usedJSHeapSize","jsHeapSizeLimit","this","domElement","setMode","fg","bg","min","Infinity","max","PR","devicePixelRatio","WIDTH","HEIGHT","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","canvas","width","height","context","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","value","maxValue","drawImage","rStats","require","threeLib","worldService","PerformanceStats","perfStatSingletonPresent","console","warn","stats","updateRstats","isActiveWorld","animate","t","requestAnimationFrame","rS","start","addOnWorldAdded","updateWorldCallback","elementsByClassName","getElementsByClassName","remove","config","css","values","framerate","caption","over","groups","plugins","threeStats","renderer","getWorlds","FrameLoop","ThreeLib","NavMeshPlayer","toLowerCase","push","log","forEach","async","world","index","getFirstComponentByType","ServiceEntity","setMonitoringCallback","glStats","_rS","_totalDrawArraysCalls","_totalDrawElementsCalls","_totalUseProgramCalls","_totalFaces","_totalVertices","_totalPoints","_totalBindTexures","_h","f","c","apply","arguments","WebGLRenderingContext","prototype","drawArrays","POINTS","drawElements","useProgram","bindTexture","set","attach","r","allcalls","drawelements","drawarrays","fractions","base","steps","info","geometries","programs","textures","render","calls","triangles","points","BrowserStats","_usedJSHeapSize","_totalJSHeapSize","totalJSHeapSize","log1024","_size","v","floor","pow","average","avgMs","total","module","exports","nowOffset","timing","navigationStart","mark","measure","settings","iterateKeys","array","callback","keys","Object","j","l","_settings","_colours","colours","_cssRStats","CSSPath","uri","url","element","href","rel","type","getElementsByTagName","_base","_div","_elHeight","_perfCounters","Graph","_dom","_id","_defArg","_def","_canvas","_ctx","_max","_current","color","_dotCanvas","_dotCtx","_alarmCanvas","_alarmCtx","className","draw","alarm","StackGraph","_num","th","h","PerfCounter","group","_time","_value","_total","_averageValue","_accumValue","_accumStart","_accumSamples","_spanId","_spanValue","_spanValueText","createTextNode","_graph","_started","_average","_start","userTimingAPI","_end","textContent","div","tick","frame","e","interpolate","nodeValue","a","below","_perf","idArg","undefined","g","parseInt","indexOf","p","_update","k","s","val","graph","concat","h1","classList","toggle","bind","legend","_init","assetsLoader","loaderName","loaderLoader","loaderCache","aTHREE","getGlobalRenderer","axolotis","THREE","WebGLRenderer","antialias","setSize","innerWidth","innerHeight","toneMapping","ACESFilmicToneMapping","toneMappingExposure","outputEncoding","sRGBEncoding","setPixelRatio","scene","Scene","camera","PerspectiveCamera","position","z","prerender","preRenderPass","autoClear","onWindowResize","aspect","updateProjectionMatrix","addOnWorldChangeCallback","removeEventListener","removeLoop","path","assets","endsWith","loader","getLoader","GLTFLoader","result","loadAsync","TextureLoader"],"sourceRoot":""}